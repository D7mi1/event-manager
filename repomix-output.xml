This file is a merged representation of the entire codebase, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
.gitignore
API_DOCUMENTATION.md
app/actions/verifyPin.ts
app/api/send-email/route.ts
app/auth/verify/page.tsx
app/components/SubscriptionTracker.tsx
app/config/constants.ts
app/dashboard/events/[id]/edit/page.tsx
app/dashboard/events/[id]/page.tsx
app/dashboard/events/[id]/seating/page.tsx
app/dashboard/events/new/_components/EventDetailsStep.tsx
app/dashboard/events/new/_components/EventPreview.tsx
app/dashboard/events/new/_components/EventTypeStep.tsx
app/dashboard/events/new/page.tsx
app/dashboard/layout.tsx
app/dashboard/page.tsx
app/dashboard/settings/page.tsx
app/e/[id]/page.tsx
app/favicon.ico
app/globals.css
app/hooks/useEvent.ts
app/hooks/useEventWithCache.ts
app/hooks/useTicket.ts
app/hooks/useTicketWithCache.ts
app/layout.tsx
app/live/[id]/page.tsx
app/login/page.tsx
app/middleware.ts
app/page.tsx
app/pricing/page.tsx
app/register/[id]/page.tsx
app/s/[id]/page.tsx
app/scan/[id]/page.tsx
app/scan/page.tsx
app/staff/[id]/page.tsx
app/t/[id]/page.tsx
app/utils/check-limits.ts
app/utils/schemas.test.ts
app/utils/schemas.ts
app/utils/sentry.ts
app/utils/storage.ts
app/utils/supabase/client.ts
app/utils/supabase/server.ts
app/utils/validation.test.ts
app/utils/validation.ts
app/utils/whatsappHelper.ts
app/wall/[id]/page.tsx
components/auth/EmailLogin.tsx
components/dashboard/AddGuestModal.tsx
components/dashboard/AttendeesTable.tsx
components/dashboard/EditEventModal.tsx
components/dashboard/ImportGuestsModal.tsx
components/dashboard/MessageConfigModal.tsx
components/dashboard/PinSettings.tsx
components/dashboard/ScannerAccessCard.tsx
components/dashboard/StatsCards.tsx
components/dashboard/WhatsAppQueueModal.tsx
components/EventCard.tsx
components/FeatureSlider.tsx
components/HeroSection.tsx
components/Navbar.tsx
components/seating/DraggableGuest.tsx
components/seating/DroppableTable.tsx
components/seating/SeatedGuestMarker.tsx
components/StickyCTA.tsx
DEPLOY_NOW.md
DEPLOY_QUICK_START.md
deploy.bat
deploy.sh
DEPLOYMENT_CHECKLIST.js
DEPLOYMENT.md
DOCUMENTATION_INDEX.md
DOCUMENTATION.md
eslint.config.mjs
jest.config.ts
next.config.ts
package.json
postcss.config.mjs
PROJECT_CONTEXT.md
PROJECT_SUMMARY.md
public/file.svg
public/globe.svg
public/icons/icon-192x192.png
public/icons/icon-512x512.png
public/manifest.json
public/next.svg
public/sounds/Beep/error.mp3
public/sounds/Beep/success.mp3
public/sw.js
public/swe-worker-5c72df51bb1f6ee0.js
public/vercel.svg
public/window.svg
public/workbox-f1770938.js
README_NEW.md
README.md
READY_FOR_DEPLOYMENT.md
store/eventStore.ts
tailwind.config.ts
tsconfig.json
types/index.ts
types/supabase.ts
VALIDATION_IMPLEMENTATION.md
VERCEL_GUIDE_AR.md
vercel.json
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path="app/dashboard/events/new/_components/EventDetailsStep.tsx">
import { useState } from 'react';
import { Calendar, MapPin, Loader2, Info } from 'lucide-react';
import { uploadEventImage } from '@/app/utils/storage'; 

interface Props {
  eventType: 'social' | 'business';
  details: any;
  setDetails: (data: any) => void;
  selectedColor: string;
  onNext: () => void;
  onBack: () => void;
}

export function EventDetailsStep({ eventType, details, setDetails, selectedColor, onNext, onBack }: Props) {
  const [isUploading, setIsUploading] = useState(false);

  // Ø¯Ø§Ù„Ø© Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø© (Ù…Ø­Ø¯Ø«Ø© Ù…Ø¹ Ø§Ù„ØªØ­Ù‚Ù‚)
  const handleLogoUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {
    if (!e.target.files || e.target.files.length === 0) return;
    
    const file = e.target.files[0];

    // 1. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø­Ø¬Ù… (Ù…Ø«Ù„Ø§Ù‹ 5 Ù…ÙŠØ¬Ø§)
    const maxSizeInBytes = 5 * 1024 * 1024; // 5MB
    if (file.size > maxSizeInBytes) {
      alert('Ø­Ø¬Ù… Ø§Ù„ØµÙˆØ±Ø© ÙƒØ¨ÙŠØ± Ø¬Ø¯Ø§Ù‹! ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± ØµÙˆØ±Ø© Ø£Ù‚Ù„ Ù…Ù† 5 Ù…ÙŠØ¬Ø§Ø¨Ø§ÙŠØª.');
      return;
    }

    // 2. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù†ÙˆØ¹
    if (!file.type.startsWith('image/')) {
      alert('ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ù…Ù„Ù ØµÙˆØ±Ø© ØµØ­ÙŠØ­ (PNG, JPG).');
      return;
    }

    setIsUploading(true);
    const publicUrl = await uploadEventImage(file);
    
    if (publicUrl) {
      setDetails({ ...details, image_url: publicUrl }); 
    } else {
        // ÙÙŠ Ø­Ø§Ù„ ÙØ´Ù„ Ø§Ù„Ø±ÙØ¹ Ø±ØºÙ… Ø§Ù„ØªØ­Ù‚Ù‚
        alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ±ØŒ ØªØ£ÙƒØ¯ Ù…Ù† Ø§ØªØµØ§Ù„Ùƒ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª');
    }
    
    setIsUploading(false);
  };

  const getTodayDate = () => new Date().toISOString().split('T')[0];

  return (
    <div className="animate-in slide-in-from-left duration-300 space-y-5">
      <h1 className="text-3xl font-black mb-2">Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© ğŸ“</h1>
      
      {/* --- Ù‚Ø³Ù… Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø© --- */}
      <div className="space-y-3">
        <label className="text-sm font-medium text-white/80">
          {eventType === 'business' ? 'Ø´Ø¹Ø§Ø± Ø§Ù„Ø´Ø±ÙƒØ© / Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ©' : 'ØµÙˆØ±Ø© Ø§Ù„Ø¯Ø¹ÙˆØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)'}
        </label>
        
        <div className="flex items-start gap-4">
          <div className="relative group w-full">
            <input
              type="file"
              accept="image/png, image/jpeg, image/jpg, image/webp" // ØªÙ‚ÙŠÙŠØ¯ Ø§Ù„Ø£Ù†ÙˆØ§Ø¹ ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­
              onChange={handleLogoUpload}
              disabled={isUploading}
              className="block w-full text-sm text-slate-500
                file:mr-4 file:py-3 file:px-4
                file:rounded-xl file:border-0
                file:text-xs file:font-bold
                file:bg-white/5 file:text-white
                hover:file:bg-white/10 cursor-pointer border border-white/10 rounded-xl bg-white/[0.02]"
            />
            
            {/* ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ù„ØµÙˆØ±Ø© - Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø°ÙŠ Ø·Ù„Ø¨ØªÙ‡ âœ… */}
            <div className="flex items-center gap-2 mt-2 text-[10px] text-white/40">
                <Info size={12} />
                <span>Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ 5MB â€¢ Ø§Ù„ØµÙŠØº (PNG, JPG) â€¢ Ø§Ù„Ø£Ø¨Ø¹Ø§Ø¯ Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø© (1200x600)</span>
            </div>

            {isUploading && (
              <div className="absolute inset-0 bg-black/50 flex items-center justify-center rounded-xl z-10">
                <Loader2 className="animate-spin text-[#C19D65]" size={20} />
              </div>
            )}
          </div>

          {/* Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© */}
          {details.image_url && (
            <div className="relative flex-shrink-0">
              <img 
                src={details.image_url} 
                alt="Preview" 
                className="w-16 h-16 rounded-xl object-cover border border-white/10 shadow-lg"
              />
              <div className="absolute -top-2 -right-2 bg-green-500 text-white p-1 rounded-full shadow-sm">
                <svg className="w-3 h-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={3} d="M5 13l4 4L19 7" /></svg>
              </div>
            </div>
          )}
        </div>
      </div>
      
      {/* --- Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ø­Ù‚ÙˆÙ„ --- */}
      <div className="space-y-2">
        <label className="text-xs font-bold text-white/50">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ©</label>
        <input type="text" value={details.name} onChange={(e) => setDetails({...details, name: e.target.value})} 
          className="w-full bg-white/5 border border-white/10 rounded-2xl p-4 outline-none focus:border-white/30 transition-colors" 
          placeholder="Ù…Ø«Ø§Ù„: Ø­ÙÙ„ Ø²ÙØ§Ù..." style={{ caretColor: selectedColor }} 
        />
      </div>

      {eventType === 'social' && (
        <div className="grid grid-cols-2 gap-4">
           <div className="space-y-2">
             <label className="text-xs font-bold text-white/50">Ø§Ù„Ø¹Ø±ÙŠØ³</label>
             <input type="text" value={details.groomName} onChange={(e) => setDetails({...details, groomName: e.target.value})} className="w-full bg-white/5 border border-white/10 rounded-2xl p-4 outline-none focus:border-white/30" />
           </div>
           <div className="space-y-2">
             <label className="text-xs font-bold text-white/50">Ø§Ù„Ø¹Ø±ÙˆØ³</label>
             <input type="text" value={details.brideName} onChange={(e) => setDetails({...details, brideName: e.target.value})} className="w-full bg-white/5 border border-white/10 rounded-2xl p-4 outline-none focus:border-white/30" />
           </div>
        </div>
      )}

      <div className="grid grid-cols-2 gap-4">
        <div className="space-y-2 relative group">
          <label className="text-xs font-bold text-white/50">Ø§Ù„ØªØ§Ø±ÙŠØ®</label>
          <div className="relative">
            <div className="absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none text-white/40"><Calendar size={18} /></div>
            <input type="date" min={getTodayDate()} value={details.date} onChange={(e) => setDetails({...details, date: e.target.value})} 
              className="w-full bg-white/5 border border-white/10 rounded-2xl p-4 pr-12 outline-none cursor-pointer text-white/90"
              style={{ colorScheme: 'dark' }} 
            />
          </div>
        </div>

        <div className="space-y-2">
          <label className="text-xs font-bold text-white/50">Ø§Ù„Ù…ÙƒØ§Ù†</label>
          <div className="relative">
              <div className="absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none text-white/40"><MapPin size={18} /></div>
              <input type="text" value={details.locationName} onChange={(e) => setDetails({...details, locationName: e.target.value})} className="w-full bg-white/5 border border-white/10 rounded-2xl p-4 pr-12 outline-none focus:border-white/30" placeholder="Ø§Ø³Ù… Ø§Ù„Ù‚Ø§Ø¹Ø©..." />
          </div>
        </div>
      </div>

      <div className="flex justify-between pt-6">
        <button onClick={onBack} className="px-6 py-3 rounded-xl bg-white/5 hover:bg-white/10 text-sm font-bold">Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
        <button onClick={onNext} style={{ backgroundColor: selectedColor }} className="px-8 py-3 rounded-xl text-black font-black hover:scale-105 transition-all">Ø§Ù„ØªØ§Ù„ÙŠ</button>
      </div>
    </div>
  );
}
</file>

<file path="app/dashboard/events/new/_components/EventPreview.tsx">
import { Sparkles, Briefcase, Calendar, MapPin, X } from 'lucide-react';

interface Props {
  eventType: 'social' | 'business' | null;
  details: any;
  color: string;
  isMobileOpen?: boolean; 
  onClose?: () => void;
}

export function EventPreview({ eventType, details, color, isMobileOpen = false, onClose }: Props) {
  
  const containerClasses = isMobileOpen 
    ? "fixed inset-0 z-50 bg-[#0A0A0C] flex flex-col items-center justify-center p-4 animate-in fade-in zoom-in duration-300" 
    : "hidden lg:flex w-1/2 bg-[#0F0F12] border-r border-white/5 relative items-center justify-center p-10 overflow-hidden sticky top-0 h-screen";

  return (
    <div className={containerClasses}>
        
        {/* Ø²Ø± Ø¥ØºÙ„Ø§Ù‚ (Ù„Ù„Ø¬ÙˆØ§Ù„) */}
        {isMobileOpen && (
          <button onClick={onClose} className="absolute top-6 left-6 p-3 bg-white/10 rounded-full text-white z-50 hover:bg-white/20 transition-colors">
            <X size={24} />
          </button>
        )}

        {/* Ø®Ù„ÙÙŠØ© Ø¶Ø¨Ø§Ø¨ÙŠØ© */}
        <div className="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] rounded-full blur-[120px] opacity-10 transition-colors duration-1000 pointer-events-none" style={{ backgroundColor: color }}></div>

        {/* Ø¥Ø·Ø§Ø± Ø§Ù„Ø¬ÙˆØ§Ù„ */}
        <div className={`relative bg-black rounded-[3rem] border-[8px] border-[#2A2A2E] shadow-2xl overflow-hidden z-10 transition-transform duration-500 ${isMobileOpen ? 'w-full h-[85vh] max-w-[380px]' : 'w-[380px] h-[750px] hover:scale-[1.02]'}`}>
          
          <div className="absolute top-0 left-1/2 -translate-x-1/2 w-40 h-7 bg-[#2A2A2E] rounded-b-2xl z-20"></div>

          <div className="w-full h-full bg-[#050505] relative overflow-hidden flex flex-col">
            
            {/* 1. Ø§Ù„ØºÙ„Ø§Ù Ø§Ù„Ø¹Ù„ÙˆÙŠ (Ø®Ù„ÙÙŠØ© ÙÙ‚Ø·) */}
            <div className="h-2/5 w-full relative transition-colors duration-700 overflow-hidden" style={{ backgroundColor: color }}>
               {details.image_url ? (
                 <img src={details.image_url} className="w-full h-full object-cover opacity-80" alt="Cover" />
               ) : (
                 <div className="absolute inset-0 bg-gradient-to-b from-black/10 via-transparent to-[#050505]"></div>
               )}
            </div>

            {/* ğŸ”¥ ØªØµØ­ÙŠØ­ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø©: ÙˆØ¶Ø¹Ù†Ø§Ù‡Ø§ Ù‡Ù†Ø§ (Ø®Ø§Ø±Ø¬ Ø§Ù„ØºÙ„Ø§Ù) Ù„ØªÙƒÙˆÙ† ÙÙˆÙ‚ Ø§Ù„Ø¬Ù…ÙŠØ¹ ÙˆÙ„Ø§ ØªÙ‚Øµ */}
            {/* top-[40%] Ù„Ø£Ù† Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„ØºÙ„Ø§Ù 2/5 Ø£ÙŠ 40% */}
            <div className="absolute top-[40%] left-1/2 -translate-x-1/2 -translate-y-1/2 w-24 h-24 bg-[#050505] rounded-full p-2 flex items-center justify-center shadow-2xl z-30">
                 <div className="w-full h-full rounded-full border border-white/10 flex items-center justify-center bg-white/5">
                    {eventType === 'business' ? <Briefcase style={{ color: color }} /> : <Sparkles style={{ color: color }} />}
                 </div>
            </div>

            {/* 2. Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ØªØ°ÙƒØ±Ø© */}
            <div className="flex-1 px-6 pt-14 text-center pb-8 overflow-y-auto scrollbar-hide">
              <p className="text-[10px] uppercase tracking-[0.2em] text-white/40 mb-4 animate-pulse">Ø¯Ø¹ÙˆØ© Ø®Ø§ØµØ©</p>
              
              {eventType === 'social' && (details.groomName || details.brideName) && (
                <div className="mb-4 animate-in slide-in-from-bottom duration-500 delay-100">
                  <h2 className="text-xl font-bold text-white">{details.groomName || 'Ø§Ø³Ù… Ø§Ù„Ø¹Ø±ÙŠØ³'}</h2>
                  <span className="text-xs text-white/30 my-1 block">&</span>
                  <h2 className="text-xl font-bold text-white">{details.brideName || 'Ø§Ø³Ù… Ø§Ù„Ø¹Ø±ÙˆØ³'}</h2>
                </div>
              )}

              <h1 className="text-2xl font-black text-white leading-tight mb-8 animate-in slide-in-from-bottom duration-500 delay-200">
                {details.name || 'Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©...'}
              </h1>

              <div className="bg-white/5 rounded-2xl p-4 border border-white/5 space-y-4 mb-8 backdrop-blur-sm animate-in slide-in-from-bottom duration-500 delay-300">
                <div className="flex items-center gap-3 text-right">
                   <div className="w-8 h-8 rounded-full bg-white/10 flex items-center justify-center"><Calendar size={14} className="opacity-70"/></div>
                   <div>
                      <p className="text-[9px] text-white/30 uppercase">Ø§Ù„ØªØ§Ø±ÙŠØ®</p>
                      <p className="text-xs font-bold text-white/90">{details.date || '---'}</p>
                   </div>
                </div>
                <div className="flex items-center gap-3 text-right">
                   <div className="w-8 h-8 rounded-full bg-white/10 flex items-center justify-center"><MapPin size={14} className="opacity-70"/></div>
                   <div>
                      <p className="text-[9px] text-white/30 uppercase">Ø§Ù„Ù…ÙˆÙ‚Ø¹</p>
                      <p className="text-xs font-bold text-white/90">{details.locationName || '---'}</p>
                   </div>
                </div>
              </div>

              {/* QR Code ÙˆÙ‡Ù…ÙŠ */}
              <div className="border border-dashed border-white/10 rounded-xl p-4 w-32 mx-auto opacity-40 mb-4">
                 <div className="w-full aspect-square bg-white/10 rounded flex items-center justify-center text-[8px] text-white/30">QR CODE</div>
              </div>
            </div>

            <div className="p-6 pt-0">
               <div style={{ backgroundColor: color }} className="w-full py-3 rounded-xl font-bold text-black text-center text-sm shadow-lg">
                  ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø¶ÙˆØ±
               </div>
            </div>
          </div>
        </div>
    </div>
  );
}
</file>

<file path="app/dashboard/events/new/_components/EventTypeStep.tsx">
import { Sparkles, Briefcase } from 'lucide-react';

interface Props {
  eventType: 'social' | 'business' | null;
  setEventType: (type: 'social' | 'business') => void;
  onNext: () => void;
}

export function EventTypeStep({ eventType, setEventType, onNext }: Props) {
  return (
    <div className="animate-in fade-in slide-in-from-right duration-300">
      <h1 className="text-3xl font-black mb-2">Ù…Ø§ Ù†ÙˆØ¹ Ù…Ù†Ø§Ø³Ø¨ØªÙƒØŸ âœ¨</h1>
      <p className="text-white/40 mb-8 text-sm">Ø³Ù†Ù‚ÙˆÙ… Ø¨ØªØ®ØµÙŠØµ Ø§Ù„ØªØµÙ…ÙŠÙ… Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ø®ØªÙŠØ§Ø±Ùƒ.</p>
      
      <div className="space-y-4">
        <button 
          onClick={() => { setEventType('social'); onNext(); }} 
          className={`w-full p-6 rounded-3xl border transition-all text-right flex items-center gap-4 group ${eventType === 'social' ? 'border-[#C19D65] bg-[#C19D65]/5' : 'border-white/5 bg-white/[0.02] hover:bg-white/5'}`}
        >
          <div className="w-12 h-12 rounded-2xl bg-[#C19D65]/10 flex items-center justify-center text-[#C19D65]">
            <Sparkles size={24} />
          </div>
          <div>
            <p className="font-bold">Ø£ÙØ±Ø§Ø­ ÙˆÙ…Ù†Ø§Ø³Ø¨Ø§Øª Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ©</p>
            <p className="text-xs text-white/30 mt-1">Ø¯Ø¹ÙˆØ§Øª Ø²ÙØ§ÙØŒ Ø®Ø·ÙˆØ¨Ø©ØŒ ØªØ®Ø±Ø¬</p>
          </div>
        </button>

        <button 
          onClick={() => { setEventType('business'); onNext(); }} 
          className={`w-full p-6 rounded-3xl border transition-all text-right flex items-center gap-4 group ${eventType === 'business' ? 'border-blue-500 bg-blue-500/5' : 'border-white/5 bg-white/[0.02] hover:bg-white/5'}`}
        >
          <div className="w-12 h-12 rounded-2xl bg-blue-500/10 flex items-center justify-center text-blue-500">
            <Briefcase size={24} />
          </div>
          <div>
            <p className="font-bold">Ø£Ø¹Ù…Ø§Ù„ ÙˆÙ…Ø¤ØªÙ…Ø±Ø§Øª</p>
            <p className="text-xs text-white/30 mt-1">Ù†Ø¯ÙˆØ§ØªØŒ ÙˆØ±Ø´ Ø¹Ù…Ù„ØŒ Ø§Ø¬ØªÙ…Ø§Ø¹Ø§Øª</p>
          </div>
        </button>
      </div>
    </div>
  );
}
</file>

<file path="app/middleware.ts">
import { createServerClient } from '@supabase/ssr'
import { NextResponse, type NextRequest } from 'next/server'

export async function middleware(request: NextRequest) {
  let response = NextResponse.next({
    request: {
      headers: request.headers,
    },
  })

  const supabase = createServerClient(
    process.env.NEXT_PUBLIC_SUPABASE_URL!,
    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,
    {
      cookies: {
        getAll() {
          return request.cookies.getAll()
        },
        setAll(cookiesToSet) {
          cookiesToSet.forEach(({ name, value, options }) => request.cookies.set(name, value))
          response = NextResponse.next({
            request: {
              headers: request.headers,
            },
          })
          cookiesToSet.forEach(({ name, value, options }) =>
            response.cookies.set(name, value, options)
          )
        },
      },
    }
  )

  // 1. ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¬Ù„Ø³Ø© (Session Refresh)
  // Ù‡Ø°Ù‡ Ø§Ù„Ø®Ø·ÙˆØ© Ø¶Ø±ÙˆØ±ÙŠØ© Ø¬Ø¯Ø§Ù‹ ÙÙŠ Next.js Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙˆÙƒÙ†
  const {
    data: { user },
  } = await supabase.auth.getUser()

  // 2. Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª (Route Protection)
  
  // Ù‡Ù„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠØ­Ø§ÙˆÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ ÙˆÙ‡Ùˆ ØºÙŠØ± Ù…Ø³Ø¬Ù„ØŸ
  if (request.nextUrl.pathname.startsWith('/dashboard') && !user) {
    const loginUrl = request.nextUrl.clone()
    loginUrl.pathname = '/login'
    return NextResponse.redirect(loginUrl)
  }

  // Ù‡Ù„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠØ­Ø§ÙˆÙ„ Ø¯Ø®ÙˆÙ„ ØµÙØ­Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙˆÙ‡Ùˆ Ù…Ø³Ø¬Ù„ Ø¨Ø§Ù„ÙØ¹Ù„ØŸ (Ù†Ø­ÙˆÙ„Ù‡ Ù„Ù„Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ ÙÙˆØ±Ø§Ù‹)
  if (request.nextUrl.pathname === '/login' && user) {
    const dashboardUrl = request.nextUrl.clone()
    dashboardUrl.pathname = '/dashboard'
    return NextResponse.redirect(dashboardUrl)
  }

  // Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ù…Ø±ÙˆØ± Ø§Ù„Ø·Ù„Ø¨ Ù„Ø¨Ø§Ù‚ÙŠ Ø§Ù„ØµÙØ­Ø§Øª (Ù…Ø«Ù„ ØµÙØ­Ø© Ø§Ù„ØªØ°Ø§ÙƒØ± Ø§Ù„Ø¹Ø§Ù…Ø© /t/...)
  return response
}

export const config = {
  matcher: [
    /*
     * Match all request paths except for the ones starting with:
     * - _next/static (static files)
     * - _next/image (image optimization files)
     * - favicon.ico (favicon file)
     * Feel free to modify this pattern to include more paths.
     */
    '/((?!_next/static|_next/image|favicon.ico|.*\\.(?:svg|png|jpg|jpeg|gif|webp)$).*)',
  ],
}
</file>

<file path="app/utils/storage.ts">
import { createBrowserClient } from '@supabase/ssr'

// Ù‡Ø°Ù‡ Ø§Ù„Ø¯Ø§Ù„Ø© ÙˆØ¸ÙŠÙØªÙ‡Ø§ ÙÙ‚Ø· Ø£Ø®Ø° Ø§Ù„Ù…Ù„Ù ÙˆØ±ÙØ¹Ù‡ Ù„Ù„Ø³ÙŠØ±ÙØ±ØŒ ÙˆØ¥Ø±Ø¬Ø§Ø¹ Ø§Ù„Ø±Ø§Ø¨Ø·
export async function uploadEventImage(file: File): Promise<string | null> {
  try {
    const supabase = createBrowserClient(
      process.env.NEXT_PUBLIC_SUPABASE_URL!,
      process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!
    )

    // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ø³Ù… ÙØ±ÙŠØ¯ Ù„Ù„ØµÙˆØ±Ø© Ù„ØªØ¬Ù†Ø¨ Ø§Ù„ØªÙƒØ±Ø§Ø±
    const fileExt = file.name.split('.').pop()
    const fileName = `${Date.now()}-${Math.random().toString(36).substring(2)}.${fileExt}`
    const filePath = `${fileName}`

    // Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø±ÙØ¹
    const { error: uploadError } = await supabase.storage
      .from('event-images') // ØªØ£ÙƒØ¯ Ø£Ù† Ø§Ø³Ù… Ø§Ù„Ø³Ù„Ø© ÙÙŠ Supabase ÙŠØ·Ø§Ø¨Ù‚ Ù‡Ø°Ø§ Ø§Ù„Ø§Ø³Ù…
      .upload(filePath, file, {
        cacheControl: '3600',
        upsert: false
      })

    if (uploadError) throw uploadError

    // Ø¬Ù„Ø¨ Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø¹Ø§Ù… Ù„Ù„ØµÙˆØ±Ø©
    const { data } = supabase.storage
      .from('event-images')
      .getPublicUrl(filePath)

    return data.publicUrl

  } catch (error) {
    console.error('Upload error:', error)
    alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø©')
    return null
  }
}
</file>

<file path="components/auth/EmailLogin.tsx">
'use client';

import { useState } from 'react';
import { supabase } from '@/app/utils/supabase/client';
import { Mail, KeyRound, ArrowRight, Loader2, CheckCircle2 } from 'lucide-react';
import { useRouter } from 'next/navigation';

export default function EmailLogin() {
  const router = useRouter();
  const [loading, setLoading] = useState(false);
  const [step, setStep] = useState<'email' | 'otp'>('email');
  const [email, setEmail] = useState('');
  const [otp, setOtp] = useState('');
  const [error, setError] = useState<string | null>(null);

  // 1. Ø¯Ø§Ù„Ø© Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ù…Ø² Ù„Ù„Ø¥ÙŠÙ…ÙŠÙ„
  const handleSendOtp = async (e: React.FormEvent) => {
    e.preventDefault();
    setLoading(true);
    setError(null);

    try {
      const { error } = await supabase.auth.signInWithOtp({
        email: email,
        options: {
          // ÙŠÙ…ÙƒÙ†Ùƒ ØªØ­Ø¯ÙŠØ¯ Ø±Ø§Ø¨Ø· Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ Ø¥Ø°Ø§ ÙƒÙ†Øª ØªØ³ØªØ®Ø¯Ù… Magic LinkØŒ 
          // Ù„ÙƒÙ† Ù„Ù„Ù€ OTP Ù„Ø§ Ù†Ø­ØªØ§Ø¬Ù‡ ÙƒØ«ÙŠØ±Ø§Ù‹ Ù‡Ù†Ø§
          shouldCreateUser: false, // Ø§Ø¬Ø¹Ù„Ù‡Ø§ true Ø¥Ø°Ø§ Ø£Ø±Ø¯Øª Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¬Ø¯ÙŠØ¯
        },
      });

      if (error) throw error;
      
      setStep('otp'); // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ø®Ø·ÙˆØ© Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„ÙƒÙˆØ¯
      alert('ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ù…Ø² Ø¥Ù„Ù‰ Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ğŸ“§');
    } catch (err: any) {
      setError(err.message || 'Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ù…Ø²');
    } finally {
      setLoading(false);
    }
  };

  // 2. Ø¯Ø§Ù„Ø© Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ù…Ø¯Ø®Ù„
  const handleVerifyOtp = async (e: React.FormEvent) => {
    e.preventDefault();
    setLoading(true);
    setError(null);

    try {
      const { data, error } = await supabase.auth.verifyOtp({
        email,
        token: otp,
        type: 'email',
      });

      if (error) throw error;

      // Ù†Ø¬Ø§Ø­ Ø§Ù„Ø¯Ø®ÙˆÙ„!
      if (data.session) {
        router.push('/dashboard'); // ØªÙˆØ¬ÙŠÙ‡ Ù„Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
      }
    } catch (err: any) {
      setError('Ø§Ù„Ø±Ù…Ø² ØºÙŠØ± ØµØ­ÙŠØ­ Ø£Ùˆ Ù…Ù†ØªÙ‡ÙŠ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©');
    } finally {
      setLoading(false);
    }
  };

  return (
    <div className="w-full max-w-md mx-auto p-8 bg-[#18181B] border border-white/10 rounded-[2rem] shadow-2xl">
      <div className="text-center mb-8">
        <div className="w-16 h-16 bg-[#C19D65]/10 rounded-2xl flex items-center justify-center mx-auto mb-4 text-[#C19D65]">
          {step === 'email' ? <Mail size={32} /> : <KeyRound size={32} />}
        </div>
        <h2 className="text-2xl font-bold text-white">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>
        <p className="text-white/40 mt-2 text-sm">
          {step === 'email' ? 'Ø£Ø¯Ø®Ù„ Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù„Ø§Ø³ØªÙ„Ø§Ù… Ø±Ù…Ø² Ø§Ù„Ø¯Ø®ÙˆÙ„' : `ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ù…Ø² Ø¥Ù„Ù‰ ${email}`}
        </p>
      </div>

      {error && (
        <div className="mb-6 p-4 bg-red-500/10 border border-red-500/20 rounded-xl text-red-400 text-sm text-center">
          {error}
        </div>
      )}

      {step === 'email' ? (
        // --- Ù†Ù…ÙˆØ°Ø¬ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ ---
        <form onSubmit={handleSendOtp} className="space-y-4">
          <div>
            <label className="block text-xs text-white/50 mb-2 mr-1">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
            <input
              type="email"
              required
              value={email}
              onChange={(e) => setEmail(e.target.value)}
              placeholder="name@example.com"
              className="w-full bg-black/40 border border-white/10 rounded-xl py-4 px-4 text-white outline-none focus:border-[#C19D65] transition-all dir-ltr"
            />
          </div>
          <button
            disabled={loading || !email}
            className="w-full py-4 bg-[#C19D65] text-black font-bold rounded-xl hover:brightness-110 disabled:opacity-50 transition-all flex items-center justify-center gap-2"
          >
            {loading ? <Loader2 className="animate-spin" /> : <>Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ù…Ø² <ArrowRight size={18} /></>}
          </button>
        </form>
      ) : (
        // --- Ù†Ù…ÙˆØ°Ø¬ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø±Ù…Ø² ---
        <form onSubmit={handleVerifyOtp} className="space-y-4">
          <div>
            <label className="block text-xs text-white/50 mb-2 mr-1">Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ (6 Ø£Ø±Ù‚Ø§Ù…)</label>
            <input
              type="text"
              required
              maxLength={6}
              value={otp}
              onChange={(e) => setOtp(e.target.value)}
              placeholder="123456"
              className="w-full bg-black/40 border border-white/10 rounded-xl py-4 px-4 text-center text-2xl font-mono tracking-[0.5em] text-[#C19D65] outline-none focus:border-[#C19D65] transition-all"
            />
          </div>
          
          <button
            disabled={loading || otp.length < 6}
            className="w-full py-4 bg-[#C19D65] text-black font-bold rounded-xl hover:brightness-110 disabled:opacity-50 transition-all flex items-center justify-center gap-2"
          >
            {loading ? <Loader2 className="animate-spin" /> : <>ØªØ­Ù‚Ù‚ ÙˆØ¯Ø®ÙˆÙ„ <CheckCircle2 size={18} /></>}
          </button>
          
          <button 
            type="button" 
            onClick={() => { setStep('email'); setOtp(''); setError(null); }}
            className="w-full py-2 text-white/40 text-sm hover:text-white"
          >
            ØªØºÙŠÙŠØ± Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ
          </button>
        </form>
      )}
    </div>
  );
}
</file>

<file path=".gitignore">
# See https://help.github.com/articles/ignoring-files/ for more about ignoring files.

# dependencies
/node_modules
/.pnp
.pnp.*
.yarn/*
!.yarn/patches
!.yarn/plugins
!.yarn/releases
!.yarn/versions

# testing
/coverage

# next.js
/.next/
/out/

# production
/build

# misc
.DS_Store
*.pem

# debug
npm-debug.log*
yarn-debug.log*
yarn-error.log*
.pnpm-debug.log*

# env files (can opt-in for committing if needed)
.env*

# vercel
.vercel

# typescript
*.tsbuildinfo
next-env.d.ts
</file>

<file path="API_DOCUMENTATION.md">
# API Documentation - ØªÙˆØ«ÙŠÙ‚ API

## Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©

Ù‡Ø°Ø§ Ø§Ù„Ù…Ø³ØªÙ†Ø¯ ÙŠÙˆØ¶Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù€ APIs Ø§Ù„Ù…ØªØ§Ø­Ø© ÙÙŠ ØªØ·Ø¨ÙŠÙ‚ Meras Event Platform.

---

## Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (Supabase)

### Attendees Table - Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø­Ø¶ÙˆØ±

#### Ø§Ù„Ø­Ù‚ÙˆÙ„:
- `id` (UUID): Ù…Ø¹Ø±Ù ÙØ±ÙŠØ¯ Ù„Ù„Ø¶ÙŠÙ
- `event_id` (UUID): Ù…Ø¹Ø±Ù Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ© Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø©
- `name` (String): Ø§Ø³Ù… Ø§Ù„Ø¶ÙŠÙ
- `email` (String): Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ
- `phone` (String): Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ
- `status` (Enum): Ø­Ø§Ù„Ø© Ø§Ù„Ø¶ÙŠÙ (pending | confirmed | declined)
- `created_at` (Timestamp): ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ø¶Ø§ÙØ©
- `check_in_time` (Timestamp, nullable): ÙˆÙ‚Øª Ø§Ù„Ø¯Ø®ÙˆÙ„
- `attended` (Boolean): Ù‡Ù„ Ø­Ø¶Ø± Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ©
- `regret_reason` (String, nullable): Ø³Ø¨Ø¨ Ø§Ù„Ø§Ø¹ØªØ°Ø§Ø±

#### Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª:

**Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø¶ÙŠÙ:**
```typescript
const { data, error } = await supabase
  .from('attendees')
  .select('*, events(*), seats(*)')
  .eq('id', ticketId)
  .single();
```

**ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø¶ÙŠÙ:**
```typescript
const { error } = await supabase
  .from('attendees')
  .update({ status: 'confirmed' })
  .eq('id', attendeeId);
```

---

### Events Table - Ø¬Ø¯ÙˆÙ„ Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ§Øª

#### Ø§Ù„Ø­Ù‚ÙˆÙ„:
- `id` (UUID): Ù…Ø¹Ø±Ù Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ©
- `name` (String): Ø§Ø³Ù… Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ©
- `date` (Timestamp): ØªØ§Ø±ÙŠØ® Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ©
- `location_name` (String): Ø§Ø³Ù… Ø§Ù„Ù…ÙˆÙ‚Ø¹
- `type` (Enum): Ù†ÙˆØ¹ Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ© (wedding | business | other)
- `user_id` (UUID): Ù…Ø¹Ø±Ù Ø§Ù„Ù…Ù†Ø¸Ù…
- `status` (Enum): Ø­Ø§Ù„Ø© Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ© (active | draft)
- `guests_count` (Integer): Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø¯Ø¹ÙˆÙŠÙ†
- `is_registration_open` (Boolean): Ù‡Ù„ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ù…ÙØªÙˆØ­

#### Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª:

**Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ©:**
```typescript
const { data, error } = await supabase
  .from('events')
  .select('*')
  .eq('id', eventId)
  .single();
```

---

### Memories Table - Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø°ÙƒØ±ÙŠØ§Øª

#### Ø§Ù„Ø­Ù‚ÙˆÙ„:
- `id` (UUID): Ù…Ø¹Ø±Ù Ø§Ù„Ø°ÙƒØ±Ù‰
- `event_id` (UUID): Ù…Ø¹Ø±Ù Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ©
- `attendee_id` (UUID): Ù…Ø¹Ø±Ù Ø§Ù„Ø¶ÙŠÙ
- `message` (String): Ù†Øµ Ø§Ù„Ø°ÙƒØ±Ù‰
- `created_at` (Timestamp): ÙˆÙ‚Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ©

#### Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª:

**Ø¥Ø¶Ø§ÙØ© Ø°ÙƒØ±Ù‰:**
```typescript
const { error } = await supabase.from('memories').insert({
  event_id: eventId,
  attendee_id: attendeeId,
  message: 'Ø°ÙƒØ±Ù‰ Ø¬Ù…ÙŠÙ„Ø©',
});
```

---

## Hooks Ø§Ù„Ù…ØªØ§Ø­Ø©

### useTicket
Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ°ÙƒØ±Ø© Ù…Ø¹ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡.

```typescript
const { ticket, loading, error, updateTicketStatus } = useTicket(id);
```

**Ø§Ù„Ø®ØµØ§Ø¦Øµ:**
- `ticket`: Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ°ÙƒØ±Ø©
- `loading`: Ù‡Ù„ ÙÙŠ Ø­Ø§Ù„Ø© ØªØ­Ù…ÙŠÙ„
- `error`: Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø®Ø·Ø£
- `updateTicketStatus()`: ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„ØªØ°ÙƒØ±Ø©

---

### useTicketWithCache
Ø¬Ù„Ø¨ Ø§Ù„ØªØ°ÙƒØ±Ø© Ù…Ø¹ SWR Ù„Ù„Ù€ caching.

```typescript
const { ticket, loading, error, mutate } = useTicketWithCache(id);
```

**Ø§Ù„Ù…ÙŠØ²Ø§Øª:**
- ØªØ®Ø²ÙŠÙ† Ù…Ø¤Ù‚Øª Ù„Ù„Ø¨ÙŠØ§Ù†Ø§Øª
- Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø°ÙƒÙŠØ© Ø¹Ù†Ø¯ ØªØºÙŠÙŠØ± Ø§Ù„Ø§ØªØµØ§Ù„
- ØªØ¬Ù†Ø¨ Ø¹Ù…Ù„ÙŠØ§Øª Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙƒØ±Ø±Ø©

---

### useEvent
Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ©.

```typescript
const { event, loading, error } = useEvent(eventId);
```

---

## Validation Functions - Ø¯ÙˆØ§Ù„ Ø§Ù„ØªØ­Ù‚Ù‚

### validateEmail
```typescript
const isValid = validateEmail('user@example.com');
```

### validatePhone
```typescript
const isValid = validatePhone('0501234567', 9); // 9 digits
```

### validateRequired
```typescript
const error = validateRequired('value', 'Field Name');
```

---

## Zod Schemas

### registrationSchema
Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„ØªØ³Ø¬ÙŠÙ„:

```typescript
import { registrationSchema, validateData } from '@/app/utils/schemas';

const result = validateData(registrationSchema, {
  name: 'Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯',
  email: 'ahmed@example.com',
  phone: '0501234567',
  eventId: 'uuid-here',
});

if (result.success) {
  // Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØµØ­ÙŠØ­Ø©
  const data = result.data;
} else {
  // ÙŠÙˆØ¬Ø¯ Ø®Ø·Ø£
  console.error(result.error);
}
```

### memorySchema
Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¯Ø®Ù„Ø© Ù„Ù„Ø°ÙƒØ±ÙŠØ§Øª:

```typescript
import { memorySchema } from '@/app/utils/schemas';

const result = memorySchema.safeParse({
  message: 'Ø°ÙƒØ±Ù‰ Ø¬Ù…ÙŠÙ„Ø©',
  eventId: 'uuid-here',
  attendeeId: 'uuid-here',
});
```

---

## Error Handling - Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡

### Sentry Integration

ØªØªØ¨Ø¹ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹:

```typescript
import { captureError, setSentryUser } from '@/app/utils/sentry';

// ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
setSentryUser(userId, userEmail);

// ØªØ³Ø¬ÙŠÙ„ Ø®Ø·Ø£
captureError(error, { context: 'registration_form' });

// Ù…Ø³Ø­ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¹Ù†Ø¯ Ø§Ù„Ø®Ø±ÙˆØ¬
clearSentryUser();
```

---

## Ø§Ù„Ø«ÙˆØ§Ø¨Øª ÙˆØ§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª

### app/config/constants.ts

```typescript
export const APP_URL = process.env.NEXT_PUBLIC_APP_URL;
export const STATUS_TYPES = {
  PENDING: 'pending',
  CONFIRMED: 'confirmed',
  DECLINED: 'declined',
};
export const EVENT_TYPES = {
  WEDDING: 'wedding',
  BUSINESS: 'business',
  OTHER: 'other',
};
```

---

## Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø©

Ø§Ù†Ø³Ø® `.env.example` Ø¥Ù„Ù‰ `.env.local` ÙˆØ£Ø¶Ù Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ:

```bash
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_key
NEXT_PUBLIC_SENTRY_DSN=your_sentry_dsn
NEXT_PUBLIC_APP_URL=http://localhost:3000
```

---

## Ø£Ù…Ø«Ù„Ø© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…

### Ø§Ù„ØªØ³Ø¬ÙŠÙ„ ÙÙŠ ÙØ¹Ø§Ù„ÙŠØ©

```typescript
import { registrationSchema, validateData } from '@/app/utils/schemas';
import { supabase } from '@/app/utils/supabase/client';

async function registerForEvent(formData) {
  // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
  const validation = validateData(registrationSchema, formData);
  if (!validation.success) {
    throw new Error(validation.error);
  }

  // Ø¥Ø¶Ø§ÙØ© ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
  const { data, error } = await supabase
    .from('attendees')
    .insert([validation.data])
    .select()
    .single();

  if (error) throw error;
  return data;
}
```

### ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø¶ÙˆØ±

```typescript
import { useTicket } from '@/app/hooks/useTicket';

export function ConfirmAttendance({ ticketId }) {
  const { ticket, updateTicketStatus } = useTicket(ticketId);

  const handleConfirm = async () => {
    try {
      await updateTicketStatus('confirmed');
      // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ù†Ø¬Ø§Ø­
    } catch (error) {
      // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø®Ø·Ø£
    }
  };

  return <button onClick={handleConfirm}>ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø¶ÙˆØ±</button>;
}
```

---

## Testing

ØªØ´ØºÙŠÙ„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª:

```bash
# ØªØ´ØºÙŠÙ„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª
npm test

# ØªØ´ØºÙŠÙ„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª ÙÙŠ ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø©
npm run test:watch

# ØªØ´ØºÙŠÙ„ Ù…Ù„Ù Ø§Ø®ØªØ¨Ø§Ø± Ù…Ø¹ÙŠÙ†
npm test validation.test.ts
```

---

## Ø§Ù„Ø¯Ø¹Ù… ÙˆØ§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©

Ù„Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª:
- [Supabase Documentation](https://supabase.com/docs)
- [SWR Documentation](https://swr.vercel.app)
- [Zod Documentation](https://zod.dev)
- [Sentry Documentation](https://docs.sentry.io)
- [Jest Documentation](https://jestjs.io)

---

**Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«:** December 30, 2025
</file>

<file path="app/api/send-email/route.ts">
import { NextResponse } from 'next/server';
import { Resend } from 'resend';

const resend = new Resend(process.env.RESEND_API_KEY);

export async function POST(request: Request) {
  try {
    const body = await request.json();
    const { 
      name, 
      email, 
      eventTitle, 
      eventDate, 
      eventTime, 
      location, 
      ticketLink, 
      heroImage, 
      qrData, // Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø®Ø§Ù…
      noKids, 
      noPhoto 
    } = body;

    // ğŸ‘‡ Ø§Ù„Ø­Ù„ Ø§Ù„Ø³Ø­Ø±ÙŠ: ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ù„Ù‰ Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø© Ø­Ù‚ÙŠÙ‚ÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª
    // Gmail ÙŠØ¹Ø´Ù‚ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ© ÙˆÙŠØ¸Ù‡Ø±Ù‡Ø§ ÙÙˆØ±Ø§Ù‹
    const qrImageUrl = `https://quickchart.io/qr?text=${encodeURIComponent(qrData)}&size=300&margin=1&ecLevel=H&format=png`;

    // ØªØµÙ…ÙŠÙ… Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ (Card Design)
    const htmlContent = `
      <!DOCTYPE html>
      <html dir="rtl" lang="ar">
      <head>
        <style>
          body { background-color: #f3f4f6; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; padding: 20px; margin: 0; }
          .wrapper { max-width: 600px; margin: 0 auto; background-color: #ffffff; border-radius: 16px; overflow: hidden; box-shadow: 0 4px 6px rgba(0,0,0,0.05); border: 1px solid #e5e7eb; }
          .header { background-color: #4f46e5; padding: 40px 20px; text-align: center; color: white; background-image: url('${heroImage || ""}'); background-size: cover; background-position: center; position: relative; }
          .header-overlay { background: rgba(79, 70, 229, 0.85); position: absolute; top: 0; left: 0; right: 0; bottom: 0; z-index: 1; }
          .header-content { position: relative; z-index: 2; }
          .content { padding: 30px 20px; text-align: center; color: #333; }
          .details { background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 12px; padding: 15px; margin: 20px 0; text-align: right; }
          .detail-item { padding: 8px 0; border-bottom: 1px dashed #e2e8f0; font-size: 14px; }
          .detail-item:last-child { border-bottom: none; }
          .qr-box { margin: 25px 0; padding: 10px; display: inline-block; background: white; border: 2px dashed #cbd5e1; border-radius: 12px; }
          .btn { background-color: #4f46e5; color: #ffffff !important; padding: 14px 28px; text-decoration: none; border-radius: 50px; font-weight: bold; display: inline-block; margin-top: 10px; box-shadow: 0 4px 10px rgba(79, 70, 229, 0.2); }
          .tags { margin-top: 20px; display: flex; justify-content: center; gap: 10px; flex-wrap: wrap; }
          .tag { font-size: 11px; padding: 4px 10px; border-radius: 20px; font-weight: bold; }
          .tag-red { background: #fee2e2; color: #991b1b; border: 1px solid #fecaca; }
        </style>
      </head>
      <body>
        <div class="wrapper">
          <div class="header">
            <div class="${heroImage ? 'header-overlay' : ''}"></div>
            <div class="header-content">
              <h1 style="margin:0; font-size: 24px;">${eventTitle}</h1>
              <p style="margin:5px 0 0; opacity: 0.9;">ØªÙ… ØªØ£ÙƒÙŠØ¯ ØªØ³Ø¬ÙŠÙ„Ùƒ Ø¨Ù†Ø¬Ø§Ø­ âœ…</p>
            </div>
          </div>

          <div class="content">
            <h2 style="color: #1e293b;">Ø£Ù‡Ù„Ø§Ù‹ Ø¨ÙƒØŒ ${name} ğŸ‘‹</h2>
            
            <div class="details">
               <div class="detail-item"><strong>ğŸ“… Ø§Ù„ØªØ§Ø±ÙŠØ®:</strong> ${eventDate}</div>
               <div class="detail-item"><strong>â° Ø§Ù„ÙˆÙ‚Øª:</strong> ${eventTime}</div>
               <div class="detail-item"><strong>ğŸ“ Ø§Ù„Ù…ÙˆÙ‚Ø¹:</strong> ${location}</div>
            </div>

            <div class="qr-box">
              <img src="${qrImageUrl}" alt="QR Code" width="200" height="200" style="display:block;" />
              <p style="margin:5px 0 0; font-size:12px; color:#94a3b8;">Ø§Ù…Ø³Ø­ Ø§Ù„Ø±Ù…Ø² Ù„Ù„Ø¯Ø®ÙˆÙ„</p>
            </div>

            <br/>
            <a href="${ticketLink}" class="btn">Ø¹Ø±Ø¶ Ø§Ù„ØªØ°ÙƒØ±Ø© ÙˆØ§Ù„ØªÙ‚ÙˆÙŠÙ…</a>

            <div class="tags">
               ${noKids ? '<span class="tag tag-red">ğŸ‘¶ Ù…Ù…Ù†ÙˆØ¹ Ø§Ù„Ø£Ø·ÙØ§Ù„</span>' : ''}
               ${noPhoto ? '<span class="tag tag-red">ğŸ“µ Ù…Ù…Ù†ÙˆØ¹ Ø§Ù„ØªØµÙˆÙŠØ±</span>' : ''}
            </div>
          </div>
        </div>
      </body>
      </html>
    `;

    const data = await resend.emails.send({
      from: 'Event Manager <onboarding@resend.dev>',
      to: [email],
      subject: `ØªØ°ÙƒØ±Ø© Ø¯Ø®ÙˆÙ„: ${eventTitle} ğŸ«`,
      html: htmlContent,
    });

    if (data.error) {
        return NextResponse.json({ error: data.error }, { status: 500 });
    }

    return NextResponse.json({ success: true, data });
  } catch (error) {
    return NextResponse.json({ error: 'Internal Error' }, { status: 500 });
  }
}
</file>

<file path="app/auth/verify/page.tsx">
'use client';

import { useState, useEffect, useRef, Suspense } from 'react';
import { supabase } from '@/app/utils/supabase/client';
import { useRouter, useSearchParams } from 'next/navigation';
import { Sparkles, Loader2, ArrowLeft, ShieldCheck, RefreshCw } from 'lucide-react';
import Link from 'next/link';

function VerifyContent() {
  const router = useRouter();
  const searchParams = useSearchParams();
  const email = searchParams.get('email') || 'example@mail.com';
  const interest = searchParams.get('interest'); // Ù„Ø¬Ù„Ø¨ Ø§Ù„Ø«ÙŠÙ… (Ø£Ø¹Ù…Ø§Ù„/Ø£ÙØ±Ø§Ø­)

  // ØªØ­Ø¯ÙŠØ¯ Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ø«ÙŠÙ… Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø³Ø§Ø¨Ù‚
  const themeColor = interest === 'business' ? '#3B82F6' : '#C19D65';
  const themeBg = interest === 'business' ? 'rgba(59, 130, 246, 0.1)' : 'rgba(193, 157, 101, 0.1)';

  const [otp, setOtp] = useState(['', '', '', '', '', '']);
  const [loading, setLoading] = useState(false);
  const [timer, setTimer] = useState(60);
  const [error, setError] = useState<string | null>(null);
  
  // Ù…Ø±Ø§Ø¬Ø¹ Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ Ù„Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„ØªØ±ÙƒÙŠØ²
  const inputRefs = useRef<(HTMLInputElement | null)[]>([]);

  // 1. Ø§Ù„ØªØ±ÙƒÙŠØ² Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¹Ù„Ù‰ Ø£ÙˆÙ„ Ø®Ø§Ù†Ø© Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„
  useEffect(() => {
    if (inputRefs.current[0]) {
      inputRefs.current[0].focus();
    }
  }, []);

  // Ø¹Ø¯Ø§Ø¯ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¥Ø±Ø³Ø§Ù„
  useEffect(() => {
    let interval: NodeJS.Timeout;
    if (timer > 0) {
      interval = setInterval(() => setTimer((prev) => prev - 1), 1000);
    }
    return () => clearInterval(interval);
  }, [timer]);

  // Ø¯Ø§Ù„Ø© Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù„ÙƒØªØ§Ø¨Ø©
  const handleChange = (index: number, value: string) => {
    if (isNaN(Number(value))) return; // Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… ÙÙ‚Ø·

    const newOtp = [...otp];
    // Ø£Ø®Ø° Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø£Ø®ÙŠØ± ÙÙ‚Ø· (ÙÙŠ Ø­Ø§Ù„ ÙƒØªØ¨ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø³Ø±Ø¹Ø©)
    newOtp[index] = value.substring(value.length - 1);
    setOtp(newOtp);

    // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ø®Ø§Ù†Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©
    if (value && index < 5 && inputRefs.current[index + 1]) {
      inputRefs.current[index + 1]?.focus();
    }

    // 2. Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¹Ù†Ø¯ Ø§ÙƒØªÙ…Ø§Ù„ Ø§Ù„ÙƒÙˆØ¯
    const combinedOtp = newOtp.join('');
    if (combinedOtp.length === 6) {
      handleVerify(combinedOtp);
    }
  };

  // Ø¯Ø§Ù„Ø© Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù„Ø­Ø°Ù (Backspace) ÙˆØ§Ù„ØªÙ†Ù‚Ù„ Ù„Ù„Ø®Ù„Ù
  const handleKeyDown = (index: number, e: React.KeyboardEvent<HTMLInputElement>) => {
    if (e.key === 'Backspace' && !otp[index] && index > 0 && inputRefs.current[index - 1]) {
      inputRefs.current[index - 1]?.focus();
    }
  };

  // Ø¯Ø§Ù„Ø© Ø¯Ø¹Ù… Ø§Ù„Ù„ØµÙ‚ (Paste) Ø§Ù„Ø°ÙƒÙŠ
  const handlePaste = (e: React.ClipboardEvent<HTMLInputElement>) => {
    e.preventDefault();
    const pastedData = e.clipboardData.getData('text').slice(0, 6).split('');
    if (pastedData.every(char => !isNaN(Number(char)))) {
      const newOtp = [...otp];
      pastedData.forEach((char, i) => {
        if (i < 6) newOtp[i] = char;
      });
      setOtp(newOtp);
      // ØªØ±ÙƒÙŠØ² Ø¹Ù„Ù‰ Ø¢Ø®Ø± Ø®Ø§Ù†Ø© ØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø£Ùˆ Ø§Ù„Ø£Ø®ÙŠØ±Ø©
      const focusIndex = Math.min(pastedData.length, 5);
      inputRefs.current[focusIndex]?.focus();
      
      if (newOtp.join('').length === 6) handleVerify(newOtp.join(''));
    }
  };

  const handleVerify = async (code: string) => {
    setLoading(true);
    setError(null);
    try {
      const { error } = await supabase.auth.verifyOtp({
        email,
        token: code,
        type: 'signup'
      });
      if (error) throw error;
      router.push('/dashboard'); // Ù†Ø¬Ø§Ø­!
    } catch (err: any) {
      setError('Ø§Ù„Ø±Ù…Ø² ØºÙŠØ± ØµØ­ÙŠØ­ Ø£Ùˆ Ø§Ù†ØªÙ‡Øª ØµÙ„Ø§Ø­ÙŠØªÙ‡');
      setLoading(false);
    }
  };

  const handleResend = async () => {
    if (timer > 0) return;
    setLoading(true);
    setError(null);
    try {
      const { error } = await supabase.auth.resend({
        type: 'signup',
        email,
      });
      if (error) throw error;
      setTimer(60); // Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¹Ø¯Ø§Ø¯
      alert('ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ù…Ø² Ù…Ø¬Ø¯Ø¯Ø§Ù‹');
    } catch (err: any) {
      setError(err.message);
    } finally {
      setLoading(false);
    }
  };

  return (
    <div className="min-h-screen bg-[#0A0A0C] text-white flex items-center justify-center p-6 text-right font-sans relative overflow-hidden" dir="rtl">
      
      {/* Ø§Ù„ØªÙˆÙ‡Ø¬ Ø§Ù„Ø®Ù„ÙÙŠ */}
      <div className="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[500px] h-[500px] rounded-full blur-[100px] opacity-20 transition-all duration-1000" style={{ background: `radial-gradient(circle, ${themeColor} 0%, transparent 70%)` }} />

      <div className="w-full max-w-lg bg-[#0F0F12]/90 border border-white/10 rounded-[3rem] p-10 backdrop-blur-3xl shadow-2xl relative z-10">
        
        {/* Header */}
        <div className="text-center mb-10">
          <div className="w-16 h-16 rounded-2xl flex items-center justify-center mx-auto mb-6 border transition-all duration-500" style={{ backgroundColor: themeBg, borderColor: `${themeColor}40` }}>
            <ShieldCheck size={32} style={{ color: themeColor }} />
          </div>
          <h1 className="text-2xl font-black mb-2">ØªØ­Ù‚Ù‚ Ù…Ù† Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</h1>
          <p className="text-white/40 text-sm leading-relaxed">
            Ø£Ø±Ø³Ù„Ù†Ø§ Ø±Ù…Ø² ØªØ£ÙƒÙŠØ¯ Ù…Ø¤Ù„Ù Ù…Ù† 6 Ø£Ø±Ù‚Ø§Ù… Ø¥Ù„Ù‰ <br />
            <span className="text-white font-bold dir-ltr block mt-1">{email}</span>
          </p>
        </div>

        {/* OTP Inputs */}
        <div className="flex justify-between gap-2 mb-8" dir="ltr">
          {otp.map((digit, index) => (
            <input
              key={index}
              ref={(el) => { inputRefs.current[index] = el }} // Ø±Ø¨Ø· Ø§Ù„Ù…Ø±Ø¬Ø¹
              type="text"
              inputMode="numeric" // Ù„Ø¥Ø¸Ù‡Ø§Ø± ÙƒÙŠØ¨ÙˆØ±Ø¯ Ø§Ù„Ø£Ø±Ù‚Ø§Ù…
              maxLength={1}
              value={digit}
              onChange={(e) => handleChange(index, e.target.value)}
              onKeyDown={(e) => handleKeyDown(index, e)}
              onPaste={handlePaste}
              className={`w-12 h-14 md:w-14 md:h-16 bg-white/[0.02] border rounded-2xl text-center text-xl font-bold outline-none transition-all
                ${digit ? `border-[${themeColor}] shadow-[0_0_10px_${themeColor}40]` : 'border-white/10'}
                focus:border-[var(--theme-color)] focus:bg-white/[0.05] focus:scale-105
              `}
              style={{ '--theme-color': themeColor } as React.CSSProperties}
            />
          ))}
        </div>

        {error && (
          <div className="mb-6 p-3 bg-red-500/10 border border-red-500/20 rounded-xl text-red-500 text-[11px] text-center font-bold animate-in fade-in">
             {error}
          </div>
        )}

        {/* Ø²Ø± Ø§Ù„ØªØ£ÙƒÙŠØ¯ */}
        <button 
          onClick={() => handleVerify(otp.join(''))}
          disabled={loading || otp.join('').length < 6}
          style={{ backgroundColor: themeColor, boxShadow: `0 15px 30px ${themeColor}20` }} 
          className="w-full text-black py-4 rounded-2xl font-black text-lg hover:scale-[1.01] active:scale-[0.98] transition-all flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed"
        >
          {loading ? <Loader2 className="animate-spin" /> : 'ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø³Ø§Ø¨'}
        </button>

        {/* Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ */}
        <div className="mt-8 text-center">
          <p className="text-white/30 text-xs font-bold mb-2">Ù„Ù… ÙŠØµÙ„Ùƒ Ø§Ù„Ø±Ù…Ø²ØŸ</p>
          {timer > 0 ? (
            <span className="text-white/50 text-xs font-mono bg-white/5 px-3 py-1 rounded-lg">
              Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¨Ø¹Ø¯ 00:{timer < 10 ? `0${timer}` : timer}
            </span>
          ) : (
            <button 
              onClick={handleResend}
              className="text-white hover:text-[var(--theme-color)] text-xs font-black underline decoration-2 underline-offset-4 transition-all flex items-center justify-center gap-2 mx-auto"
              style={{ '--theme-color': themeColor } as React.CSSProperties}
            >
              <RefreshCw size={12} /> Ø¥Ø¹Ø§Ø¯Ø© Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ù…Ø²
            </button>
          )}
        </div>
        
        {/* Ø§Ù„Ø¹ÙˆØ¯Ø© */}
        <Link href="/login" className="block mt-8 text-center text-[10px] text-white/20 hover:text-white transition-colors">
          Ø¹ÙˆØ¯Ø© Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
        </Link>

      </div>
    </div>
  );
}

// ØªØºÙ„ÙŠÙ Ø§Ù„ØµÙØ­Ø© Ø¨Ù€ Suspense Ù„Ø£Ù†Ù†Ø§ Ù†Ø³ØªØ®Ø¯Ù… useSearchParams
export default function VerifyPage() {
  return (
    <Suspense fallback={<div className="min-h-screen bg-[#0A0A0C] flex items-center justify-center text-white"><Loader2 className="animate-spin" /></div>}>
      <VerifyContent />
    </Suspense>
  );
}
</file>

<file path="app/components/SubscriptionTracker.tsx">
'use client';

import { useState, useEffect } from 'react';
import { supabase } from '@/app/utils/supabase/client';
import { Crown, Zap, MessageCircle, Users, AlertTriangle, Lock, ArrowUpRight, Loader2 } from 'lucide-react';
import Link from 'next/link';

export default function SubscriptionTracker() {
  const [loading, setLoading] = useState(true);
  const [sub, setSub] = useState<any>(null);

  useEffect(() => {
    const fetchSub = async () => {
      const { data: { user } } = await supabase.auth.getUser();
      if (user) {
        const { data } = await supabase
          .from('subscriptions')
          .select('*')
          .eq('user_id', user.id)
          .single();
        
        // Ø¥Ø°Ø§ Ù„Ù… ÙŠÙˆØ¬Ø¯ Ø³Ø¬Ù„ØŒ Ù†Ø¶Ø¹ Ù‚ÙŠÙ… Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ù„Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ©
        setSub(data || { 
          plan_tier: 'free', 
          guests_limit: 50, guests_used: 0,
          messages_limit: 0, messages_used: 0,
          renews_at: new Date(Date.now() + 30*24*60*60*1000).toISOString()
        });
      }
      setLoading(false);
    };
    fetchSub();
  }, []);

  if (loading) return <div className="h-48 bg-white/5 rounded-[2rem] animate-pulse"></div>;

  // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù†Ø³Ø¨ Ø§Ù„Ù…Ø¦ÙˆÙŠØ©
  const guestPercentage = Math.min((sub.guests_used / sub.guests_limit) * 100, 100);
  const isApproachingLimit = guestPercentage >= 80;
  const isFreePlan = sub.plan_tier === 'free';

  // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù„ÙˆÙ† Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø§Ø³ØªÙ‡Ù„Ø§Ùƒ
  const getProgressColor = () => {
    if (guestPercentage >= 90) return 'bg-red-500 shadow-[0_0_10px_rgba(239,68,68,0.5)]';
    if (guestPercentage >= 75) return 'bg-orange-500';
    return 'bg-[#C19D65]'; // Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø°Ù‡Ø¨ÙŠ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ
  };

  return (
    <div className="bg-gradient-to-br from-[#1A1A1D] to-[#0F0F12] border border-white/10 rounded-[2rem] p-6 relative overflow-hidden group">
      
      {/* Ø®Ù„ÙÙŠØ© Ø¬Ù…Ø§Ù„ÙŠØ© */}
      <div className="absolute top-0 right-0 w-32 h-32 bg-[#C19D65]/5 rounded-full blur-[50px] pointer-events-none"></div>

      {/* Ø±Ø£Ø³ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© */}
      <div className="flex justify-between items-start mb-6 relative z-10">
        <div>
          <h3 className="text-white font-bold flex items-center gap-2">
            <Zap size={18} className="text-[#C19D65]" />
            Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø¨Ø§Ù‚Ø©
          </h3>
          <p className="text-[10px] text-white/40 mt-1">
            ØªØ¬Ø¯ÙŠØ¯ Ø§Ù„Ø±ØµÙŠØ¯: {new Date(sub.renews_at).toLocaleDateString('ar-SA', { day: 'numeric', month: 'long' })}
          </p>
        </div>
        <div className="px-3 py-1 rounded-full bg-white/5 border border-white/10 text-[10px] font-bold uppercase tracking-wider text-white/60">
          {sub.plan_tier === 'free' ? 'Personal Plan' : sub.plan_tier === 'pro' ? 'PRO Plan' : 'Developed'}
        </div>
      </div>

      {/* 1. Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø¶ÙŠÙˆÙ (Guest Credits) */}
      <div className="mb-6 relative z-10">
        <div className="flex justify-between text-xs mb-2">
          <span className="text-white/60 flex items-center gap-1"><Users size={12}/> Ø±ØµÙŠØ¯ Ø§Ù„Ø¶ÙŠÙˆÙ</span>
          <span className="text-white font-bold">{sub.guests_used} <span className="text-white/30">/ {sub.guests_limit}</span></span>
        </div>
        <div className="w-full h-3 bg-white/5 rounded-full overflow-hidden border border-white/5">
          <div 
            className={`h-full rounded-full transition-all duration-1000 ${getProgressColor()}`} 
            style={{ width: `${guestPercentage}%` }}
          ></div>
        </div>
        
        {/* Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡ Ø§Ù„Ø°ÙƒÙŠØ© (Upsell Trigger) */}
        {isApproachingLimit && isFreePlan && (
          <div className="mt-3 flex items-start gap-2 bg-red-500/10 border border-red-500/20 p-3 rounded-xl">
             <AlertTriangle size={14} className="text-red-500 shrink-0 mt-0.5" />
             <div>
               <p className="text-[10px] font-bold text-red-400 leading-tight">Ù„Ù‚Ø¯ Ø§Ù‚ØªØ±Ø¨Øª Ù…Ù† Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰!</p>
               <p className="text-[9px] text-red-400/60 mt-1">Ø±Ù‚Ù Ø¨Ø§Ù‚ØªÙƒ Ø§Ù„Ø¢Ù† Ù„Ø¶Ù…Ø§Ù† Ø¯Ø®ÙˆÙ„ Ø¬Ù…ÙŠØ¹ Ø¶ÙŠÙˆÙÙƒ Ø¨Ù„Ø§ ØªÙˆÙ‚Ù.</p>
             </div>
             <Link href="/dashboard/settings" className="mr-auto text-[9px] bg-red-500 text-white px-2 py-1 rounded font-bold hover:bg-red-600">ØªØ±Ù‚ÙŠØ©</Link>
          </div>
        )}
      </div>

      {/* 2. Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ (WhatsApp/SMS) - Ø­Ø§Ù„Ø© Ø§Ù„Ù‚ÙÙ„ Ù„Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ© */}
      <div className={`relative p-4 rounded-xl border border-white/5 ${isFreePlan ? 'bg-white/[0.02]' : 'bg-transparent'}`}>
        
        {/* Ø·Ø¨Ù‚Ø© Ø§Ù„ØªØ¹ØªÙŠÙ… (Blur Overlay) Ù„Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ© */}
        {isFreePlan && (
          <div className="absolute inset-0 backdrop-blur-[2px] bg-[#0A0A0C]/40 z-20 flex flex-col items-center justify-center rounded-xl transition-all group-hover:backdrop-blur-[1px]">
             <div className="bg-[#1A1A1D] p-2 rounded-full border border-white/10 mb-2 shadow-xl">
               <Lock size={14} className="text-[#C19D65]" />
             </div>
             <p className="text-[10px] font-bold text-white/80">Ù…ÙŠØ²Ø© Ø¨Ø§Ù‚Ø© Ø§Ù„Ù…Ø­ØªØ±ÙÙŠÙ†</p>
             <p className="text-[9px] text-white/40">ØªÙØ¹ÙŠÙ„ Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨</p>
          </div>
        )}

        <div className="flex justify-between text-xs mb-2 opacity-60">
          <span className="flex items-center gap-1"><MessageCircle size={12}/> Ø¯Ø¹ÙˆØ§Øª ÙˆØ§ØªØ³Ø§Ø¨</span>
          <span>{sub.messages_used} / {sub.messages_limit || 'âˆ'}</span>
        </div>
        <div className="w-full h-1.5 bg-white/5 rounded-full overflow-hidden opacity-60">
           <div className="h-full bg-blue-500 rounded-full" style={{ width: `${(sub.messages_used / (sub.messages_limit || 1)) * 100}%` }}></div>
        </div>
      </div>

      {/* Ø²Ø± Ø§Ù„ØªØ±Ù‚ÙŠØ© Ø§Ù„Ø¹Ø§Ù… */}
      {isFreePlan && (
        <Link 
          href="/dashboard/settings"
          className="mt-6 w-full py-3 bg-[#C19D65] hover:bg-[#b08d55] text-black rounded-xl font-black text-xs flex items-center justify-center gap-2 transition-all hover:scale-[1.02] shadow-[0_4px_20px_rgba(193,157,101,0.2)]"
        >
          <Crown size={14} /> ØªØ±Ù‚ÙŠØ© Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„
        </Link>
      )}

    </div>
  );
}
</file>

<file path="app/config/constants.ts">
/**
 * Constants and Configuration
 */

// Get the app URL from environment or use window location
export const APP_URL = 
  process.env.NEXT_PUBLIC_APP_URL || 
  (typeof window !== 'undefined' ? window.location.origin : 'https://meras.app');

// API Configuration
export const API_CONFIG = {
  timeout: 10000, // 10 seconds
  retries: 3,
};

// Status Types
export const STATUS_TYPES = {
  PENDING: 'pending',
  CONFIRMED: 'confirmed',
  DECLINED: 'declined',
} as const;

// Event Types
export const EVENT_TYPES = {
  WEDDING: 'wedding',
  BUSINESS: 'business',
  OTHER: 'other',
} as const;

// Error Messages
export const ERROR_MESSAGES = {
  GENERIC: 'Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹',
  NETWORK: 'Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª',
  NOT_FOUND: 'Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©',
  UNAUTHORIZED: 'ØºÙŠØ± Ù…ØµØ±Ø­ Ø¨Ø§Ù„ÙˆØµÙˆÙ„',
  VALIDATION: 'Ø¨ÙŠØ§Ù†Ø§Øª ØºÙŠØ± ØµØ­ÙŠØ­Ø©',
} as const;
</file>

<file path="app/dashboard/events/[id]/edit/page.tsx">
'use client'

import { useState, useEffect, use } from 'react'
import { supabase } from '@/app/utils/supabase/client'
import { useRouter } from 'next/navigation'
import { Calendar, MapPin, Type, Loader2, FileText, Link as LinkIcon, Clock, Save, ArrowRight } from 'lucide-react'
import Link from 'next/link'

interface PageProps { params: Promise<{ id: string }> }

export default function EditEvent({ params }: PageProps) {
  const resolvedParams = use(params)
  const eventId = resolvedParams.id

  const [formData, setFormData] = useState({
    title: '', event_date: '', event_time: '', location: '', description: '', map_link: '', allow_multiple_entry: false
  })
  const [loading, setLoading] = useState(true)
  const [saving, setSaving] = useState(false)


  const router = useRouter()

  useEffect(() => {
    const fetchEvent = async () => {
      const { data } = await supabase.from('events').select('*').eq('id', eventId).single()
      if (data) setFormData(data)
      setLoading(false)
    }
    fetchEvent()
  }, [eventId, supabase])

  const handleUpdate = async (e: React.FormEvent) => {
    e.preventDefault()
    setSaving(true)

    const { error } = await supabase
      .from('events')
      .update({
        title: formData.title,
        event_date: formData.event_date,
        event_time: formData.event_time,
        location: formData.location,
        description: formData.description,
        map_link: formData.map_link,
        allow_multiple_entry: formData.allow_multiple_entry
      })
      .eq('id', eventId)

    if (error) {
      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØ­Ø¯ÙŠØ«')
      setSaving(false)
    } else {
      router.push('/dashboard')
      router.refresh()
    }
  }

  if (loading) return <div className="p-10 text-center">Ø¬Ø§Ø±ÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...</div>

  return (
    <div className="p-6 md:p-10 max-w-2xl mx-auto" dir="rtl">
      <Link href="/dashboard" className="text-slate-500 hover:text-slate-800 flex items-center gap-2 mb-6 w-fit"><ArrowRight size={18} /> Ø¥Ù„ØºØ§Ø¡ ÙˆØ¹ÙˆØ¯Ø©</Link>
      <h1 className="text-3xl font-bold text-slate-800 mb-8">ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©</h1>

      <form onSubmit={handleUpdate} className="bg-white p-8 rounded-2xl shadow-sm border border-slate-200 space-y-6">

        {/* Ø§Ù„Ø§Ø³Ù… */}
        <div><label className="block text-slate-700 font-medium mb-2">Ø§Ø³Ù… Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©</label><div className="relative"><Type className="absolute right-3 top-3 text-slate-400" size={20} /><input type="text" required className="w-full p-3 pr-10 border border-slate-300 rounded-lg outline-none focus:border-indigo-500" value={formData.title} onChange={(e) => setFormData({ ...formData, title: e.target.value })} /></div></div>

        {/* Ø§Ù„ÙˆØµÙ */}
        <div><label className="block text-slate-700 font-medium mb-2">Ø§Ù„ØªÙØ§ØµÙŠÙ„</label><div className="relative"><FileText className="absolute right-3 top-3 text-slate-400" size={20} /><textarea className="w-full p-3 pr-10 border border-slate-300 rounded-lg outline-none focus:border-indigo-500 min-h-[100px]" value={formData.description || ''} onChange={(e) => setFormData({ ...formData, description: e.target.value })} /></div></div>

        {/* Ø§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ù„ÙˆÙ‚Øª */}
        <div className="grid grid-cols-2 gap-4">
          <div><label className="block text-slate-700 font-medium mb-2">Ø§Ù„ØªØ§Ø±ÙŠØ®</label><div className="relative"><Calendar className="absolute right-3 top-3 text-slate-400" size={20} /><input type="date" required className="w-full p-3 pr-10 border border-slate-300 rounded-lg outline-none focus:border-indigo-500 text-right" value={formData.event_date} onChange={(e) => setFormData({ ...formData, event_date: e.target.value })} /></div></div>
          <div><label className="block text-slate-700 font-medium mb-2">Ø§Ù„ÙˆÙ‚Øª</label><div className="relative"><Clock className="absolute right-3 top-3 text-slate-400" size={20} /><input type="time" className="w-full p-3 pr-10 border border-slate-300 rounded-lg outline-none focus:border-indigo-500 text-right" value={formData.event_time || ''} onChange={(e) => setFormData({ ...formData, event_time: e.target.value })} /></div></div>
        </div>

        {/* Ø§Ù„Ù…ÙˆÙ‚Ø¹ */}
        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div><label className="block text-slate-700 font-medium mb-2">Ø§Ù„Ù…ÙˆÙ‚Ø¹</label><div className="relative"><MapPin className="absolute right-3 top-3 text-slate-400" size={20} /><input type="text" required className="w-full p-3 pr-10 border border-slate-300 rounded-lg outline-none focus:border-indigo-500" value={formData.location} onChange={(e) => setFormData({ ...formData, location: e.target.value })} /></div></div>
          <div><label className="block text-slate-700 font-medium mb-2">Ø±Ø§Ø¨Ø· Ø§Ù„Ø®Ø±ÙŠØ·Ø©</label><div className="relative"><LinkIcon className="absolute right-3 top-3 text-slate-400" size={20} /><input type="url" className="w-full p-3 pr-10 border border-slate-300 rounded-lg outline-none focus:border-indigo-500 text-left" dir="ltr" value={formData.map_link || ''} onChange={(e) => setFormData({ ...formData, map_link: e.target.value })} /></div></div>
        </div>

        {/* Ø®ÙŠØ§Ø± Ø§Ù„ØªÙƒØ±Ø§Ø± */}
        <div className="bg-slate-50 p-4 rounded-xl border border-slate-200">
          <label className="flex items-center gap-3 cursor-pointer">
            <input type="checkbox" className="w-5 h-5 accent-indigo-600" checked={formData.allow_multiple_entry} onChange={(e) => setFormData({ ...formData, allow_multiple_entry: e.target.checked })} />
            <span className="font-medium text-slate-800">Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…ØªØ¹Ø¯Ø¯</span>
          </label>
        </div>

        <button type="submit" disabled={saving} className="w-full bg-indigo-600 text-white font-bold py-3 rounded-xl hover:bg-indigo-700 transition shadow-lg flex items-center justify-center gap-2">
          {saving ? <Loader2 className="animate-spin" /> : <><Save size={20} /> Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª</>}
        </button>
      </form>
    </div>
  )
}
</file>

<file path="app/dashboard/events/[id]/seating/page.tsx">
'use client';
import { useState, useEffect, use } from 'react';
import { DndContext, DragEndEvent } from '@dnd-kit/core';
import { supabase } from '@/app/utils/supabase/client';
import { DraggableGuest } from '@/components/seating/DraggableGuest';
import { DroppableTable } from '@/components/seating/DroppableTable';
import { Loader2, ArrowLeft, Circle, Armchair } from 'lucide-react';
import Link from 'next/link';

export default function SeatingPage({ params }: { params: Promise<{ id: string }> }) {
  const { id } = use(params);
  const [loading, setLoading] = useState(true);
  const [tables, setTables] = useState<any[]>([]);
  const [unseatedGuests, setUnseatedGuests] = useState<any[]>([]);

  useEffect(() => { fetchData(); }, [id]);

  const fetchData = async () => {
    const { data: tablesData } = await supabase.from('tables').select('*, seats(*, attendee:attendees(*))').eq('event_id', id);
    const { data: allGuests } = await supabase.from('attendees').select('*').eq('event_id', id);
    
    const seatedIds = new Set();
    tablesData?.forEach(t => t.seats.forEach((s:any) => { if(s.attendee_id) seatedIds.add(s.attendee_id); }));
    
    setTables(tablesData || []);
    setUnseatedGuests(allGuests?.filter(g => !seatedIds.has(g.id)) || []);
    setLoading(false);
  };

  const handleDragEnd = async (event: DragEndEvent) => {
    const { active, over } = event;
    if (over && active.id !== over.id) {
      await supabase.from('seats').insert({ table_id: over.id, attendee_id: active.id, seat_number: Date.now() });
      fetchData();
    }
  };

  const addNewSection = async (shape: 'round' | 'theater') => {
    const name = prompt('Ø§Ø³Ù… Ø§Ù„Ø·Ø§ÙˆÙ„Ø©/Ø§Ù„Ù‚Ø³Ù…ØŸ');
    const cap = prompt('Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù‚Ø§Ø¹Ø¯ØŸ', '10');
    if (name) {
      await supabase.from('tables').insert([{ event_id: id, name, shape, capacity: parseInt(cap || '10') }]);
      fetchData();
    }
  };

  if (loading) return <div className="h-screen flex items-center justify-center bg-[#0A0A0C]"><Loader2 className="animate-spin text-[#C19D65]"/></div>;

  return (
    <DndContext onDragEnd={handleDragEnd}>
      <div className="flex flex-col h-screen bg-[#0A0A0C]">
        <div className="p-4 border-b border-white/10 flex justify-between items-center bg-[#18181B]">
           <div className="flex items-center gap-4">
              <Link href={`/dashboard/events/${id}`} className="text-white/50 hover:text-white"><ArrowLeft/></Link>
              <h1 className="font-bold text-white">Ù…Ø®Ø·Ø· Ø§Ù„Ø¬Ù„ÙˆØ³</h1>
           </div>
           <div className="flex gap-2">
              <button onClick={() => addNewSection('round')} className="px-4 py-2 bg-[#C19D65] text-black font-bold rounded flex gap-2"><Circle size={16}/> Ø·Ø§ÙˆÙ„Ø©</button>
              <button onClick={() => addNewSection('theater')} className="px-4 py-2 bg-[#27272A] text-[#C19D65] border border-[#C19D65] font-bold rounded flex gap-2"><Armchair size={16}/> ØµÙÙˆÙ</button>
           </div>
        </div>
        <div className="flex flex-1 overflow-hidden">
           <div className="w-64 bg-[#18181B] border-l border-white/10 p-4 overflow-y-auto">
              {unseatedGuests.map(g => <DraggableGuest key={g.id} id={g.id} name={g.name} category={g.category} />)}
           </div>
           <div className="flex-1 p-10 relative overflow-auto flex flex-wrap content-start gap-8 bg-[radial-gradient(#ffffff05_1px,transparent_1px)] [background-size:16px_16px]">
              {tables.map(t => <DroppableTable key={t.id} id={t.id} name={t.name} capacity={t.capacity} shape={t.shape} guests={t.seats.map((s:any) => s.attendee)} />)}
           </div>
        </div>
      </div>
    </DndContext>
  );
}
</file>

<file path="app/dashboard/events/new/page.tsx">
'use client';

import { useState } from 'react';
import { supabase } from '@/app/utils/supabase/client'; 
import { useRouter } from 'next/navigation';
import { Loader2, ArrowRight, Eye } from 'lucide-react';

// Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª Ø§Ù„ÙØ±Ø¹ÙŠØ©
import { EventTypeStep } from './_components/EventTypeStep';
import { EventDetailsStep } from './_components/EventDetailsStep';
import { EventPreview } from './_components/EventPreview';

export default function NewEventPage() {
  const router = useRouter();
  const [step, setStep] = useState(1);
  const [loading, setLoading] = useState(false);
  const [showMobilePreview, setShowMobilePreview] = useState(false);
  
  // ØªØ®Ø²ÙŠÙ† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
  const [eventType, setEventType] = useState<'social' | 'business' | null>('social');
  const [selectedColor, setSelectedColor] = useState('#C19D65');
  const [eventDetails, setEventDetails] = useState({ 
    name: '', 
    date: '', 
    locationName: '', 
    groomName: '', 
    brideName: '', 
    image_url: null 
  });

  const nextStep = () => setStep((prev) => prev + 1);
  const prevStep = () => setStep((prev) => prev - 1);

  // âœ… Ø¯Ø§Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø©: Ø§Ù„ØªØ­Ù‚Ù‚ Ù‚Ø¨Ù„ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù…Ù† Ø§Ù„Ø®Ø·ÙˆØ© 2 Ø¥Ù„Ù‰ 3
  const handleNextFromDetails = () => {
    if (!eventDetails.name.trim()) {
      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ ÙƒØªØ§Ø¨Ø© Ø§Ø³Ù… Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ©');
      return;
    }
    if (!eventDetails.date) {
      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± ØªØ§Ø±ÙŠØ® Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ©');
      return;
    }
    if (!eventDetails.locationName.trim()) {
      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªØ­Ø¯ÙŠØ¯ Ù…ÙƒØ§Ù† Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ©');
      return;
    }
    
    // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø³Ù„ÙŠÙ…Ø©ØŒ Ø§Ù†ØªÙ‚Ù„ Ù„Ù„Ø®Ø·ÙˆØ© Ø§Ù„ØªØ§Ù„ÙŠØ©
    nextStep();
  };

  // Ø¯Ø§Ù„Ø© Ø§Ù„Ø­ÙØ¸ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© (Ù„Ù… ØªØ¹Ø¯ Ø¨Ø­Ø§Ø¬Ø© Ù„ØªØ­Ù‚Ù‚ Ù„Ø£Ù†Ù†Ø§ ØªØ£ÙƒØ¯Ù†Ø§ Ø³Ø§Ø¨Ù‚Ø§Ù‹ØŒ Ù„ÙƒÙ† ØªØ±ÙƒÙ†Ø§Ù‡Ø§ Ù„Ù„Ø§Ø­ØªÙŠØ§Ø·)
  const handleCreateEvent = async () => {
    setLoading(true);
    try {
      const { data: { user } } = await supabase.auth.getUser();
      if (!user) throw new Error('ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„');

      const { error } = await supabase.from('events').insert([{
          user_id: user.id,
          name: eventDetails.name,
          date: eventDetails.date,
          type: eventType,
          status: 'active',
          location_name: eventDetails.locationName,
          image_url: eventDetails.image_url,
          theme_color: selectedColor,
          groom_name: eventType === 'social' ? eventDetails.groomName : null,
          bride_name: eventType === 'social' ? eventDetails.brideName : null,
      }]);

      if (error) throw error;
      router.push('/dashboard'); 
    } catch (err: any) {
      alert('Ø®Ø·Ø£: ' + err.message);
    } finally {
      setLoading(false);
    }
  };

  return (
    <div className="min-h-screen bg-[#0A0A0C] text-white font-sans flex" dir="rtl">
      
      {/* ğŸŸ¢ Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø£ÙŠÙ…Ù†: Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ */}
      <div className="w-full lg:w-1/2 p-6 lg:p-12 overflow-y-auto h-screen scrollbar-hide pt-20 lg:pt-12">
        <div className="max-w-md mx-auto relative">
          
          <button onClick={() => router.back()} className="flex items-center gap-2 text-white/40 hover:text-white mb-8 transition-colors text-sm font-bold">
            <ArrowRight size={16} /> Ø¥Ù„ØºØ§Ø¡ ÙˆØ¹ÙˆØ¯Ø©
          </button>

          {/* Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù… */}
          <div className="flex items-center gap-2 mb-10">
            {[1, 2, 3].map((s) => (
              <div key={s} className={`h-1.5 flex-1 rounded-full transition-all duration-500 ${step >= s ? 'bg-current' : 'bg-white/10'}`} style={{ color: step >= s ? selectedColor : undefined }}></div>
            ))}
          </div>

          <div className="min-h-[400px]">
            {/* Ø§Ù„Ø®Ø·ÙˆØ© 1: Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù†ÙˆØ¹ */}
            {step === 1 && (
              <EventTypeStep 
                eventType={eventType} 
                setEventType={(t) => { setEventType(t); setSelectedColor(t === 'social' ? '#C19D65' : '#3B82F6'); }} 
                onNext={nextStep} 
              />
            )}

            {/* Ø§Ù„Ø®Ø·ÙˆØ© 2: Ø§Ù„ØªÙØ§ØµÙŠÙ„ (Ù‡Ù†Ø§ Ø§Ù„ØªØºÙŠÙŠØ±) */}
            {step === 2 && eventType && (
              <EventDetailsStep 
                eventType={eventType} 
                details={eventDetails} 
                setDetails={setEventDetails} 
                selectedColor={selectedColor} 
                onNext={handleNextFromDetails} // âœ… Ø±Ø¨Ø·Ù†Ø§ Ø§Ù„Ø¯Ø§Ù„Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ù‡Ù†Ø§ Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† nextStep Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø©
                onBack={prevStep} 
              />
            )}

            {/* Ø§Ù„Ø®Ø·ÙˆØ© 3: Ø§Ù„Ù„Ù…Ø³Ø§Øª Ø§Ù„Ø£Ø®ÙŠØ±Ø© */}
            {step === 3 && (
              <div className="animate-in slide-in-from-left duration-300 space-y-6">
                <h1 className="text-3xl font-black mb-2">Ø§Ù„Ù„Ù…Ø³Ø§Øª Ø§Ù„Ø£Ø®ÙŠØ±Ø© ğŸ¨</h1>
                <div>
                  <label className="text-xs font-bold text-white/50 mb-3 block">Ù„ÙˆÙ† Ø§Ù„Ø«ÙŠÙ…</label>
                  <div className="flex gap-3 flex-wrap">
                    {['#C19D65', '#3B82F6', '#8B5CF6', '#EC4899', '#10B981', '#F59E0B'].map((color) => (
                      <button key={color} onClick={() => setSelectedColor(color)} className={`w-12 h-12 rounded-full border-2 transition-all ${selectedColor === color ? 'border-white scale-110' : 'border-transparent opacity-40 hover:opacity-100'}`} style={{ backgroundColor: color }} />
                    ))}
                  </div>
                </div>

                <div className="bg-gradient-to-br from-white/5 to-transparent p-5 rounded-3xl border border-white/5 mt-6">
                   <div className="flex items-center gap-3 mb-2">
                      <div className="w-8 h-8 rounded-full bg-green-500/20 flex items-center justify-center text-green-500"><Eye size={16} /></div>
                      <span className="font-bold text-sm">Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© Ù†Ø´Ø·Ø©</span>
                   </div>
                   <p className="text-xs text-white/40 leading-relaxed">ØªØ£ÙƒØ¯ Ù…Ù† Ø´ÙƒÙ„ Ø§Ù„Ø¯Ø¹ÙˆØ© Ù‚Ø¨Ù„ Ø§Ù„Ù†Ø´Ø±.</p>
                </div>

                <div className="flex justify-between pt-6">
                  <button onClick={prevStep} className="px-6 py-3 rounded-xl bg-white/5 hover:bg-white/10 text-sm font-bold">Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
                  <button onClick={handleCreateEvent} disabled={loading} style={{ backgroundColor: selectedColor }} className="px-8 py-3 rounded-xl text-black font-black hover:scale-105 transition-all flex items-center gap-2 disabled:opacity-70">
                    {loading ? <Loader2 className="animate-spin" size={18} /> : 'Ù†Ø´Ø± Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ©'}
                  </button>
                </div>
              </div>
            )}
          </div>
        </div>

        {/* ğŸ‘ï¸ Ø²Ø± Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ø¹Ø§Ø¦Ù… */}
        <button 
          onClick={() => setShowMobilePreview(true)}
          className="lg:hidden fixed bottom-6 left-6 w-14 h-14 bg-white text-black rounded-full shadow-2xl flex items-center justify-center z-40 hover:scale-110 transition-transform active:scale-95"
        >
          <Eye size={24} />
        </button>

      </div>

      {/* ğŸŸ¢ Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø£ÙŠØ³Ø±: Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© */}
      <EventPreview eventType={eventType} details={eventDetails} color={selectedColor} />

      {/* ğŸŸ¢ Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø¹Ø§Ø¦Ù…: Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© (Ø¬ÙˆØ§Ù„) */}
      {showMobilePreview && (
        <EventPreview 
          eventType={eventType} 
          details={eventDetails} 
          color={selectedColor} 
          isMobileOpen={true}
          onClose={() => setShowMobilePreview(false)}
        />
      )}

    </div>
  );
}
</file>

<file path="app/dashboard/layout.tsx">
// app/dashboard/layout.tsx
export default function DashboardLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <section className="min-h-screen bg-[#0A0A0C]">
      {/* Ù‡Ø°Ø§ Ø§Ù„Ù…Ù„Ù ÙŠØ¶Ù…Ù† Ø£Ù† ØµÙØ­Ø© Ø§Ù„Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ù„Ø§ ØªØ±Ø« Ø£ÙŠ Ø´Ø±ÙŠØ· Ø¬Ø§Ù†Ø¨ÙŠ Ù…Ù† Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ø¹Ù„ÙŠØ§ */}
      {children}
    </section>
  );
}
</file>

<file path="app/dashboard/page.tsx">
'use client';

import { useState, useEffect } from 'react';
import { supabase } from '@/app/utils/supabase/client';
import {
  Plus, Calendar, Users, BarChart3, Clock,
  Settings, Zap, Bell, CheckCircle2, Crown,
  ArrowUpRight, Sparkles, Briefcase
} from 'lucide-react';
import Link from 'next/link';
import SubscriptionTracker from '@/app/components/SubscriptionTracker';
import { Event, Attendee } from '@/types';

// Ù…ÙƒÙˆÙ† Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‡ÙŠÙƒÙ„ÙŠ
const DashboardSkeleton = () => (
  <div className="space-y-8 animate-pulse">
    <div className="flex justify-between items-center">
      <div className="h-8 w-64 bg-white/5 rounded-xl"></div>
      <div className="h-10 w-32 bg-white/5 rounded-xl"></div>
    </div>
    <div className="grid grid-cols-1 md:grid-cols-4 gap-4">
      {[1, 2, 3, 4].map((i) => (
        <div key={i} className="h-32 bg-white/5 rounded-[2rem]"></div>
      ))}
    </div>
    <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
      <div className="lg:col-span-2 h-64 bg-white/5 rounded-[2.5rem]"></div>
      <div className="h-64 bg-white/5 rounded-[2.5rem]"></div>
    </div>
  </div>
);

export default function Dashboard() {
  const [loading, setLoading] = useState(true);
  const [userName, setUserName] = useState('');
  const [themeColor, setThemeColor] = useState('#C19D65');
  const [stats, setStats] = useState({
    activeEvents: 0,
    totalGuests: 0,
    confirmedGuests: 0,
    allEventsCount: 0
  });

  const [allEvents, setAllEvents] = useState<Event[]>([]);
  const [notifications, setNotifications] = useState<any[]>([]);

  useEffect(() => {
    const fetchData = async () => {
      const { data: { user } } = await supabase.auth.getUser();
      if (!user) return;

      const { data: profile } = await supabase.from('profiles').select('*').eq('id', user.id).single();
      if (profile) {
        setUserName(profile.full_name);
        if (profile.interest === 'business') setThemeColor('#3B82F6');
      }

      // Ø¬Ù„Ø¨ ÙƒÙ„ Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ§Øª
      const { data: events } = await supabase
        .from('events')
        .select('*, attendees(status, created_at)')
        .order('date', { ascending: true }); // ØªØ±ØªÙŠØ¨ ØªØµØ§Ø¹Ø¯ÙŠ (Ø§Ù„Ø£Ù‚Ø±Ø¨ Ø£ÙˆÙ„Ø§Ù‹)

      if (events) {
        const totalGuests = events.reduce((acc, e) => acc + (e.attendees?.length || 0), 0);
        const confirmed = events.reduce((acc, e: any) => acc + (e.attendees?.filter((a: Attendee) => a.status === 'confirmed').length || 0), 0);
        const active = events.filter(e => e.status === 'active').length;

        // Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª
        let allAttendees: any[] = [];
        events.forEach(e => {
          if (e.attendees) {
            e.attendees.forEach((a: any) => allAttendees.push({ ...a, eventName: e.name }));
          }
        });
        const recentActivity = allAttendees
          .sort((a, b) => new Date(b.created_at).getTime() - new Date(a.created_at).getTime())
          .slice(0, 3);

        setStats({ activeEvents: active, totalGuests, confirmedGuests: confirmed, allEventsCount: events.length });

        // âœ… Ø§Ù„ØªØºÙŠÙŠØ± Ù‡Ù†Ø§: Ù†Ø¶Ø¹ ÙƒÙ„ Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ§Øª Ø¨Ø¯ÙˆÙ† Ù‚Øµ (slice)
        setAllEvents(events);
        setNotifications(recentActivity);
      }

      setTimeout(() => setLoading(false), 800);
    };

    fetchData();
  }, []);

  const getDaysLeft = (dateStr: string) => {
    const diff = new Date(dateStr).getTime() - new Date().getTime();
    const days = Math.ceil(diff / (1000 * 3600 * 24));
    // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„ØªØ§Ø±ÙŠØ® ÙÙŠ Ø§Ù„Ù…Ø§Ø¶ÙŠ Ù†Ø¹Ø±Ø¶ 0 Ø£Ùˆ Ø±Ù‚Ù… Ø³Ø§Ù„Ø¨
    return days;
  };

  if (loading) return (
    <div className="min-h-screen bg-[#0A0A0C] text-white p-6 pt-24 pb-20 font-sans" dir="rtl">
      <div className="max-w-7xl mx-auto"><DashboardSkeleton /></div>
    </div>
  );

  return (
    <div className="min-h-screen bg-[#0A0A0C] text-white p-6 pt-24 pb-20 font-sans" dir="rtl">
      <div className="max-w-7xl mx-auto space-y-8">

        {/* Header */}
        <div className="flex flex-col md:flex-row justify-between items-start md:items-center gap-6">
          <div>
            <h1 className="text-3xl font-black mb-1">Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ <span style={{ color: themeColor }}>{userName}</span> ğŸ‘‹</h1>
            <p className="text-white/40 text-sm font-medium">
              Ù„Ø¯ÙŠÙƒ {stats.allEventsCount} ÙØ¹Ø§Ù„ÙŠØ§Øª ÙÙŠ Ø³Ø¬Ù„Ùƒ.
            </p>
          </div>
          <div className="flex gap-3">
            <Link href="/dashboard/settings" className="p-3 rounded-xl bg-white/5 hover:bg-white/10 text-white/60 hover:text-white transition-colors relative">
              <Settings size={20} />
            </Link>
            <button className="p-3 rounded-xl bg-white/5 hover:bg-white/10 text-white/60 hover:text-white transition-colors relative">
              <Bell size={20} />
              {notifications.length > 0 && <span className="absolute top-2 right-2 w-2 h-2 bg-red-500 rounded-full animate-pulse"></span>}
            </button>
            <Link href="/dashboard/events/new" style={{ backgroundColor: themeColor }} className="text-black px-6 py-3 rounded-xl font-bold flex items-center gap-2 hover:scale-105 transition-all shadow-lg hover:shadow-[0_0_20px_rgba(193,157,101,0.3)]">
              <Plus size={18} /> Ø¥Ù†Ø´Ø§Ø¡ ÙØ¹Ø§Ù„ÙŠØ©
            </Link>
          </div>
        </div>

        {/* 1. Stats Panorama */}
        <div className="grid grid-cols-2 lg:grid-cols-4 gap-4">
          <div className="bg-[#0F0F12]/80 backdrop-blur-md border border-white/5 p-6 rounded-[2rem] hover:border-white/10 transition-colors group">
            <Calendar className="text-blue-500 mb-4 group-hover:scale-110 transition-transform" size={24} />
            <p className="text-white/40 text-xs font-bold uppercase tracking-wider">Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ§Øª Ø§Ù„Ù†Ø´Ø·Ø©</p>
            <h3 className="text-3xl font-black mt-1">{stats.activeEvents}</h3>
          </div>
          <div className="bg-[#0F0F12]/80 backdrop-blur-md border border-white/5 p-6 rounded-[2rem] hover:border-white/10 transition-colors group">
            <Users className="text-green-500 mb-4 group-hover:scale-110 transition-transform" size={24} />
            <p className="text-white/40 text-xs font-bold uppercase tracking-wider">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¶ÙŠÙˆÙ</p>
            <h3 className="text-3xl font-black mt-1">{stats.totalGuests}</h3>
          </div>
          <div className="bg-[#0F0F12]/80 backdrop-blur-md border border-white/5 p-6 rounded-[2rem] hover:border-white/10 transition-colors group">
            <CheckCircle2 className="text-purple-500 mb-4 group-hover:scale-110 transition-transform" size={24} />
            <p className="text-white/40 text-xs font-bold uppercase tracking-wider">Ù†Ø³Ø¨Ø© Ø§Ù„ØªØ£ÙƒÙŠØ¯</p>
            <h3 className="text-3xl font-black mt-1">
              {stats.totalGuests > 0 ? Math.round((stats.confirmedGuests / stats.totalGuests) * 100) : 0}%
            </h3>
          </div>
          <div className="bg-gradient-to-br from-[#0F0F12] to-[#1A1A1D] border border-white/5 p-6 rounded-[2rem] relative overflow-hidden group">
            <Crown className="text-[#C19D65] mb-4 group-hover:rotate-12 transition-transform" size={24} />
            <p className="text-white/40 text-xs font-bold uppercase tracking-wider">Ø­Ø§Ù„Ø© Ø§Ù„Ø¨Ø§Ù‚Ø©</p>
            <h3 className="text-lg font-black mt-1 text-white">Ù†Ø´Ø·Ø©</h3>
            <Link href="/dashboard/settings" className="text-[10px] text-[#C19D65] underline mt-1 block">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ</Link>
          </div>
        </div>

        <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">

          {/* 2. Left Column: All Events List */}
          <div className="lg:col-span-2 space-y-6">

            <h2 className="text-xl font-bold flex items-center gap-2"><Clock size={20} className="text-white/40" /> ÙƒÙ„ Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ§Øª (Ù„Ù„ØªØ¹Ø¯ÙŠÙ„ ÙˆØ§Ù„Ø¥Ø¯Ø§Ø±Ø©)</h2>

            {/* âœ… Ø§Ù„Ø­Ø§ÙˆÙŠØ© (Scrollable Container) */}
            <div className="space-y-4 max-h-[800px] overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-white/10 scrollbar-track-transparent">
              {allEvents.length > 0 ? (
                allEvents.map((event) => {
                  const daysLeft = getDaysLeft(event.date);
                  const isPast = daysLeft < 0;

                  return (
                    <div key={event.id} className={`bg-[#0F0F12] border ${isPast ? 'border-white/5 opacity-60' : 'border-white/10'} rounded-[2.5rem] p-6 relative overflow-hidden shadow-xl group hover:border-white/20 transition-all`}>
                      {/* Ø´Ø±ÙŠØ· Ù…Ù„ÙˆÙ† Ø¬Ø§Ù†Ø¨ÙŠ */}
                      <div className={`absolute right-0 top-0 h-full w-2 ${event.type === 'business' ? 'bg-blue-500' : 'bg-[#C19D65]'}`}></div>

                      <div className="flex flex-col md:flex-row justify-between items-start md:items-center gap-6 relative z-10 px-4">
                        <div>
                          <div className="flex gap-2 mb-3">
                            <span className={`text-[10px] font-bold px-3 py-1 rounded-full border ${event.type === 'business' ? 'bg-blue-500/10 text-blue-500 border-blue-500/20' : 'bg-[#C19D65]/10 text-[#C19D65] border-[#C19D65]/20'}`}>
                              {event.type === 'business' ? 'Ø£Ø¹Ù…Ø§Ù„' : 'Ù…Ù†Ø§Ø³Ø¨Ø© Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ©'}
                            </span>

                            {/* Ø­Ø§Ù„Ø© Ø§Ù„ØªØ§Ø±ÙŠØ® */}
                            {isPast ? (
                              <span className="text-[10px] font-bold px-3 py-1 rounded-full bg-red-500/10 border border-red-500/10 text-red-400">
                                Ù…Ù†ØªÙ‡ÙŠØ©
                              </span>
                            ) : (
                              <span className="text-[10px] font-bold px-3 py-1 rounded-full bg-white/5 border border-white/10 text-white/50">
                                {daysLeft} Ø£ÙŠØ§Ù… Ù…ØªØ¨Ù‚ÙŠØ©
                              </span>
                            )}
                          </div>
                          <h3 className="text-2xl font-black mb-2">{event.name}</h3>
                          <div className="flex items-center gap-4 text-white/50 text-sm">
                            <span className="flex items-center gap-1"><Calendar size={14} /> {new Date(event.date).toLocaleDateString('ar-SA')}</span>
                            <span className="flex items-center gap-1"><Users size={14} /> {event.guests_count || 0} Ø¶ÙŠÙ</span>
                          </div>
                        </div>

                        <div className="flex gap-3">
                          <Link href={`/dashboard/events/${event.id}`} className="px-6 py-3 rounded-xl bg-white/5 hover:bg-white/10 text-white font-bold transition-all flex items-center gap-2 border border-white/5">
                            Ø¥Ø¯Ø§Ø±Ø© ÙˆØªØ¹Ø¯ÙŠÙ„ <ArrowUpRight size={16} />
                          </Link>
                        </div>
                      </div>
                    </div>
                  );
                })
              ) : (
                <div className="bg-[#0F0F12] border border-dashed border-white/10 rounded-[2.5rem] p-8 text-center flex flex-col items-center justify-center h-[250px]">
                  <div className="w-16 h-16 bg-white/5 rounded-full flex items-center justify-center text-white/20 mb-4"><Calendar size={32} /></div>
                  <h3 className="font-bold text-lg mb-1">Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© ÙØ§Ø±ØºØ©</h3>
                  <p className="text-white/40 text-sm mb-6">Ù„Ù… ØªÙ‚Ù… Ø¨Ø¥Ù†Ø´Ø§Ø¡ Ø£ÙŠ ÙØ¹Ø§Ù„ÙŠØ© Ø¨Ø¹Ø¯.</p>
                  <Link href="/dashboard/events/new" className="text-[#C19D65] font-bold text-sm underline hover:text-white transition-colors">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¢Ù†</Link>
                </div>
              )}
            </div>

            {/* Notifications Center */}
            {notifications.length > 0 && (
              <div className="bg-[#0F0F12] border border-white/5 rounded-[2rem] p-6 mt-8">
                <h3 className="text-sm font-bold text-white/50 mb-4 flex items-center gap-2"><Bell size={14} /> Ø¢Ø®Ø± Ø§Ù„Ù†Ø´Ø§Ø·Ø§Øª</h3>
                <div className="space-y-4">
                  {notifications.map((notif, idx) => (
                    <div key={idx} className="flex items-start gap-3 pb-3 border-b border-white/5 last:border-0 last:pb-0">
                      <div className="w-8 h-8 rounded-full bg-green-500/10 flex items-center justify-center text-green-500 mt-1 shrink-0">
                        <Plus size={14} />
                      </div>
                      <div>
                        <p className="text-sm font-bold text-white">Ø§Ù†Ø¶Ù…Ø§Ù… Ø¶ÙŠÙ Ø¬Ø¯ÙŠØ¯</p>
                        <p className="text-xs text-white/40">ØªÙ… ØªØ³Ø¬ÙŠÙ„ <span className="text-white">{notif.name || 'Ø¶ÙŠÙ'}</span> ÙÙŠ ÙØ¹Ø§Ù„ÙŠØ© {notif.eventName}</p>
                      </div>
                      <span className="mr-auto text-[10px] text-white/20">{new Date(notif.created_at).toLocaleTimeString('ar-SA', { hour: '2-digit', minute: '2-digit' })}</span>
                    </div>
                  ))}
                </div>
              </div>
            )}
          </div>

          {/* 3. Right Column: Subscription & Quick Templates */}
          <div className="space-y-6">

            <SubscriptionTracker />

            <h2 className="text-xl font-bold flex items-center gap-2"><Zap size={20} className="text-white/40" /> Ù‚ÙˆØ§Ù„Ø¨ Ø³Ø±ÙŠØ¹Ø©</h2>
            <div className="space-y-3">
              <button onClick={() => window.location.href = '/dashboard/events/new'} className="w-full p-4 bg-[#0F0F12] border border-white/5 hover:border-[#C19D65]/50 hover:bg-[#C19D65]/5 rounded-2xl flex items-center gap-4 transition-all group text-right">
                <div className="w-12 h-12 rounded-xl bg-[#C19D65]/10 flex items-center justify-center text-[#C19D65] group-hover:scale-110 transition-transform"><Sparkles size={20} /></div>
                <div>
                  <h4 className="font-bold text-sm text-white group-hover:text-[#C19D65] transition-colors">Ø­ÙÙ„ Ø²ÙØ§Ù Ù…Ù„ÙƒÙŠ</h4>
                  <p className="text-[10px] text-white/40 mt-1">Ù‚Ø§Ù„Ø¨ Ø¬Ø§Ù‡Ø² Ø¨Ø¹Ø¨Ø§Ø±Ø§Øª ØªØ±Ø­ÙŠØ¨ÙŠØ© Ø±Ø³Ù…ÙŠØ© ÙˆØªØµØ§Ù…ÙŠÙ… Ø°Ù‡Ø¨ÙŠØ©</p>
                </div>
              </button>

              <button onClick={() => window.location.href = '/dashboard/events/new'} className="w-full p-4 bg-[#0F0F12] border border-white/5 hover:border-blue-500/50 hover:bg-blue-500/5 rounded-2xl flex items-center gap-4 transition-all group text-right">
                <div className="w-12 h-12 rounded-xl bg-blue-500/10 flex items-center justify-center text-blue-500 group-hover:scale-110 transition-transform"><Briefcase size={20} /></div>
                <div>
                  <h4 className="font-bold text-sm text-white group-hover:text-blue-500 transition-colors">Ù…Ø¤ØªÙ…Ø± ØªÙ‚Ù†ÙŠ</h4>
                  <p className="text-[10px] text-white/40 mt-1">ÙŠØ´Ù…Ù„ Ù†Ù…ÙˆØ°Ø¬ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¶ÙˆØ±ØŒ ÙˆØ·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª</p>
                </div>
              </button>
            </div>
          </div>
        </div>

      </div>
    </div>
  );
}
</file>

<file path="app/dashboard/settings/page.tsx">
'use client';

import { useState, useEffect } from 'react';
import { supabase } from '@/app/utils/supabase/client';
import { User, CreditCard, Shield, Bell, Download, Check, AlertCircle } from 'lucide-react';

export default function SettingsPage() {
  const [activeTab, setActiveTab] = useState('profile');
  const [profile, setProfile] = useState<any>({});
  const [loading, setLoading] = useState(true);

  // Ø¨ÙŠØ§Ù†Ø§Øª ÙˆÙ‡Ù…ÙŠØ© Ù„Ù„ÙÙˆØ§ØªÙŠØ± (Ù„Ù„Ø¹Ø±Ø¶ ÙÙ‚Ø·)
  const invoices = [
    { id: 'INV-001', date: '2025-01-01', amount: '0.00', status: 'paid', plan: 'Free Plan' },
    // ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© ÙÙˆØ§ØªÙŠØ± Ù…Ø¯ÙÙˆØ¹Ø© Ù‡Ù†Ø§ Ù…Ø³ØªÙ‚Ø¨Ù„Ø§Ù‹
  ];

  useEffect(() => {
    const fetchProfile = async () => {
      const { data: { user } } = await supabase.auth.getUser();
      if (user) {
        const { data } = await supabase.from('profiles').select('*').eq('id', user.id).single();
        setProfile(data || {});
      }
      setLoading(false);
    };
    fetchProfile();
  }, []);

  const handleUpdateProfile = async (e: React.FormEvent) => {
    e.preventDefault();
    alert('Ø³ÙŠØªÙ… ØªÙØ¹ÙŠÙ„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù‚Ø±ÙŠØ¨Ø§Ù‹..');
  };

  if (loading) return <div className="p-10 text-white">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>;

  return (
    <div className="min-h-screen bg-[#0A0A0C] text-white p-6 pt-24 font-sans" dir="rtl">
      <div className="max-w-4xl mx-auto">
        <h1 className="text-3xl font-black mb-8">Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ÙˆØ§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª</h1>

        {/* Tabs Navigation */}
        <div className="flex gap-4 border-b border-white/10 mb-8 overflow-x-auto">
          <button onClick={() => setActiveTab('profile')} className={`pb-4 px-4 flex items-center gap-2 font-bold transition-all ${activeTab === 'profile' ? 'text-[#C19D65] border-b-2 border-[#C19D65]' : 'text-white/40 hover:text-white'}`}>
            <User size={18} /> Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ
          </button>
          <button onClick={() => setActiveTab('billing')} className={`pb-4 px-4 flex items-center gap-2 font-bold transition-all ${activeTab === 'billing' ? 'text-[#C19D65] border-b-2 border-[#C19D65]' : 'text-white/40 hover:text-white'}`}>
            <CreditCard size={18} /> Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª ÙˆØ§Ù„ÙÙˆØ§ØªÙŠØ±
          </button>
          <button onClick={() => setActiveTab('security')} className={`pb-4 px-4 flex items-center gap-2 font-bold transition-all ${activeTab === 'security' ? 'text-[#C19D65] border-b-2 border-[#C19D65]' : 'text-white/40 hover:text-white'}`}>
            <Shield size={18} /> Ø§Ù„Ø£Ù…Ø§Ù†
          </button>
        </div>

        {/* --- Tab: Profile --- */}
        {activeTab === 'profile' && (
          <div className="space-y-6 animate-in fade-in slide-in-from-bottom-4">
             <div className="bg-[#0F0F12] border border-white/5 rounded-[2rem] p-8">
               <h3 className="text-xl font-bold mb-6">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø¨</h3>
               <form onSubmit={handleUpdateProfile} className="space-y-4 max-w-lg">
                  <div>
                    <label className="text-xs font-bold text-white/50 block mb-2">Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</label>
                    <input type="text" defaultValue={profile.full_name} className="w-full bg-white/5 border border-white/10 rounded-xl p-4 outline-none focus:border-[#C19D65]" />
                  </div>
                  <div>
                    <label className="text-xs font-bold text-white/50 block mb-2">Ø§Ø³Ù… Ø§Ù„Ø´Ø±ÙƒØ© / Ø§Ù„Ø¬Ù‡Ø© (Ù„Ù„ÙØ§ØªÙˆØ±Ø©)</label>
                    <input type="text" defaultValue={profile.company_name} placeholder="Ø§Ø®ØªÙŠØ§Ø±ÙŠ" className="w-full bg-white/5 border border-white/10 rounded-xl p-4 outline-none focus:border-[#C19D65]" />
                  </div>
                  <div>
                    <label className="text-xs font-bold text-white/50 block mb-2">Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø¶Ø±ÙŠØ¨ÙŠ (VAT Number)</label>
                    <input type="text" defaultValue={profile.tax_number} placeholder="3xxxxxxxxxxxxx" className="w-full bg-white/5 border border-white/10 rounded-xl p-4 outline-none focus:border-[#C19D65]" />
                  </div>
                  <button className="bg-[#C19D65] text-black px-8 py-3 rounded-xl font-bold mt-4 hover:opacity-90">Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª</button>
               </form>
             </div>
          </div>
        )}

        {/* --- Tab: Billing --- */}
        {activeTab === 'billing' && (
          <div className="space-y-6 animate-in fade-in slide-in-from-bottom-4">
            
            {/* Current Plan Card */}
            <div className="bg-gradient-to-r from-[#0F0F12] to-[#1A1A1D] border border-white/10 rounded-[2rem] p-8 relative overflow-hidden">
               <div className="absolute top-0 left-0 w-2 h-full bg-[#C19D65]"></div>
               <div className="flex justify-between items-start">
                  <div>
                    <p className="text-sm text-white/50 mb-1">Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©</p>
                    <h2 className="text-3xl font-black text-white mb-2">Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ© (Starter)</h2>
                    <p className="text-[#C19D65] text-sm font-bold flex items-center gap-2">
                       <Check size={14} /> ÙØ¹Ø§Ù„Ø© ÙˆÙ†Ø´Ø·Ø©
                    </p>
                  </div>
                  <button className="bg-[#C19D65] text-black px-6 py-2 rounded-xl font-bold text-sm shadow-lg hover:scale-105 transition-transform">
                    ØªØ±Ù‚ÙŠØ© Ø§Ù„Ø¨Ø§Ù‚Ø© ğŸš€
                  </button>
               </div>
               <div className="mt-8 grid grid-cols-3 gap-4 border-t border-white/5 pt-6">
                  <div>
                    <p className="text-[10px] text-white/40 uppercase">Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ§Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©</p>
                    <p className="text-xl font-bold">1 <span className="text-xs text-white/30">/ 1</span></p>
                  </div>
                  <div>
                    <p className="text-[10px] text-white/40 uppercase">Ø§Ù„Ø¶ÙŠÙˆÙ Ù„ÙƒÙ„ ÙØ¹Ø§Ù„ÙŠØ©</p>
                    <p className="text-xl font-bold">50</p>
                  </div>
                  <div>
                    <p className="text-[10px] text-white/40 uppercase">ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ¬Ø¯ÙŠØ¯</p>
                    <p className="text-xl font-bold">Ù…Ø¯Ù‰ Ø§Ù„Ø­ÙŠØ§Ø©</p>
                  </div>
               </div>
            </div>

            {/* Invoices Table */}
            <div className="bg-[#0F0F12] border border-white/5 rounded-[2rem] p-8">
               <h3 className="text-xl font-bold mb-6">Ø³Ø¬Ù„ Ø§Ù„ÙÙˆØ§ØªÙŠØ±</h3>
               <div className="overflow-x-auto">
                 <table className="w-full text-sm text-right">
                   <thead>
                     <tr className="text-white/40 border-b border-white/5">
                       <th className="pb-4 pr-4">Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø©</th>
                       <th className="pb-4">Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
                       <th className="pb-4">Ø§Ù„Ø¨Ø§Ù‚Ø©</th>
                       <th className="pb-4">Ø§Ù„Ù…Ø¨Ù„Øº</th>
                       <th className="pb-4">Ø§Ù„Ø­Ø§Ù„Ø©</th>
                       <th className="pb-4"></th>
                     </tr>
                   </thead>
                   <tbody>
                     {invoices.map((inv) => (
                       <tr key={inv.id} className="border-b border-white/5 last:border-0 hover:bg-white/[0.02]">
                         <td className="py-4 pr-4 font-mono text-white/70">{inv.id}</td>
                         <td className="py-4">{inv.date}</td>
                         <td className="py-4">{inv.plan}</td>
                         <td className="py-4 font-bold">{inv.amount} Ø±.Ø³</td>
                         <td className="py-4">
                           <span className="bg-green-500/10 text-green-500 px-2 py-1 rounded text-xs font-bold border border-green-500/20">Ù…Ø¯ÙÙˆØ¹Ø©</span>
                         </td>
                         <td className="py-4 text-left pl-4">
                           <button className="text-white/40 hover:text-[#C19D65] transition-colors"><Download size={16} /></button>
                         </td>
                       </tr>
                     ))}
                   </tbody>
                 </table>
               </div>
            </div>
          </div>
        )}

      </div>
    </div>
  );
}
</file>

<file path="app/hooks/useEvent.ts">
import { useEffect, useState } from 'react';
import { supabase } from '@/app/utils/supabase/client';
import { Event } from '@/types';

interface UseEventReturn {
  event: Event | null;
  loading: boolean;
  error: string | null;
}

export function useEvent(eventId: string): UseEventReturn {
  const [event, setEvent] = useState<Event | null>(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);

  useEffect(() => {
    if (!eventId) {
      setLoading(false);
      return;
    }

    fetchEvent();
  }, [eventId]);

  const fetchEvent = async () => {
    try {
      setLoading(true);
      setError(null);

      const { data, error: fetchError } = await supabase
        .from('events')
        .select('*')
        .eq('id', eventId)
        .single();

      if (fetchError) {
        throw new Error(fetchError.message || 'ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ©');
      }

      if (!data) {
        throw new Error('Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ©');
      }

      setEvent(data);
    } catch (err) {
      const message = err instanceof Error ? err.message : 'Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹';
      setError(message);
      console.error('Error fetching event:', err);
    } finally {
      setLoading(false);
    }
  };

  return { event, loading, error };
}
</file>

<file path="app/hooks/useEventWithCache.ts">
import useSWR from 'swr';
import { supabase } from '@/app/utils/supabase/client';
import { Event } from '@/types';

interface UseEventWithCacheReturn {
  event: Event | null;
  loading: boolean;
  error: string | null;
  mutate: () => void;
}

const eventFetcher = async (eventId: string): Promise<Event> => {
  const { data, error } = await supabase
    .from('events')
    .select('*')
    .eq('id', eventId)
    .single();

  if (error) {
    throw new Error(error.message || 'ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ©');
  }

  if (!data) {
    throw new Error('Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ©');
  }

  return data;
};

export function useEventWithCache(eventId: string): UseEventWithCacheReturn {
  const { data: event, error: swrError, mutate, isLoading } = useSWR(
    eventId ? `/api/events/${eventId}` : null,
    () => eventFetcher(eventId),
    {
      revalidateOnFocus: false,
      revalidateOnReconnect: true,
      dedupingInterval: 300000, // 5 minutes
      focusThrottleInterval: 600000, // 10 minutes
    }
  );

  const error = swrError?.message || null;
  const loading = isLoading;

  return { event: event || null, loading, error, mutate };
}
</file>

<file path="app/hooks/useTicket.ts">
import { useEffect, useState } from 'react';
import { supabase } from '@/app/utils/supabase/client'; // ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ù…Ø³Ø§Ø±
import { Attendee } from '@/types'; // ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ù…Ø³Ø§Ø±

interface UseTicketReturn {
  ticket: Attendee | null;
  loading: boolean;
  error: string | null;
  setTicket: (ticket: Attendee | null) => void;
  updateTicketStatus: (newStatus: 'confirmed' | 'declined', reason?: string) => Promise<void>;
}

export function useTicket(id: string): UseTicketReturn {
  const [ticket, setTicket] = useState<Attendee | null>(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);

  useEffect(() => {
    if (!id) return;
    fetchTicket();
  }, [id]);

  const fetchTicket = async () => {
    try {
      setLoading(true);
      setError(null);

      // 1. Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ù‡Ù†Ø§: Ø§Ø³Ù… Ø§Ù„Ø¬Ø¯ÙˆÙ„ tickets Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† attendees
      const { data, error: fetchError } = await supabase
        .from('tickets') 
        .select(`
          *,
          events:event_id (
            id,
            name,
            date,
            location_name,
            image_url,
            type,
            theme_color
          )
        `)
        // Ù…Ù„Ø§Ø­Ø¸Ø©: Ù‚Ù…Øª Ø¨Ø¥Ø²Ø§Ù„Ø© seats Ù…Ø¤Ù‚ØªØ§Ù‹ Ù„Ø£Ù†Ù†Ø§ Ù„Ù… Ù†Ù†Ø´Ø¦ Ø¬Ø¯ÙˆÙ„Ù‡Ø§ Ø¨Ø¹Ø¯ Ù„ØªØ¬Ù†Ø¨ Ø§Ù„Ø®Ø·Ø£
        .eq('id', id)
        .single();

      if (fetchError) {
        throw new Error(fetchError.message || 'ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªØ°ÙƒØ±Ø©');
      }

      if (!data) {
        throw new Error('Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„ØªØ°ÙƒØ±Ø©');
      }

      // ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„ØªØ·Ø§Ø¨Ù‚ Ø§Ù„Ù€ Type Ø¥Ø°Ø§ Ù„Ø²Ù… Ø§Ù„Ø£Ù…Ø±
      // (Supabase ÙŠØ±Ø¬Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ø³Ø¨ Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø©ØŒ ØªØ£ÙƒØ¯ Ø£Ù† events ØªØ£ØªÙŠ ÙƒÙ€ Object)
      setTicket(data as unknown as Attendee);
      
    } catch (err) {
      const message = err instanceof Error ? err.message : 'Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹';
      setError(message);
      console.error('Error fetching ticket:', err);
    } finally {
      setLoading(false);
    }
  };

  const updateTicketStatus = async (
    newStatus: 'confirmed' | 'declined',
    reason?: string
  ): Promise<void> => {
    if (!ticket) {
      setError('Ù„Ø§ ØªÙˆØ¬Ø¯ ØªØ°ÙƒØ±Ø© Ù…Ø­Ù…Ù„Ø©');
      return;
    }

    try {
      const updateData: Record<string, any> = { status: newStatus };
      if (newStatus === 'declined' && reason) {
        updateData.regret_reason = reason;
      }

      // 2. Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ù‡Ù†Ø§ Ø£ÙŠØ¶Ø§Ù‹: Ø§Ø³Ù… Ø§Ù„Ø¬Ø¯ÙˆÙ„ tickets
      const { error: updateError } = await supabase
        .from('tickets')
        .update(updateData)
        .eq('id', id);

      if (updateError) {
        throw new Error(updateError.message);
      }

      // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø© Ù…Ø­Ù„ÙŠØ§Ù‹
      setTicket({ ...ticket, status: newStatus as any });
    } catch (err) {
      const message = err instanceof Error ? err.message : 'ÙØ´Ù„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø©';
      setError(message);
      console.error('Error updating ticket status:', err);
      throw err;
    }
  };

  return {
    ticket,
    loading,
    error,
    setTicket,
    updateTicketStatus,
  };
}
</file>

<file path="app/hooks/useTicketWithCache.ts">
import useSWR from 'swr';
import { supabase } from '@/app/utils/supabase/client';
import { Attendee } from '@/types';

interface UseTicketWithCacheReturn {
  ticket: Attendee | null;
  loading: boolean;
  error: string | null;
  mutate: () => void;
  setTicket: (ticket: Attendee | null) => void;
  updateTicketStatus: (newStatus: 'confirmed' | 'declined', reason?: string) => Promise<void>;
}

const ticketFetcher = async (id: string): Promise<Attendee> => {
  const { data, error } = await supabase
    .from('attendees')
    .select(`
      *, 
      events(*), 
      seats (
        seat_number,
        table:tables (name, shape)
      )
    `)
    .eq('id', id)
    .single();

  if (error) {
    throw new Error(error.message || 'ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªØ°ÙƒØ±Ø©');
  }

  if (!data) {
    throw new Error('Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„ØªØ°ÙƒØ±Ø©');
  }

  return data;
};

export function useTicketWithCache(id: string): UseTicketWithCacheReturn {
  const { data: ticket, error: swrError, mutate, isLoading } = useSWR(
    id ? `/api/attendees/${id}` : null,
    () => ticketFetcher(id),
    {
      revalidateOnFocus: false,
      revalidateOnReconnect: true,
      dedupingInterval: 60000, // 1 minute
      focusThrottleInterval: 300000, // 5 minutes
    }
  );

  const error = swrError?.message || null;
  const loading = isLoading;

  const setTicket = (newTicket: Attendee | null) => {
    if (newTicket) {
      mutate(newTicket, false);
    }
  };

  const updateTicketStatus = async (
    newStatus: 'confirmed' | 'declined',
    reason?: string
  ): Promise<void> => {
    if (!ticket) {
      throw new Error('Ù„Ø§ ØªÙˆØ¬Ø¯ ØªØ°ÙƒØ±Ø© Ù…Ø­Ù…Ù„Ø©');
    }

    try {
      const updateData: Record<string, any> = { status: newStatus };
      if (newStatus === 'declined' && reason) {
        updateData.regret_reason = reason;
      }

      const { error: updateError } = await supabase
        .from('attendees')
        .update(updateData)
        .eq('id', id);

      if (updateError) {
        throw new Error(updateError.message);
      }

      // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ© Ø¨Ø¯ÙˆÙ† Ø¬Ù„Ø¨ Ù…Ù† Ø§Ù„Ø®Ø§Ø¯Ù…
      setTicket({ ...ticket, status: newStatus as any });
    } catch (err) {
      const message = err instanceof Error ? err.message : 'ÙØ´Ù„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø©';
      throw new Error(message);
    }
  };

  return {
    ticket: ticket || null,
    loading,
    error,
    mutate,
    setTicket,
    updateTicketStatus,
  };
}
</file>

<file path="app/live/[id]/page.tsx">
'use client';

import { useState, useEffect, use } from 'react';
import { supabase } from '@/app/utils/supabase/client';
import {
   Users, CheckCircle2, QrCode, Clock, Loader2,
   Activity, MapPin, Calendar
} from 'lucide-react';

interface PageProps {
   params: Promise<{ id: string }>;
}

export default function LivePage({ params }: PageProps) {
   const { id } = use(params);

   const [loading, setLoading] = useState(true);
   const [event, setEvent] = useState<any>(null);
   const [stats, setStats] = useState({
      total: 0,
      confirmed: 0,
      attended: 0,
      percentage: 0
   });
   const [recentArrivals, setRecentArrivals] = useState<any[]>([]);
   const [themeColor, setThemeColor] = useState('#C19D65');

   // Helper to calculate stats
   const updateStats = async () => {
      const { data: attendees } = await supabase.from('attendees').select('status, attended').eq('event_id', id);
      if (attendees) {
         const total = attendees.length;
         const confirmed = attendees.filter(a => a.status === 'confirmed').length;
         const attended = attendees.filter(a => a.attended).length;
         const percentage = total > 0 ? Math.round((attended / total) * 100) : 0;

         setStats({ total, confirmed, attended, percentage });
      }
   };

   // --- Fetch Initial Data ---
   useEffect(() => {
      const fetchData = async () => {
         // 1. Event Details
         const { data: eventData } = await supabase.from('events').select('*').eq('id', id).single();
         if (eventData) {
            setEvent(eventData);
            setThemeColor(eventData.type === 'business' ? '#3B82F6' : '#C19D65');
         }

         // 2. Initial Stats
         await updateStats();
         setLoading(false);
      };

      fetchData();

      // 3. Realtime Subscription (The Magic âœ¨)
      const channel = supabase
         .channel('live-stats')
         .on(
            'postgres_changes',
            { event: '*', schema: 'public', table: 'attendees', filter: `event_id=eq.${id}` },
            async (payload) => {
               // Ø¹Ù†Ø¯ Ø­Ø¯ÙˆØ« Ø£ÙŠ ØªØºÙŠÙŠØ± (Ø¯Ø®ÙˆÙ„ Ø¶ÙŠÙØŒ ØªØ³Ø¬ÙŠÙ„ Ø¬Ø¯ÙŠØ¯)ØŒ Ù†Ø­Ø¯Ø« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
               await updateStats();

               // Ø¥Ø°Ø§ ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø­Ø¶ÙˆØ± Ø´Ø®Øµ (Update attended = true)ØŒ Ù†Ø¶ÙŠÙÙ‡ Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙˆØµÙˆÙ„ Ø§Ù„Ø­Ø¯ÙŠØ«
               if (payload.eventType === 'UPDATE' && payload.new.attended && !payload.old.attended) {
                  setRecentArrivals(prev => [payload.new, ...prev].slice(0, 5)); // Keep last 5
               }
            }
         )
         .subscribe();

      return () => { supabase.removeChannel(channel); };
   }, [id]); // updateStats depends on id which is already in dependency array



   if (loading) return (
      <div className="min-h-screen bg-black flex flex-col items-center justify-center text-white">
         <Loader2 className="animate-spin mb-4" size={40} style={{ color: themeColor }} />
         <p className="text-sm opacity-50 tracking-widest uppercase">Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¨Ø« Ø§Ù„Ù…Ø¨Ø§Ø´Ø±...</p>
      </div>
   );

   if (!event) return <div className="min-h-screen bg-black text-white flex items-center justify-center">Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ© ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø©</div>;

   return (
      <div className="min-h-screen bg-black text-white font-sans overflow-hidden relative selection:bg-white/20" dir="rtl">

         {/* Background Ambience */}
         <div className="absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-20 pointer-events-none"></div>
         <div className="absolute top-0 left-0 w-full h-1/2 bg-gradient-to-b from-[var(--theme-color)] to-transparent opacity-10 pointer-events-none" style={{ '--theme-color': themeColor } as any}></div>

         {/* --- Header --- */}
         <div className="relative z-10 p-8 flex justify-between items-start border-b border-white/10 bg-black/50 backdrop-blur-md">
            <div>
               <div className="flex items-center gap-3 mb-2">
                  <div className="w-3 h-3 rounded-full bg-red-500 animate-pulse shadow-[0_0_10px_red]"></div>
                  <span className="text-xs font-bold tracking-widest uppercase opacity-70">Live Dashboard</span>
               </div>
               <h1 className="text-4xl font-black tracking-tight">{event.name}</h1>
            </div>

            <div className="text-left opacity-60 text-sm hidden md:block">
               <div className="flex items-center gap-2 justify-end mb-1">
                  <Calendar size={14} />
                  <span>{new Date(event.date).toLocaleDateString('ar-SA', { weekday: 'long', day: 'numeric', month: 'long' })}</span>
               </div>
               <div className="flex items-center gap-2 justify-end">
                  <MapPin size={14} />
                  <span>{event.location_name || 'Ù…ÙˆÙ‚Ø¹ Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ©'}</span>
               </div>
            </div>
         </div>

         {/* --- Main Stats Grid --- */}
         <div className="relative z-10 p-8 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">

            {/* Card 1: Attended (Hero) */}
            <div className="lg:col-span-2 bg-[#121212] border border-white/10 rounded-[2.5rem] p-8 relative overflow-hidden group">
               <div className="absolute right-0 top-0 w-64 h-64 rounded-full blur-[100px] opacity-20 transition-opacity group-hover:opacity-30" style={{ backgroundColor: themeColor }}></div>

               <div className="relative z-10">
                  <div className="flex items-center gap-3 mb-4 opacity-70">
                     <QrCode size={20} />
                     <span className="text-sm font-bold uppercase tracking-wider">Ø§Ù„Ø­Ø¶ÙˆØ± Ø§Ù„ÙØ¹Ù„ÙŠ</span>
                  </div>
                  <div className="flex items-end gap-4">
                     <span className="text-8xl font-black tracking-tighter leading-none" style={{ color: themeColor }}>
                        {stats.attended}
                     </span>
                     <span className="text-xl font-bold mb-4 opacity-50">/ {stats.total} Ø¶ÙŠÙ</span>
                  </div>

                  {/* Progress Bar */}
                  <div className="w-full h-3 bg-white/10 rounded-full mt-8 overflow-hidden">
                     <div
                        className="h-full rounded-full transition-all duration-1000 ease-out shadow-[0_0_20px_rgba(255,255,255,0.3)]"
                        style={{ width: `${stats.percentage}%`, backgroundColor: themeColor }}
                     ></div>
                  </div>
                  <p className="text-right text-xs mt-2 opacity-40">Ù†Ø³Ø¨Ø© Ø§Ù„Ø­Ø¶ÙˆØ± {stats.percentage}%</p>
               </div>
            </div>

            {/* Card 2: Total Registered */}
            <div className="bg-[#121212] border border-white/10 rounded-[2.5rem] p-8 flex flex-col justify-between hover:border-white/20 transition-colors">
               <div className="flex items-center justify-between opacity-70 mb-4">
                  <Users size={24} />
                  <span className="text-xs font-bold uppercase tracking-wider">Ø§Ù„Ù…Ø³Ø¬Ù„ÙŠÙ†</span>
               </div>
               <span className="text-5xl font-black text-white">{stats.total}</span>
               <p className="text-xs text-white/40 mt-2">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</p>
            </div>

            {/* Card 3: Pending */}
            <div className="bg-[#121212] border border-white/10 rounded-[2.5rem] p-8 flex flex-col justify-between hover:border-white/20 transition-colors">
               <div className="flex items-center justify-between opacity-70 mb-4">
                  <Clock size={24} />
                  <span className="text-xs font-bold uppercase tracking-wider">Ø§Ù„Ù…ØªÙˆÙ‚Ø¹ ÙˆØµÙˆÙ„Ù‡Ù…</span>
               </div>
               <span className="text-5xl font-black text-white">{Math.max(0, stats.total - stats.attended)}</span>
               <p className="text-xs text-white/40 mt-2">Ù„Ù… ÙŠØªÙ… ØªØ­Ø¶ÙŠØ±Ù‡Ù… Ø¨Ø¹Ø¯</p>
            </div>
         </div>

         {/* --- Live Feed (Recent Arrivals) --- */}
         <div className="relative z-10 px-8 pb-8">
            <h3 className="text-sm font-bold opacity-50 uppercase tracking-widest mb-4 flex items-center gap-2">
               <Activity size={16} /> Ø¢Ø®Ø± Ø§Ù„ÙˆØ§ØµÙ„ÙŠÙ†
            </h3>

            <div className="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4">
               {recentArrivals.length > 0 ? recentArrivals.map((guest, idx) => (
                  <div key={guest.id} className="bg-white/5 border border-white/5 rounded-2xl p-4 flex items-center gap-3 animate-in slide-in-from-right fade-in duration-500 fill-mode-backwards" style={{ animationDelay: `${idx * 100}ms` }}>
                     <div className="w-10 h-10 rounded-full bg-green-500/20 flex items-center justify-center text-green-500 border border-green-500/20">
                        <CheckCircle2 size={16} />
                     </div>
                     <div className="overflow-hidden">
                        <p className="font-bold text-sm truncate">{guest.name}</p>
                        <p className="text-[10px] opacity-40">ÙˆØµÙ„ Ù„Ù„ØªÙˆ</p>
                     </div>
                  </div>
               )) : (
                  <div className="col-span-full py-8 text-center border border-dashed border-white/10 rounded-2xl text-white/20 text-sm">
                     Ø¨Ø§Ù†ØªØ¸Ø§Ø± ÙˆØµÙˆÙ„ Ø£ÙˆÙ„ Ø¶ÙŠÙ...
                  </div>
               )}
            </div>
         </div>

      </div>
   );
}
</file>

<file path="app/utils/schemas.test.ts">
/**
 * Zod Schemas Tests
 * Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª schemas Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
 */

import {
  phoneSchema,
  emailSchema,
  nameSchema,
  registrationSchema,
  memorySchema,
  validateData,
} from './schemas';

describe('Zod Schemas', () => {
  describe('phoneSchema', () => {
    it('should validate correct phone numbers', () => {
      expect(phoneSchema.safeParse('0501234567').success).toBe(true);
      expect(phoneSchema.safeParse('12345678').success).toBe(true);
    });

    it('should reject phone numbers with less than 8 digits', () => {
      expect(phoneSchema.safeParse('1234567').success).toBe(false);
    });

    it('should reject phone numbers with non-digit characters', () => {
      expect(phoneSchema.safeParse('050-123-4567').success).toBe(false);
      expect(phoneSchema.safeParse('050 123 4567').success).toBe(false);
    });

    it('should reject empty phone numbers', () => {
      expect(phoneSchema.safeParse('').success).toBe(false);
    });
  });

  describe('emailSchema', () => {
    it('should validate correct email formats', () => {
      expect(emailSchema.safeParse('user@example.com').success).toBe(true);
      expect(emailSchema.safeParse('test.user@domain.co.uk').success).toBe(true);
    });

    it('should reject invalid email formats', () => {
      expect(emailSchema.safeParse('invalid').success).toBe(false);
      expect(emailSchema.safeParse('user@').success).toBe(false);
      expect(emailSchema.safeParse('user @example.com').success).toBe(false);
    });

    it('should reject empty email', () => {
      expect(emailSchema.safeParse('').success).toBe(false);
    });
  });

  describe('nameSchema', () => {
    it('should validate names with at least 3 characters', () => {
      expect(nameSchema.safeParse('Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯').success).toBe(true);
      expect(nameSchema.safeParse('Ali').success).toBe(true);
    });

    it('should reject names with less than 3 characters', () => {
      expect(nameSchema.safeParse('Ali').success).toBe(true); // 3 is valid
      expect(nameSchema.safeParse('Al').success).toBe(false);
    });

    it('should reject names exceeding 100 characters', () => {
      const longName = 'a'.repeat(101);
      expect(nameSchema.safeParse(longName).success).toBe(false);
    });
  });

  describe('registrationSchema', () => {
    it('should validate complete registration form', () => {
      const validData = {
        name: 'Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯',
        email: 'ahmed@example.com',
        phone: '0501234567',
        eventId: '550e8400-e29b-41d4-a716-446655440000',
      };
      expect(registrationSchema.safeParse(validData).success).toBe(true);
    });

    it('should reject form with invalid email', () => {
      const invalidData = {
        name: 'Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯',
        email: 'invalid-email',
        phone: '0501234567',
        eventId: '550e8400-e29b-41d4-a716-446655440000',
      };
      expect(registrationSchema.safeParse(invalidData).success).toBe(false);
    });

    it('should reject form with invalid phone', () => {
      const invalidData = {
        name: 'Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯',
        email: 'ahmed@example.com',
        phone: '123',
        eventId: '550e8400-e29b-41d4-a716-446655440000',
      };
      expect(registrationSchema.safeParse(invalidData).success).toBe(false);
    });
  });

  describe('memorySchema', () => {
    it('should validate memory with valid data', () => {
      const validData = {
        message: 'Ø°ÙƒØ±Ù‰ Ø¬Ù…ÙŠÙ„Ø© Ù…Ù† Ø§Ù„Ø­ÙÙ„',
        eventId: '550e8400-e29b-41d4-a716-446655440000',
        attendeeId: '550e8400-e29b-41d4-a716-446655440001',
      };
      expect(memorySchema.safeParse(validData).success).toBe(true);
    });

    it('should reject memory exceeding 500 characters', () => {
      const invalidData = {
        message: 'a'.repeat(501),
        eventId: '550e8400-e29b-41d4-a716-446655440000',
        attendeeId: '550e8400-e29b-41d4-a716-446655440001',
      };
      expect(memorySchema.safeParse(invalidData).success).toBe(false);
    });

    it('should reject empty memory', () => {
      const invalidData = {
        message: '',
        eventId: '550e8400-e29b-41d4-a716-446655440000',
        attendeeId: '550e8400-e29b-41d4-a716-446655440001',
      };
      expect(memorySchema.safeParse(invalidData).success).toBe(false);
    });
  });

  describe('validateData helper', () => {
    it('should return success with valid data', () => {
      const result = validateData(emailSchema, 'test@example.com');
      expect(result.success).toBe(true);
      expect(result.data).toBe('test@example.com');
    });

    it('should return error with invalid data', () => {
      const result = validateData(emailSchema, 'invalid-email');
      expect(result.success).toBe(false);
      expect(result.error).toBeDefined();
    });
  });
});

export {};
</file>

<file path="app/utils/supabase/client.ts">
import { createBrowserClient } from '@supabase/ssr'

export const supabase = createBrowserClient(
  process.env.NEXT_PUBLIC_SUPABASE_URL!,
  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!
)
</file>

<file path="app/utils/supabase/server.ts">
import { createServerClient } from '@supabase/ssr'
import { cookies } from 'next/headers'

export async function createClient() {
  const cookieStore = await cookies()

  return createServerClient(
    process.env.NEXT_PUBLIC_SUPABASE_URL!,
    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,
    {
      cookies: {
        getAll() {
          return cookieStore.getAll()
        },
        setAll(cookiesToSet) {
          try {
            cookiesToSet.forEach(({ name, value, options }) =>
              cookieStore.set(name, value, options)
            )
          } catch {
            // ÙŠØªÙ… ØªØ¬Ø§Ù‡Ù„ Ø§Ù„Ø®Ø·Ø£ Ø¥Ø°Ø§ ØªÙ… Ø§Ù„Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ù…Ù† Server Component
          }
        },
      },
    }
  )
}
</file>

<file path="app/utils/validation.test.ts">
import { validateEmail, validatePhone, validateRequired, cleanPhoneNumber, formatPhoneNumber } from './validation';

describe('Validation Functions', () => {
  
  // ... (Email Tests - ÙƒÙ…Ø§ Ù‡ÙŠ)
  describe('validateEmail', () => {
    it('should validate correct email format', () => {
      expect(validateEmail('test@example.com')).toBe(true);
      expect(validateEmail('user.name@domain.co.uk')).toBe(true);
    });

    it('should reject invalid email format', () => {
      expect(validateEmail('invalid-email')).toBe(false);
      expect(validateEmail('@domain.com')).toBe(false);
      expect(validateEmail('user@')).toBe(false);
    });
  });

  // ... (Phone Tests - ÙƒÙ…Ø§ Ù‡ÙŠ ØµØ­ÙŠØ­Ø© Ø§Ù„Ø¢Ù†)
  describe('validatePhone', () => {
    it('should validate phone with correct digit count', () => {
      expect(validatePhone('0501234567', 10)).toBe(true);
      expect(validatePhone('966501234567', 12)).toBe(true);
    });

    it('should reject phone with wrong digit count', () => {
      expect(validatePhone('050123456', 10)).toBe(false);
      expect(validatePhone('05012345678', 10)).toBe(false);
    });

    it('should reject phone with non-digit characters', () => {
      expect(validatePhone('050-123456', 10)).toBe(false);
      expect(validatePhone('abc1234567', 10)).toBe(false);
    });
  });

  // ğŸ”´ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ù‡Ù†Ø§ (Required Field Tests)
  describe('validateRequired', () => {
    it('should accept non-empty values', () => {
      // Ù†ØªÙˆÙ‚Ø¹ null Ù„Ø£Ù† Ø§Ù„Ø¯Ø§Ù„Ø© ØªØ¹ÙŠØ¯ null Ø¹Ù†Ø¯ Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Ø£Ø®Ø·Ø§Ø¡
      expect(validateRequired('some value', 'Field')).toBeNull();
      expect(validateRequired(123, 'Field')).toBeNull();
    });

    it('should reject empty values', () => {
      // Ù†ØªÙˆÙ‚Ø¹ Ø£Ù† Ù„Ø§ ØªÙƒÙˆÙ† null (Ø£ÙŠ ØªØ¹ÙŠØ¯ Ø±Ø³Ø§Ù„Ø© Ø®Ø·Ø£ Ù†ØµÙŠØ©)
      expect(validateRequired('', 'Field')).not.toBeNull();
      expect(validateRequired('   ', 'Field')).not.toBeNull(); 
      expect(validateRequired(null, 'Field')).not.toBeNull();
      expect(validateRequired(undefined, 'Field')).not.toBeNull();
      
      // ÙŠÙ…ÙƒÙ†Ùƒ Ø£ÙŠØ¶Ø§Ù‹ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù†Øµ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¥Ø°Ø§ Ø£Ø±Ø¯Øª Ø¯Ù‚Ø© Ø£ÙƒØ«Ø±:
      // expect(validateRequired('', 'Ø§Ù„Ø§Ø³Ù…')).toContain('Ù…Ø·Ù„ÙˆØ¨');
    });
  });

  // ... (Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª ÙƒÙ…Ø§ Ù‡ÙŠ)
  describe('cleanPhoneNumber', () => {
    it('should remove all non-digit characters', () => {
      expect(cleanPhoneNumber('+966-50-123-4567')).toBe('966501234567');
      expect(cleanPhoneNumber('(050) 123 4567')).toBe('0501234567');
    });

    it('should handle already clean numbers', () => {
      expect(cleanPhoneNumber('0501234567')).toBe('0501234567');
    });
  });

  describe('formatPhoneNumber', () => {
    it('should add country code to number starting with 0', () => {
      expect(formatPhoneNumber('0501234567', '966')).toBe('966501234567');
    });

    it('should not duplicate country code', () => {
      expect(formatPhoneNumber('966501234567', '966')).toBe('966501234567');
    });
    
    it('should handle numbers without leading zero', () => {
       expect(formatPhoneNumber('501234567', '966')).toBe('966501234567');
    });
  });
});
</file>

<file path="app/utils/validation.ts">
/**
 * Ù…Ø¬Ù…ÙˆØ¹Ø© Ù…Ù† Ø¯ÙˆØ§Ù„ Ø§Ù„ØªØ­Ù‚Ù‚ (Validation) Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø© ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
 */

/**
 * Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµÙŠØºØ© Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ
 */
export const validateEmail = (email: string): boolean => {
  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  return emailRegex.test(email);
};

/**
 * Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ù† Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù„ÙŠØ³ ÙØ§Ø±ØºØ§Ù‹
 */
export const validateEmailNotEmpty = (email: string): string | null => {
  if (!email.trim()) {
    return 'Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù…Ø·Ù„ÙˆØ¨';
  }
  if (!validateEmail(email)) {
    return 'ØµÙŠØºØ© Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØºÙŠØ± ØµØ­ÙŠØ­Ø©';
  }
  return null;
};

/**
 * Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©
 */
export const validatePhone = (
  phone: string,
  expectedDigits: number
): boolean => {
  const cleanPhone = phone.replace(/[^0-9]/g, '');
  return cleanPhone.length === expectedDigits;
};

/**
 * Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù‡Ø§ØªÙ Ù…Ø¹ Ø±Ø³Ø§Ù„Ø© Ø®Ø·Ø£
 */
export const validatePhoneNotEmpty = (
  phone: string,
  expectedDigits: number,
  countryName?: string
): string | null => {
  if (!phone.trim()) {
    return 'Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ù…Ø·Ù„ÙˆØ¨';
  }
  if (!validatePhone(phone, expectedDigits)) {
    return `Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ ${expectedDigits} Ø£Ø±Ù‚Ø§Ù…`;
  }
  return null;
};

/**
 * Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ù† Ø§Ù„Ø­Ù‚Ù„ Ù„ÙŠØ³ ÙØ§Ø±ØºØ§Ù‹ (Ù…Ø­Ø¯Ø«Ø© Ù„ØªÙ‚Ø¨Ù„ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… ÙˆØ§Ù„Ù‚ÙŠÙ… Ø§Ù„ÙØ§Ø±ØºØ© Ø¨Ø£Ù…Ø§Ù†) âœ…
 */
export const validateRequired = (value: any, fieldName: string): string | null => {
  // 1. Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ù‚ÙŠÙ…Ø© null Ø£Ùˆ undefined -> Ø®Ø·Ø£
  if (value === null || value === undefined) {
    return `${fieldName} Ù…Ø·Ù„ÙˆØ¨`;
  }

  // 2. Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ù‚ÙŠÙ…Ø© Ù†ØµØ§Ù‹ (String) -> Ù†ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…Ø³Ø§ÙØ§Øª
  if (typeof value === 'string') {
    if (!value.trim()) {
      return `${fieldName} Ù…Ø·Ù„ÙˆØ¨`;
    }
  }

  // 3. Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ù‚ÙŠÙ…Ø© Ø±Ù‚Ù…Ø§Ù‹ Ø£Ùˆ Ø£ÙŠ Ø´ÙŠØ¡ Ø¢Ø®Ø± Ù…ÙˆØ¬ÙˆØ¯ -> Ù…Ù‚Ø¨ÙˆÙ„
  return null;
};

/**
 * Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ù† Ø§Ù„ÙƒÙ„Ù…Ø© ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø£Ù‚Ù„ Ù…Ù† Ø¹Ø¯Ø¯ Ù…Ø¹ÙŠÙ† Ù…Ù† Ø§Ù„Ø£Ø­Ø±Ù
 */
export const validateMinLength = (
  value: string,
  minLength: number,
  fieldName: string
): string | null => {
  if (value.length < minLength) {
    return `${fieldName} ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ ${minLength} Ø£Ø­Ø±Ù`;
  }
  return null;
};

/**
 * Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ù† Ø§Ù„ÙƒÙ„Ù…Ø© ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø£ÙƒØ«Ø± Ù…Ù† Ø¹Ø¯Ø¯ Ù…Ø¹ÙŠÙ† Ù…Ù† Ø§Ù„Ø£Ø­Ø±Ù
 */
export const validateMaxLength = (
  value: string,
  maxLength: number,
  fieldName: string
): string | null => {
  if (value.length > maxLength) {
    return `${fieldName} ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø£Ù‚Ù„ Ù…Ù† ${maxLength} Ø£Ø­Ø±Ù`;
  }
  return null;
};

/**
 * Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ù† Ø§Ù„Ù‚ÙŠÙ…Ø© Ø¹Ø¨Ø§Ø±Ø© Ø¹Ù† Ø±Ù‚Ù… ØµØ­ÙŠØ­ Ù…ÙˆØ¬Ø¨
 */
export const validatePositiveNumber = (
  value: any,
  fieldName: string
): string | null => {
  const num = Number(value);
  if (isNaN(num) || num <= 0) {
    return `${fieldName} ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø±Ù‚Ù…Ø§Ù‹ Ù…ÙˆØ¬Ø¨Ø§Ù‹`;
  }
  return null;
};

/**
 * ØªÙ†Ø¸ÙŠÙ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ø¨Ø¥Ø²Ø§Ù„Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø­Ø±Ù ØºÙŠØ± Ø§Ù„Ø±Ù‚Ù…ÙŠØ©
 */
export const cleanPhoneNumber = (phone: string): string => {
  return phone.replace(/[^0-9]/g, '');
};

/**
 * ØªÙ†Ø³ÙŠÙ‚ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø±Ù…Ø² Ø§Ù„Ø¯ÙˆÙ„Ø©
 */
export const formatPhoneNumber = (
  phone: string,
  countryCode: string
): string => {
  let cleanPhone = cleanPhoneNumber(phone);

  // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø±Ù‚Ù… ÙŠØ¨Ø¯Ø£ Ø¨Ù€ 0ØŒ Ø§Ø³ØªØ¨Ø¯Ù„Ù‡Ø§ Ø¨Ø±Ù…Ø² Ø§Ù„Ø¯ÙˆÙ„Ø©
  if (cleanPhone.startsWith('0')) {
    cleanPhone = countryCode + cleanPhone.substring(1);
  }
  // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø±Ù‚Ù… ÙŠØ¨Ø¯Ø£ Ø¨Ø±Ù‚Ù… Ø¹Ø§Ø¯ÙŠØŒ Ø£Ø¶Ù Ø±Ù…Ø² Ø§Ù„Ø¯ÙˆÙ„Ø©
  else if (!cleanPhone.startsWith(countryCode)) {
    cleanPhone = countryCode + cleanPhone;
  }

  return cleanPhone;
};

/**
 * Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© ØªØ§Ø±ÙŠØ® Ù…Ø¹ÙŠÙ†
 */
export const validateDate = (dateString: string): string | null => {
  try {
    const date = new Date(dateString);
    if (isNaN(date.getTime())) {
      return 'Ø§Ù„ØªØ§Ø±ÙŠØ® ØºÙŠØ± ØµØ­ÙŠØ­';
    }
    return null;
  } catch {
    return 'Ø§Ù„ØªØ§Ø±ÙŠØ® ØºÙŠØ± ØµØ­ÙŠØ­';
  }
};

/**
 * Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ù† Ø§Ù„ØªØ§Ø±ÙŠØ® ÙÙŠ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„
 */
export const validateFutureDate = (dateString: string): string | null => {
  const dateError = validateDate(dateString);
  if (dateError) return dateError;

  const date = new Date(dateString);
  const now = new Date();

  if (date <= now) {
    return 'ÙŠØ¬Ø¨ Ø§Ø®ØªÙŠØ§Ø± ØªØ§Ø±ÙŠØ® ÙÙŠ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„';
  }

  return null;
};

/**
 * Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ù† Ø¬Ù…ÙŠØ¹ Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ ØµØ­ÙŠØ­Ø©
 */
export const validateForm = (
  validations: Record<string, string | null>
): boolean => {
  return Object.values(validations).every((error) => error === null);
};

/**
 * Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
 */
export const getFormErrors = (
  validations: Record<string, string | null>
): Record<string, string> => {
  return Object.fromEntries(
    Object.entries(validations).filter(([, error]) => error !== null)
  ) as Record<string, string>;
};
</file>

<file path="app/utils/whatsappHelper.ts">
// app/utils/whatsappHelper.ts
export const generateWhatsAppLink = (
  phone: string, 
  guestName: string, 
  eventName: string, 
  ticketId: string
) => {
  let cleanPhone = phone.replace(/[^0-9]/g, '');
  if (cleanPhone.startsWith('05')) cleanPhone = '966' + cleanPhone.substring(1);
  else if (cleanPhone.startsWith('5')) cleanPhone = '966' + cleanPhone;

  // Ø±Ø§Ø¨Ø· Ø§Ù„ØªØ°ÙƒØ±Ø© (ØªØ£ÙƒØ¯ Ø£Ù† Ø¯ÙˆÙ…ÙŠÙ† Ù…ÙˆÙ‚Ø¹Ùƒ ØµØ­ÙŠØ­ ÙÙŠ Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø©)
  const domain = typeof window !== 'undefined' ? window.location.origin : ''; 
  const ticketUrl = `${domain}/t/${ticketId}`;

  const message = `Ù…Ø±Ø­Ø¨Ø§Ù‹ ${guestName} ğŸ‘‹ØŒ\n\nÙŠØ³Ø¹Ø¯Ù†Ø§ Ø¯Ø¹ÙˆØªÙƒ Ù„Ø­Ø¶ÙˆØ± Ø­ÙÙ„ *${eventName}* âœ¨\n\nØªØ°ÙƒØ±ØªÙƒ Ø¬Ø§Ù‡Ø²Ø©ØŒ Ù†Ø±Ø¬Ùˆ Ø¥Ø¨Ø±Ø§Ø²Ù‡Ø§ Ø¹Ù†Ø¯ Ø§Ù„Ø¯Ø®ÙˆÙ„ ğŸŸï¸:\n${ticketUrl}\n\nÙ†Ù†ØªØ¸Ø±ÙƒÙ… Ø¨Ø´ÙˆÙ‚! ğŸ“`;

  return `https://wa.me/${cleanPhone}?text=${encodeURIComponent(message)}`;
};
</file>

<file path="app/wall/[id]/page.tsx">
'use client';
import { useEffect, useState, use } from 'react';
import { supabase } from '@/app/utils/supabase/client';
import { Heart } from 'lucide-react';

export default function MemoryWall({ params }: { params: Promise<{ id: string }> }) {
  const { id } = use(params);
  const [memories, setMemories] = useState<any[]>([]);

  useEffect(() => {
    fetchMemories();
    
    // Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ ÙÙŠ Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„Ù„Ø­Ø¸ÙŠØ© (Realtime)
    const channel = supabase.channel('realtime-memories')
      .on('postgres_changes', { event: 'INSERT', schema: 'public', table: 'memories', filter: `event_id=eq.${id}` }, 
      (payload) => {
        // Ø¹Ù†Ø¯ ÙˆØµÙˆÙ„ Ø±Ø³Ø§Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø©ØŒ Ù†Ø¶ÙŠÙÙ‡Ø§ ÙˆÙ†Ø´ØºÙ„ ØµÙˆØª ØªÙ†Ø¨ÙŠÙ‡ Ø®ÙÙŠÙ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
        fetchNewMemory(payload.new.id); 
      })
      .subscribe();

    return () => { supabase.removeChannel(channel) };
  }, [id]);

  const fetchMemories = async () => {
    const { data } = await supabase
      .from('memories')
      .select('*, attendee:attendees(name, category)')
      .eq('event_id', id)
      .order('created_at', { ascending: false });
    if (data) setMemories(data);
  };

  const fetchNewMemory = async (memoryId: string) => {
    const { data } = await supabase.from('memories').select('*, attendee:attendees(name, category)').eq('id', memoryId).single();
    if (data) setMemories(prev => [data, ...prev]);
  };

  return (
    <div className="min-h-screen bg-[#0A0A0C] text-white p-8 overflow-hidden font-sans">
      <div className="text-center mb-12">
         <h1 className="text-5xl font-black text-[#C19D65] mb-2 drop-shadow-lg">Ø¬Ø¯Ø§Ø± Ø§Ù„Ø°ÙƒØ±ÙŠØ§Øª</h1>
         <p className="text-xl text-white/50">Ø´Ø§Ø±ÙƒÙˆÙ†Ø§ Ù…Ø´Ø§Ø¹Ø±ÙƒÙ… Ø¹Ø¨Ø± Ø§Ù„ØªØ°ÙƒØ±Ø© Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©</p>
      </div>

      {/* Grid Layout (Masonry Style) */}
      <div className="columns-1 md:columns-3 lg:columns-4 gap-6 space-y-6 mx-auto max-w-7xl">
        {memories.map((mem) => (
          <div key={mem.id} className="break-inside-avoid bg-[#18181B] border border-white/10 p-6 rounded-[2rem] shadow-2xl animate-in slide-in-from-bottom-4 duration-700">
             <p className="text-lg leading-relaxed mb-4 text-white/90">"{mem.message}"</p>
             <div className="flex items-center gap-3 border-t border-white/5 pt-4">
                <div className="w-10 h-10 rounded-full bg-gradient-to-br from-[#C19D65] to-black flex items-center justify-center font-bold text-white">
                   {mem.attendee?.name.charAt(0)}
                </div>
                <div>
                   <h4 className="font-bold text-sm">{mem.attendee?.name}</h4>
                   <span className="text-[10px] text-[#C19D65] uppercase tracking-widest">{mem.attendee?.category}</span>
                </div>
                <Heart size={16} className="mr-auto text-red-500 fill-red-500 animate-pulse"/>
             </div>
          </div>
        ))}
      </div>
    </div>
  );
}
</file>

<file path="components/dashboard/AddGuestModal.tsx">
'use client';
import { useState } from 'react';
import { useEventStore } from '@/store/eventStore';
import { Plus, X } from 'lucide-react';

export function AddGuestModal() {
  const { isAddModalOpen, toggleAddModal, addGuest } = useEventStore();
  const [form, setForm] = useState({ name: '', phone: '', category: 'GENERAL' });
  const [loading, setLoading] = useState(false);

  if (!isAddModalOpen) return null;

  const handleSubmit = async () => {
    if (!form.name || !form.phone) return alert('Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù†Ø§Ù‚ØµØ©');
    setLoading(true);
    await addGuest(form);
    setLoading(false);
    setForm({ name: '', phone: '', category: 'GENERAL' });
  };

  return (
     <div className="fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4">
        <div className="bg-[#18181B] w-full max-w-sm rounded-3xl border border-white/10 p-6 animate-in zoom-in relative">
           <button onClick={() => toggleAddModal(false)} className="absolute top-4 left-4 text-white/40 hover:text-white"><X size={20}/></button>
           
           <h3 className="text-xl font-bold mb-4 flex items-center gap-2"><Plus size={20}/> Ø¥Ø¶Ø§ÙØ© Ù…Ø¯Ø¹Ùˆ Ø¬Ø¯ÙŠØ¯</h3>
           <div className="space-y-4">
              <input type="text" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø«Ù„Ø§Ø«ÙŠ" value={form.name} onChange={e => setForm({...form, name: e.target.value})} 
                 className="w-full bg-black/40 border border-white/10 rounded-xl p-3 outline-none focus:border-[#C19D65] text-white" />
              <input type="tel" placeholder="Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„ (9665...)" value={form.phone} onChange={e => setForm({...form, phone: e.target.value})} 
                 className="w-full bg-black/40 border border-white/10 rounded-xl p-3 outline-none focus:border-[#C19D65] dir-ltr text-right text-white" />
              <select value={form.category} onChange={e => setForm({...form, category: e.target.value})}
                 className="w-full bg-black/40 border border-white/10 rounded-xl p-3 outline-none focus:border-[#C19D65] appearance-none text-white">
                 <option value="GENERAL">Ø¶ÙŠÙ Ø¹Ø§Ù…</option>
                 <option value="VIP">VIP (ÙƒØ¨Ø§Ø± Ø§Ù„Ø´Ø®ØµÙŠØ§Øª)</option>
                 <option value="FAMILY">Ø£Ù‡Ù„ Ø§Ù„Ø¹Ø±Ø³</option>
              </select>
              <button disabled={loading} onClick={handleSubmit} className="w-full bg-[#C19D65] text-black font-bold py-3 rounded-xl hover:brightness-110 disabled:opacity-50">
                 {loading ? 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸...' : 'Ø­ÙØ¸ ÙˆØ¥Ø¶Ø§ÙØ©'}
              </button>
           </div>
        </div>
     </div>
  );
}
</file>

<file path="components/dashboard/AttendeesTable.tsx">
'use client';
import { useState } from 'react';
import { useEventStore } from '@/store/eventStore';
import { generateWhatsAppLink } from '@/app/utils/whatsappHelper';
import { Search, Trash2, CheckSquare, Square, MessageCircle, Phone, CheckCircle2 } from 'lucide-react';

export function AttendeesTable() {
  const { attendees, searchTerm, setSearchTerm, filterType, setFilterType, deleteGuest, bulkDelete, toggleAttendance, eventDetails, toggleQueueModal } = useEventStore();
  const [selectedIds, setSelectedIds] = useState<Set<string>>(new Set());

  // Ø§Ù„ØªØµÙÙŠØ©
  const filteredAttendees = attendees.filter(a => {
    const matchesSearch = a.name.toLowerCase().includes(searchTerm.toLowerCase()) || a.phone.includes(searchTerm);
    const matchesFilter = filterType === 'all' ? true :
      filterType === 'attended' ? a.attended :
      filterType === 'confirmed' ? a.status === 'confirmed' : !a.attended;
    return matchesSearch && matchesFilter;
  });

  const pendingCount = attendees.filter(a => a.status === 'confirmed').length;

  // Ø¯ÙˆØ§Ù„ Ø§Ù„ØªØ­Ø¯ÙŠØ¯
  const toggleSelectAll = () => setSelectedIds(prev => prev.size === filteredAttendees.length ? new Set() : new Set(filteredAttendees.map(a => a.id)));
  const toggleSelectOne = (id: string) => { const newSet = new Set(selectedIds); newSet.has(id) ? newSet.delete(id) : newSet.add(id); setSelectedIds(newSet); };

  return (
    <div className="space-y-4">
      {/* Toolbar */}
      <div className="flex flex-col md:flex-row gap-4 justify-between items-center bg-[#18181B] p-4 rounded-2xl border border-white/10">
         <div className="flex gap-2">
             {[{id:'all',label:'Ø§Ù„ÙƒÙ„'}, {id:'confirmed',label:'Ù…Ø¤ÙƒØ¯'}, {id:'attended',label:'Ø­Ø§Ø¶Ø±'}].map(tab => (
               <button key={tab.id} onClick={() => setFilterType(tab.id)} className={`px-4 py-2 rounded-lg text-xs font-bold border transition-all ${filterType === tab.id ? 'bg-white text-black' : 'bg-white/5 text-white/50 border-transparent'}`}>{tab.label}</button>
             ))}
         </div>
         
         <div className="flex gap-3 w-full md:w-auto">
            {/* ğŸŸ¢ Ø²Ø± Ø¨Ø¯Ø¡ Ø§Ù„Ø·Ø§Ø¨ÙˆØ± */}
            {pendingCount > 0 && (
                <button onClick={() => toggleQueueModal(true)} className="px-4 py-2 bg-[#25D366] text-black font-bold rounded-xl flex items-center gap-2 hover:brightness-110 animate-pulse">
                   <MessageCircle size={18} /> <span className="hidden md:inline">Ø¥Ø±Ø³Ø§Ù„ Ù„Ù€ {pendingCount}</span>
                </button>
            )}
            <div className="relative flex-1">
                <Search className="absolute right-3 top-1/2 -translate-y-1/2 text-white/30" size={16} />
                <input type="text" placeholder="Ø¨Ø­Ø«..." value={searchTerm} onChange={e => setSearchTerm(e.target.value)} className="w-full bg-black/40 border border-white/10 rounded-xl py-2 pr-10 pl-4 text-sm text-white focus:border-[#C19D65] outline-none" />
            </div>
         </div>
      </div>

      {/* Table */}
      <div className="bg-[#18181B] rounded-[2rem] border border-white/10 overflow-hidden min-h-[400px]">
         <table className="w-full text-right text-sm">
            <thead className="bg-white/5 text-white/40 text-xs">
               <tr>
                  <th className="p-4 w-10"><button onClick={toggleSelectAll}>{selectedIds.size > 0 ? <CheckSquare size={18}/> : <Square size={18}/>}</button></th>
                  <th className="p-4">Ø§Ù„Ø¶ÙŠÙ</th>
                  <th className="p-4 text-center">Ø§Ù„Ø­Ø¶ÙˆØ±</th>
                  <th className="p-4 text-center">Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
               </tr>
            </thead>
            <tbody className="divide-y divide-white/5">
               {filteredAttendees.map(g => (
                  <tr key={g.id} className="hover:bg-white/5 group">
                     <td className="p-4"><button onClick={() => toggleSelectOne(g.id)} className={selectedIds.has(g.id) ? 'text-[#C19D65]' : 'text-white/20'}>{selectedIds.has(g.id) ? <CheckSquare size={18}/> : <Square size={18}/>}</button></td>
                     <td className="p-4">
                        <div className="font-bold">{g.name} <span className="text-[9px] bg-white/10 px-1 rounded ml-2">{g.category}</span></div>
                        <div className="text-xs text-white/40 dir-ltr text-right">{g.phone}</div>
                     </td>
                     <td className="p-4 text-center">
                        <button onClick={() => toggleAttendance(g.id, g.attended)} className={`px-3 py-1 rounded-full text-xs font-bold ${g.attended ? 'bg-green-500 text-black' : 'bg-white/5 text-white/20'}`}>
                           {g.attended ? 'ØªÙ… Ø§Ù„Ø­Ø¶ÙˆØ±' : 'ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„'}
                        </button>
                     </td>
                     <td className="p-4 text-center flex justify-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity">
                        <button onClick={() => window.open(generateWhatsAppLink(g.phone, g.name, eventDetails?.name || '', g.id), '_blank')} className="p-2 bg-[#25D366]/10 text-[#25D366] rounded-lg hover:bg-[#25D366] hover:text-white"><MessageCircle size={16}/></button>
                        <button onClick={() => {if(confirm('Ø­Ø°ÙØŸ')) deleteGuest(g.id)}} className="p-2 bg-red-500/10 text-red-500 rounded-lg hover:bg-red-500 hover:text-white"><Trash2 size={16}/></button>
                     </td>
                  </tr>
               ))}
            </tbody>
         </table>
      </div>
    </div>
  );
}
</file>

<file path="components/dashboard/EditEventModal.tsx">
'use client';
import { useState, useEffect } from 'react';
import { useEventStore } from '@/store/eventStore';
import { X, Save, Edit3 } from 'lucide-react';

export function EditEventModal() {
  const { isEditEventModalOpen, toggleEditEventModal, eventDetails, updateEventDetails } = useEventStore();
  const [form, setForm] = useState({ name: '', location_name: '' });

  // ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù†Ø¯ Ø§Ù„ÙØªØ­
  useEffect(() => {
    if (eventDetails) {
      setForm({ name: eventDetails.name || '', location_name: eventDetails.location_name || '' });
    }
  }, [eventDetails, isEditEventModalOpen]);

  if (!isEditEventModalOpen) return null;

  return (
    <div className="fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4">
      <div className="bg-[#18181B] w-full max-w-sm rounded-3xl border border-white/10 p-6 animate-in zoom-in relative">
        <button onClick={() => toggleEditEventModal(false)} className="absolute top-4 left-4 text-white/40 hover:text-white"><X size={20}/></button>
        
        <h3 className="text-xl font-bold mb-6 flex items-center gap-2"><Edit3 size={20}/> ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­ÙÙ„</h3>
        
        <div className="space-y-4">
          <div>
             <label className="text-xs text-white/50 block mb-1">Ø§Ø³Ù… Ø§Ù„Ø­ÙÙ„</label>
             <input type="text" value={form.name} onChange={e => setForm({...form, name: e.target.value})} 
                className="w-full bg-black/40 border border-white/10 rounded-xl p-3 outline-none focus:border-[#C19D65] text-white" />
          </div>
          <div>
             <label className="text-xs text-white/50 block mb-1">Ø§Ù„Ù…ÙˆÙ‚Ø¹ (Ø§Ø³Ù… Ø§Ù„Ù‚Ø§Ø¹Ø©)</label>
             <input type="text" value={form.location_name} onChange={e => setForm({...form, location_name: e.target.value})} 
                className="w-full bg-black/40 border border-white/10 rounded-xl p-3 outline-none focus:border-[#C19D65] text-white" />
          </div>
          
          <button onClick={() => updateEventDetails(form)} className="w-full bg-[#C19D65] text-black font-bold py-3 rounded-xl hover:brightness-110 flex justify-center items-center gap-2">
             <Save size={18}/> Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª
          </button>
        </div>
      </div>
    </div>
  );
}
</file>

<file path="components/dashboard/ImportGuestsModal.tsx">
'use client';
import { useState, useRef } from 'react';
import readXlsxFile from 'read-excel-file';
import { useEventStore } from '@/store/eventStore';
import { X, UploadCloud, AlertTriangle, CheckCircle, FileSpreadsheet } from 'lucide-react';

export function ImportGuestsModal() {
  const { isImportModalOpen, toggleImportModal, bulkAddGuests } = useEventStore();
  const [previewData, setPreviewData] = useState<any[]>([]);
  const [errors, setErrors] = useState<string[]>([]);
  const [isSubmitting, setIsSubmitting] = useState(false);
  const fileInputRef = useRef<HTMLInputElement>(null);

  if (!isImportModalOpen) return null;

  // ØªÙ†Ø¸ÙŠÙ ÙˆØªÙ†Ø³ÙŠÙ‚ Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„ (ØªØ®ØµÙŠØµ Ù„Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©)
  const cleanPhone = (phone: any) => {
    if (!phone) return '';
    let p = String(phone).replace(/[^0-9]/g, '');
    if (p.startsWith('05')) p = '966' + p.substring(1);
    else if (p.startsWith('5')) p = '966' + p;
    return p;
  };

  const handleFileChange = async (e: React.ChangeEvent<HTMLInputElement>) => {
    const file = e.target.files?.[0];
    if (!file) return;

    try {
      const rows = await readXlsxFile(file);
      // Ù†ÙØªØ±Ø¶ Ø£Ù† Ø§Ù„ØµÙ Ø§Ù„Ø£ÙˆÙ„ Ø¹Ù†Ø§ÙˆÙŠÙ†ØŒ Ù†Ø¨Ø¯Ø£ Ù…Ù† Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù†ÙŠ
      const data = rows.slice(1).map((row: any) => {
        const name = row[0]?.toString() || '';
        const rawPhone = row[1]?.toString() || '';
        const categoryRaw = row[2]?.toString().toUpperCase() || 'GENERAL';
        const category = ['VIP', 'FAMILY', 'GENERAL'].includes(categoryRaw) ? categoryRaw : 'GENERAL';

        return {
          name,
          phone: cleanPhone(rawPhone),
          originalPhone: rawPhone,
          category,
          isValid: name.length > 2 && cleanPhone(rawPhone).length >= 9
        };
      });

      setPreviewData(data);
      const invalidCount = data.filter((d: any) => !d.isValid).length;
      if (invalidCount > 0) setErrors([`ÙŠÙˆØ¬Ø¯ ${invalidCount} ØµÙÙˆÙ ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ù†Ø§Ù‚ØµØ©.`]);
      else setErrors([]);

    } catch (err) {
      console.error(err);
      setErrors(['Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù…Ù„Ù. ØªØ£ÙƒØ¯ Ø£Ù†Ù‡ Ù…Ù„Ù Excel (.xlsx) ØµØ§Ù„Ø­.']);
    }
  };

  const handleImport = async () => {
    const validGuests = previewData.filter(d => d.isValid).map(({ name, phone, category }) => ({
      name, phone, category
    }));
    if (validGuests.length === 0) return alert('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª ØµØ§Ù„Ø­Ø©');

    setIsSubmitting(true);
    await bulkAddGuests(validGuests);
    setIsSubmitting(false);
    setPreviewData([]);
  };

  return (
    <div className="fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4">
      <div className="bg-[#18181B] w-full max-w-2xl rounded-3xl border border-white/10 p-6 animate-in zoom-in relative flex flex-col max-h-[90vh]">
        <div className="flex justify-between items-center mb-6">
           <h3 className="text-xl font-bold flex items-center gap-2"><FileSpreadsheet className="text-[#107C41]"/> Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù…Ù† Excel</h3>
           <button onClick={() => toggleImportModal(false)} className="text-white/40 hover:text-white"><X size={20}/></button>
        </div>

        {previewData.length === 0 ? (
          <div 
            onClick={() => fileInputRef.current?.click()}
            className="border-2 border-dashed border-white/20 rounded-2xl p-10 flex flex-col items-center justify-center text-center cursor-pointer hover:bg-white/5 transition-all"
          >
            <input type="file" ref={fileInputRef} onChange={handleFileChange} accept=".xlsx" className="hidden" />
            <div className="w-16 h-16 bg-[#C19D65]/10 text-[#C19D65] rounded-full flex items-center justify-center mb-4">
               <UploadCloud size={32} />
            </div>
            <p className="font-bold text-lg">Ø§Ø¶ØºØ· Ù„Ø±ÙØ¹ Ù…Ù„Ù Excel</p>
            <p className="text-sm text-white/40 mt-2">Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©: Ø§Ù„Ø§Ø³Ù…ØŒ Ø§Ù„Ø¬ÙˆØ§Ù„ØŒ Ø§Ù„ÙØ¦Ø©</p>
          </div>
        ) : (
          <div className="flex-1 overflow-hidden flex flex-col">
             <div className="flex justify-between items-center mb-4 bg-white/5 p-3 rounded-xl">
                <div className="text-sm">
                   <span className="text-white/40">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:</span> <b>{previewData.length}</b>
                   <span className="mx-2 text-white/20">|</span>
                   <span className="text-green-400">ØµØ§Ù„Ø­: <b>{previewData.filter(d => d.isValid).length}</b></span>
                   <span className="mx-2 text-white/20">|</span>
                   <span className="text-red-400">Ø£Ø®Ø·Ø§Ø¡: <b>{previewData.filter(d => !d.isValid).length}</b></span>
                </div>
                <button onClick={() => {setPreviewData([]); setErrors([]);}} className="text-xs underline text-white/50 hover:text-white">Ù…Ù„Ù Ø¢Ø®Ø±</button>
             </div>

             <div className="flex-1 overflow-y-auto border border-white/10 rounded-xl">
               <table className="w-full text-right text-xs">
                 <thead className="bg-white/10 text-white/60 sticky top-0">
                   <tr><th className="p-3">Ø§Ù„Ø§Ø³Ù…</th><th className="p-3">Ø§Ù„Ø¬ÙˆØ§Ù„</th><th className="p-3">Ø§Ù„ÙØ¦Ø©</th><th className="p-3 text-center">Ø§Ù„Ø­Ø§Ù„Ø©</th></tr>
                 </thead>
                 <tbody className="divide-y divide-white/5">
                   {previewData.map((row, idx) => (
                     <tr key={idx} className={!row.isValid ? 'bg-red-500/10' : ''}>
                       <td className="p-3">{row.name}</td>
                       <td className="p-3">{row.phone}</td>
                       <td className="p-3"><span className="bg-white/10 px-2 py-0.5 rounded">{row.category}</span></td>
                       <td className="p-3 text-center">{row.isValid ? <CheckCircle size={14} className="text-green-500 mx-auto"/> : <AlertTriangle size={14} className="text-red-500 mx-auto"/>}</td>
                     </tr>
                   ))}
                 </tbody>
               </table>
             </div>

             <div className="mt-6 flex gap-3">
                <button onClick={handleImport} disabled={isSubmitting || previewData.filter(d => d.isValid).length === 0}
                  className="flex-1 bg-[#C19D65] text-black font-bold py-3 rounded-xl hover:brightness-110 disabled:opacity-50 disabled:cursor-not-allowed">
                  {isSubmitting ? 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸...' : `ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯`}
                </button>
                <button onClick={() => toggleImportModal(false)} className="px-6 bg-white/10 rounded-xl hover:bg-white/20">Ø¥Ù„ØºØ§Ø¡</button>
             </div>
          </div>
        )}
      </div>
    </div>
  );
}
</file>

<file path="components/dashboard/MessageConfigModal.tsx">
'use client';
import { useState, useEffect } from 'react';
import { useEventStore } from '@/store/eventStore';
import { X, MessageCircle, Save, MapPin, Bell } from 'lucide-react';

export function MessageConfigModal() {
  const { isMessageModalOpen, toggleMessageModal, messageSettings, updateMessageSettings } = useEventStore();
  
  // Ø­Ø§Ù„Ø© Ù…Ø­Ù„ÙŠØ© Ù„Ù„Ù†Ù…ÙˆØ°Ø¬
  const [settings, setSettings] = useState(messageSettings);

  // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø© Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„
  useEffect(() => {
    setSettings(messageSettings);
  }, [messageSettings, isMessageModalOpen]);

  if (!isMessageModalOpen) return null;

  return (
    <div className="fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4">
      <div className="bg-[#18181B] w-full max-w-lg rounded-3xl border border-white/10 p-6 animate-in zoom-in relative shadow-2xl">
        <button onClick={() => toggleMessageModal(false)} className="absolute top-4 left-4 text-white/40 hover:text-white"><X size={20}/></button>

        <h3 className="text-xl font-bold mb-1 flex items-center gap-2">
          <MessageCircle className="text-[#C19D65]" size={20}/> ØªØ®ØµÙŠØµ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„
        </h3>
        <p className="text-xs text-white/40 mb-6">ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ© Ø§Ù„ØªÙŠ ØªØµÙ„ Ù„Ù„Ø¶ÙŠÙˆÙ</p>

        <div className="space-y-6">
          
          {/* 1. Ø±Ø³Ø§Ù„Ø© Ù‚Ø¨Ù„ 24 Ø³Ø§Ø¹Ø© */}
          <div className={`p-4 rounded-2xl border transition-all ${settings.reminder.enabled ? 'bg-white/5 border-white/10' : 'bg-black/40 border-white/5 opacity-50'}`}>
            <div className="flex justify-between items-center mb-3">
               <div className="flex items-center gap-2">
                  <Bell size={16} className={settings.reminder.enabled ? "text-[#C19D65]" : "text-gray-500"}/>
                  <label className="text-sm font-bold text-white">Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªØ°ÙƒÙŠØ± (Ù‚Ø¨Ù„ 24 Ø³Ø§Ø¹Ø©)</label>
               </div>
               
               {/* Ø²Ø± Ø§Ù„ØªÙØ¹ÙŠÙ„/Ø§Ù„ØªØ¹Ø·ÙŠÙ„ */}
               <button 
                  onClick={() => setSettings({ ...settings, reminder: { ...settings.reminder, enabled: !settings.reminder.enabled } })}
                  className={`w-10 h-6 rounded-full flex items-center p-1 transition-all ${settings.reminder.enabled ? 'bg-[#C19D65]' : 'bg-white/10'}`}
               >
                  <div className={`w-4 h-4 bg-white rounded-full shadow-sm transition-all ${settings.reminder.enabled ? 'translate-x-0' : '-translate-x-4'}`}></div>
               </button>
            </div>
            
            {settings.reminder.enabled && (
               <textarea 
                 rows={3} 
                 value={settings.reminder.text}
                 onChange={(e) => setSettings({ ...settings, reminder: { ...settings.reminder, text: e.target.value } })}
                 className="w-full bg-black/40 border border-white/10 rounded-xl p-3 text-sm outline-none focus:border-[#C19D65] text-white placeholder-white/20" 
                 placeholder="Ø§ÙƒØªØ¨ Ù†Øµ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ù‡Ù†Ø§..."
               />
            )}
            {!settings.reminder.enabled && <p className="text-xs text-white/30 italic">Ù‡Ø°Ù‡ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ù…Ø¹Ø·Ù„Ø© ÙˆÙ„Ù† ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„Ù‡Ø§.</p>}
          </div>

          {/* 2. Ø±Ø³Ø§Ù„Ø© Ù‚Ø¨Ù„ 1 Ø³Ø§Ø¹Ø© */}
          <div className={`p-4 rounded-2xl border transition-all ${settings.location.enabled ? 'bg-white/5 border-white/10' : 'bg-black/40 border-white/5 opacity-50'}`}>
            <div className="flex justify-between items-center mb-3">
               <div className="flex items-center gap-2">
                  <MapPin size={16} className={settings.location.enabled ? "text-green-500" : "text-gray-500"}/>
                  <label className="text-sm font-bold text-white">Ø±Ø³Ø§Ù„Ø© Ø§Ù„ÙˆØµÙˆÙ„ (Ù‚Ø¨Ù„ 1 Ø³Ø§Ø¹Ø©)</label>
               </div>
               
               <button 
                  onClick={() => setSettings({ ...settings, location: { ...settings.location, enabled: !settings.location.enabled } })}
                  className={`w-10 h-6 rounded-full flex items-center p-1 transition-all ${settings.location.enabled ? 'bg-green-500' : 'bg-white/10'}`}
               >
                  <div className={`w-4 h-4 bg-white rounded-full shadow-sm transition-all ${settings.location.enabled ? 'translate-x-0' : '-translate-x-4'}`}></div>
               </button>
            </div>

            {settings.location.enabled && (
               <textarea 
                 rows={2} 
                 value={settings.location.text}
                 onChange={(e) => setSettings({ ...settings, location: { ...settings.location, text: e.target.value } })}
                 className="w-full bg-black/40 border border-white/10 rounded-xl p-3 text-sm outline-none focus:border-green-500 text-white placeholder-white/20"
                 placeholder="Ù…Ø«Ù„Ø§Ù‹: ÙØªØ­Ù†Ø§ Ø§Ù„Ø£Ø¨ÙˆØ§Ø¨ØŒ Ø±Ø§Ø¨Ø· Ø§Ù„Ø¯Ø®ÙˆÙ„..." 
               />
            )}
            {!settings.location.enabled && <p className="text-xs text-white/30 italic">Ù‡Ø°Ù‡ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ù…Ø¹Ø·Ù„Ø© ÙˆÙ„Ù† ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„Ù‡Ø§.</p>}
          </div>
          
          <button 
            onClick={() => updateMessageSettings(settings)} 
            className="w-full bg-white text-black font-bold py-3 rounded-xl mt-4 flex justify-center items-center gap-2 hover:bg-gray-200 transition-colors"
          >
            <Save size={18}/> Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
          </button>
        </div>
      </div>
    </div>
  );
}
</file>

<file path="components/dashboard/PinSettings.tsx">
'use client';

import { useState } from 'react';
import { supabase } from '@/app/utils/supabase/client';
import { Settings, Lock, Loader2 } from 'lucide-react';
import { useSWRConfig } from 'swr'; // âœ… Ø§Ø³ØªÙŠØ±Ø§Ø¯ ØµØ­ÙŠØ­
import * as Sentry from '@sentry/nextjs'; 

export default function PinSettings({ eventId, currentPin }: { eventId: string, currentPin: string }) {
  // âœ… Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø§Ù„Ù€ Hook Ø¯Ø§Ø®Ù„ Ø¬Ø³Ù… Ø§Ù„Ù…ÙƒÙˆÙ†
  const { mutate } = useSWRConfig();

  const [isEditing, setIsEditing] = useState(false);
  const [newPin, setNewPin] = useState(currentPin);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);

  const handleUpdatePin = async () => {
    if (newPin.length !== 4) {
      setError("ÙŠØ¬Ø¨ Ø£Ù† ÙŠØªÙƒÙˆÙ† Ø§Ù„Ø±Ù…Ø² Ù…Ù† 4 Ø£Ø±Ù‚Ø§Ù…");
      return;
    }

    setLoading(true);
    setError(null);

    try {
      const { error: updateError } = await supabase
        .from('events')
        .update({ pin: newPin })
        .eq('id', eventId);

      if (updateError) throw updateError;
      
      // âœ… ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙƒØ§Ø´ ÙÙˆØ±Ø§Ù‹ Ù„Ø¶Ù…Ø§Ù† Ù…Ø²Ø§Ù…Ù†Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
      mutate(`event-${eventId}`); 
      setIsEditing(false);
      alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø±Ù…Ø² Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­! âœ…');
    } catch (err) {
      Sentry.captureException(err);
      setError('ÙØ´Ù„ Ø§Ù„ØªØ­Ø¯ÙŠØ«ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù„Ø§Ø­Ù‚Ø§Ù‹');
    } finally {
      setLoading(false);
    }
  };

  return (
    <div className="bg-[#18181B] p-6 rounded-[2rem] border border-white/10 shadow-xl">
      <div className="flex items-center justify-between">
        <div className="flex items-center gap-4">
          <div className="w-10 h-10 bg-[#C19D65]/10 rounded-xl flex items-center justify-center text-[#C19D65]">
             <Lock size={20} />
          </div>
          <div>
            <p className="text-[10px] text-white/40 font-bold uppercase tracking-wider">Ø±Ù…Ø² Ø§Ù„Ø¯Ø®ÙˆÙ„ (PIN)</p>
            <p className="text-xl font-mono font-black text-white tracking-[0.3em]">
              {isEditing ? '****' : currentPin}
            </p>
          </div>
        </div>
        
        <button 
          onClick={() => setIsEditing(!isEditing)}
          className="p-3 bg-white/5 hover:bg-white/10 rounded-xl transition-all border border-white/5"
        >
          <Settings size={18} className="text-white/60" />
        </button>
      </div>

      {isEditing && (
        <div className="mt-6 pt-6 border-t border-white/5 space-y-4 animate-in slide-in-from-top-2 duration-300">
          <div className="space-y-2">
            <label className="text-[10px] text-white/30 mr-2">Ø£Ø¯Ø®Ù„ Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ø¬Ø¯ÙŠØ¯</label>
            <input 
              type="text" 
              inputMode="numeric"
              maxLength={4}
              value={newPin}
              onChange={(e) => setNewPin(e.target.value.replace(/\D/g, ''))}
              className="w-full bg-black/40 border border-white/10 rounded-2xl py-4 text-center text-2xl font-mono font-bold text-[#C19D65] focus:border-[#C19D65] outline-none transition-all"
              placeholder="0000"
            />
          </div>
          
          {error && <p className="text-[10px] text-red-400 text-center font-bold">{error}</p>}
          
          <div className="flex gap-2">
             <button 
                onClick={handleUpdatePin}
                disabled={loading || newPin.length < 4}
                className="flex-1 py-3 bg-[#C19D65] text-black rounded-xl font-black text-sm hover:brightness-110 disabled:opacity-50 transition-all shadow-lg shadow-[#C19D65]/10"
              >
                {loading ? <Loader2 className="animate-spin mx-auto" size={18} /> : 'Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±'}
              </button>
              <button 
                onClick={() => {setIsEditing(false); setError(null);}}
                className="px-4 py-3 bg-white/5 text-white/60 rounded-xl text-sm font-bold hover:bg-white/10"
              >
                Ø¥Ù„ØºØ§Ø¡
              </button>
          </div>
        </div>
      )}
    </div>
  );
}
</file>

<file path="components/dashboard/ScannerAccessCard.tsx">
'use client';

import { useState } from 'react';
import { supabase } from '@/app/utils/supabase/client';
import { Settings, Lock, Copy, Check, Loader2 } from 'lucide-react';
import { useSWRConfig } from 'swr';
import * as Sentry from '@sentry/nextjs';

export default function ScannerAccessCard({ eventId, currentPin }: { eventId: string, currentPin: string }) {
  const { mutate } = useSWRConfig();
  const [isEditing, setIsEditing] = useState(false);
  const [newPin, setNewPin] = useState(currentPin);
  const [loading, setLoading] = useState(false);
  const [copied, setCopied] = useState(false);

  const scannerLink = `${typeof window !== 'undefined' ? window.location.origin : ''}/scan/${eventId}`;

  const handleCopy = () => {
    navigator.clipboard.writeText(scannerLink);
    setCopied(true);
    setTimeout(() => setCopied(false), 2000);
  };

  const handleUpdatePin = async () => {
    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª
    if (newPin.length !== 4) return;
    if (!eventId) {
      alert("Ø®Ø·Ø£: Ø±Ù‚Ù… Ø§Ù„Ø­ÙÙ„ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯");
      return;
    }

    setLoading(true);

    try {
      const { error } = await supabase
        .from('events')
        .update({ pin: newPin })
        .eq('id', eventId.trim());

      if (error) throw error;

      // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù†Ø¬Ø§Ø­
      mutate(`event-${eventId}`);
      setIsEditing(false);
      alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø±Ù…Ø² Ø¨Ù†Ø¬Ø§Ø­ âœ…');

    } catch (err: any) {
      // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø·Ø£ ÙÙŠ Sentry Ù„Ù„Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø®Ù„ÙÙŠØ©
      Sentry.captureException(err);
      
      // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø®Ø·Ø£ ÙˆØ§Ø¶Ø­Ø© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…
      const msg = err.message || 'Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹';
      alert(`ÙØ´Ù„ Ø§Ù„ØªØ­Ø¯ÙŠØ«: ${msg}`);
    } finally {
      setLoading(false);
    }
  };

  return (
    <div className="bg-[#18181B] rounded-[2rem] border border-white/10 overflow-hidden shadow-2xl flex flex-col">
      
      {/* Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø¹Ù„ÙˆÙŠ: Ø§Ù„Ø±Ø§Ø¨Ø· */}
      <div className="p-8 text-center bg-[#18181B] z-10 relative">
        <h3 className="font-bold text-lg mb-4 text-[#C19D65] flex items-center justify-center gap-2">
           Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ø§Ø³Ø­ Ø§Ù„Ø¶ÙˆØ¦ÙŠ
        </h3>
        <div className="p-4 bg-black/40 rounded-2xl mb-4 font-mono text-xs text-white/50 break-all border border-white/5 shadow-inner select-all dir-ltr">
          {scannerLink}
        </div>
        <button 
          onClick={handleCopy} 
          className="w-full py-4 bg-[#C19D65] text-black font-black rounded-2xl hover:brightness-110 transition-all flex items-center justify-center gap-2 shadow-lg shadow-[#C19D65]/10"
        >
          {copied ? <Check size={18} /> : <Copy size={18} />}
          {copied ? 'ØªÙ… Ø§Ù„Ù†Ø³Ø®' : 'Ù†Ø³Ø® Ø±Ø§Ø¨Ø· Ø§Ù„Ù€ Scanner'}
        </button>
      </div>

      {/* Ø®Ø· ÙØ§ØµÙ„ */}
      <div className="h-[1px] bg-white/5 w-full"></div>

      {/* Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø³ÙÙ„ÙŠ: Ø§Ù„Ù€ PIN */}
      <div className="p-6 bg-white/[0.02]">
        <div className="flex items-center justify-between">
            <button 
              onClick={() => setIsEditing(!isEditing)} 
              className={`p-3 rounded-2xl transition-all border ${isEditing ? 'bg-[#C19D65] text-black border-[#C19D65]' : 'bg-white/5 text-white/40 border-white/5 hover:bg-white/10'}`}
            >
              <Settings size={20} />
            </button>

            <div className="flex flex-col items-end px-4">
              <p className="text-[10px] text-white/30 font-bold uppercase tracking-widest mb-1">Ø±Ù…Ø² Ø§Ù„Ø¯Ø®ÙˆÙ„ (PIN)</p>
              <div className="flex gap-2" dir="ltr">
                {(isEditing ? '****' : currentPin).split('').map((char, i) => (
                  <span key={i} className="w-8 h-10 bg-black/60 rounded-lg flex items-center justify-center font-mono text-xl font-black text-white border border-white/10 shadow-lg">
                    {char}
                  </span>
                ))}
              </div>
            </div>

            <div className="w-12 h-12 bg-[#C19D65]/10 rounded-2xl flex items-center justify-center text-[#C19D65] border border-[#C19D65]/20">
              <Lock size={20} />
            </div>
        </div>

        {isEditing && (
          <div className="mt-6 pt-6 border-t border-white/5 space-y-4 animate-in fade-in slide-in-from-top-2">
            <input 
              type="text" 
              inputMode="numeric" 
              maxLength={4} 
              value={newPin} 
              onChange={(e) => setNewPin(e.target.value.replace(/\D/g, ''))}
              className="w-full bg-black/60 border border-[#C19D65]/50 rounded-2xl py-4 text-center text-3xl font-mono font-bold text-[#C19D65] focus:border-[#C19D65] outline-none transition-all shadow-inner" 
              placeholder="0000" 
            />
            <button 
              onClick={handleUpdatePin} 
              disabled={loading || newPin.length < 4} 
              className="w-full py-3 bg-white text-black rounded-xl font-bold text-sm hover:bg-gray-200 disabled:opacity-50 shadow-lg"
            >
              {loading ? <Loader2 className="animate-spin mx-auto" size={18} /> : 'Ø­ÙØ¸ Ø§Ù„ØªØ­Ø¯ÙŠØ«'}
            </button>
          </div>
        )}
      </div>
    </div>
  );
}
</file>

<file path="components/dashboard/StatsCards.tsx">
'use client';
import { useEventStore } from '@/store/eventStore';
import { Users, CheckCircle2 } from 'lucide-react';

const DonutChart = ({ percentage, color }: { percentage: number, color: string }) => {
  const radius = 30;
  const circumference = 2 * Math.PI * radius;
  const strokeDashoffset = circumference - (percentage / 100) * circumference;
  return (
    <div className="relative w-16 h-16 flex items-center justify-center">
      <svg className="transform -rotate-90 w-full h-full">
        <circle cx="32" cy="32" r={radius} stroke="currentColor" strokeWidth="6" fill="transparent" className="text-white/10" />
        <circle cx="32" cy="32" r={radius} stroke={color} strokeWidth="6" fill="transparent"
          strokeDasharray={circumference} strokeDashoffset={strokeDashoffset} strokeLinecap="round" className="transition-all duration-1000 ease-out" />
      </svg>
      <span className="absolute text-[10px] font-bold">{percentage}%</span>
    </div>
  );
};

export function StatsCards() {
  const { attendees } = useEventStore();

  const total = attendees.length;
  const confirmed = attendees.filter(a => a.status === 'confirmed').length;
  const attended = attendees.filter(a => a.attended).length;
  const attendanceRate = total > 0 ? Math.round((attended / total) * 100) : 0;

  return (
    <div className="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
       {/* Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© 1: Ø§Ù„Ù…Ø³Ø¬Ù„ÙŠÙ† */}
       <div className="bg-[#18181B] p-5 rounded-2xl border border-white/10 flex justify-between items-center">
           <div><p className="text-xs text-white/40 font-bold mb-1">Ø§Ù„Ù…Ø³Ø¬Ù„ÙŠÙ†</p><h3 className="text-3xl font-black">{total}</h3></div>
           <Users size={24} className="text-white/20"/>
       </div>

       {/* Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© 2: Ø§Ù„Ø­Ø¶ÙˆØ± Ø§Ù„ÙØ¹Ù„ÙŠ (Ù…Ø¹ Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ) */}
       <div className="bg-[#18181B] p-5 rounded-2xl border border-white/10 flex justify-between items-center relative overflow-hidden">
           <div className="z-10"><p className="text-xs text-white/40 font-bold mb-1">Ø§Ù„Ø­Ø¶ÙˆØ± Ø§Ù„ÙØ¹Ù„ÙŠ</p><h3 className="text-3xl font-black text-green-500">{attended}</h3></div>
           <DonutChart percentage={attendanceRate} color="#22c55e" />
       </div>

       {/* Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© 3: Ø§Ù„Ù…Ø¤ÙƒØ¯ÙŠÙ† */}
       <div className="bg-[#18181B] p-5 rounded-2xl border border-white/10 flex justify-between items-center">
           <div><p className="text-xs text-white/40 font-bold mb-1">RSVP Ù…Ø¤ÙƒØ¯</p><h3 className="text-3xl font-black text-blue-500">{confirmed}</h3></div>
           <CheckCircle2 size={24} className="text-blue-500/20"/>
       </div>
    </div>
  );
}
</file>

<file path="components/dashboard/WhatsAppQueueModal.tsx">
'use client';
import { useState, useEffect } from 'react';
import { useEventStore } from '@/store/eventStore';
import { generateWhatsAppLink } from '@/app/utils/whatsappHelper';
import { X, Send, SkipForward, CheckCircle2 } from 'lucide-react';

export function WhatsAppQueueModal() {
  const { 
    isQueueModalOpen, 
    toggleQueueModal, 
    attendees, 
    eventDetails, 
    markInviteAsSent 
  } = useEventStore();

  const [queue, setQueue] = useState<any[]>([]);
  const [currentIndex, setCurrentIndex] = useState(0);

  useEffect(() => {
    if (isQueueModalOpen) {
      // âš¡ï¸ Ø¥ØµÙ„Ø§Ø­: Ù†Ø£Ø®Ø° Ù†Ø³Ø®Ø© Ø«Ø§Ø¨ØªØ© Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø¹Ù†Ø¯ Ø§Ù„ÙØªØ­ ÙÙ‚Ø·
      // ÙˆÙ„Ø§ Ù†Ø±Ø¨Ø· Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø¨ØªØºÙŠØ±Ø§Øª "attendees" Ù„ØªØ¬Ù†Ø¨ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ù…Ø²Ø¹Ø¬Ø©
      const pendingGuests = attendees.filter(a => a.status === 'confirmed');
      setQueue(pendingGuests);
      setCurrentIndex(0);
    }
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [isQueueModalOpen]); // ğŸ‘ˆ Ø£Ø²Ù„Ù†Ø§ 'attendees' Ù…Ù† Ù‡Ù†Ø§ Ù„Ù…Ù†Ø¹ Ø§Ù„Ù€ Reset

  if (!isQueueModalOpen) return null;

  const currentGuest = queue[currentIndex];
  const progress = queue.length > 0 ? Math.round(((currentIndex) / queue.length) * 100) : 0;
  const isFinished = currentIndex >= queue.length;

  const handleSend = async () => {
    if (!currentGuest) return;

    // 1. ÙØªØ­ Ø±Ø§Ø¨Ø· Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨
    const link = generateWhatsAppLink(
       currentGuest.phone, 
       currentGuest.name, 
       eventDetails?.name || "Ø¯Ø¹ÙˆØ© Ø®Ø§ØµØ©", 
       currentGuest.id
    );
    window.open(link, '_blank');

    // 2. ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø© ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ© (Ø¨Ø¯ÙˆÙ† Ø§Ù„ØªØ£Ø«ÙŠØ± Ø¹Ù„Ù‰ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©)
    markInviteAsSent(currentGuest.id);

    // 3. Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„ØªØ§Ù„ÙŠ
    setCurrentIndex(prev => prev + 1);
  };

  const handleSkip = () => {
    // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„ØªØ§Ù„ÙŠ Ø¨Ø¯ÙˆÙ† ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø©
    setCurrentIndex(prev => prev + 1);
  };

  return (
    <div className="fixed inset-0 bg-black/90 backdrop-blur-md z-50 flex items-center justify-center p-4">
      <div className="bg-[#18181B] w-full max-w-md rounded-3xl border border-white/10 p-6 animate-in zoom-in relative shadow-2xl">
        
        <button onClick={() => toggleQueueModal(false)} className="absolute top-4 left-4 text-white/40 hover:text-white">
            <X size={20}/>
        </button>

        <h3 className="text-xl font-bold mb-6 flex items-center gap-2 text-white">
           <Send className="text-[#25D366]" size={24}/> Ø·Ø§Ø¨ÙˆØ± Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø³Ø±ÙŠØ¹
        </h3>

        {/* Ø­Ø§Ù„Ø© Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡ */}
        {isFinished || queue.length === 0 ? (
           <div className="text-center py-10">
              <div className="w-20 h-20 bg-green-500/10 rounded-full flex items-center justify-center mx-auto mb-4">
                 <CheckCircle2 size={40} className="text-green-500"/>
              </div>
              <h4 className="text-xl font-bold text-white mb-2">
                 {queue.length === 0 ? 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¯Ø¹ÙˆØ§Øª Ù…Ø¹Ù„Ù‚Ø©' : 'Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù…Ù‡Ù…Ø©! ğŸ‰'}
              </h4>
              <p className="text-white/50 text-sm mb-6">
                 {queue.length === 0 ? 'Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¯Ø¹ÙˆÙŠÙ† (Confirmed) ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¯Ø¹ÙˆØ© Ù„Ù‡Ù….' : 'ØªÙ… Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡ Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©.'}
              </p>
              <button onClick={() => toggleQueueModal(false)} className="px-6 py-3 bg-white/10 rounded-xl hover:bg-white/20 text-white font-bold transition-all">
                 Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø©
              </button>
           </div>
        ) : (
           /* Ø¹Ø±Ø¶ Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø¶ÙŠÙ */
           <div>
              <div className="flex justify-between text-xs text-white/40 mb-2 font-mono">
                 <span>Ø§Ù„Ø¶ÙŠÙ {currentIndex + 1} Ù…Ù† {queue.length}</span>
                 <span>{progress}%</span>
              </div>
              <div className="w-full h-2 bg-white/10 rounded-full mb-8 overflow-hidden">
                 <div className="h-full bg-[#25D366] transition-all duration-300" style={{ width: `${progress}%` }}></div>
              </div>

              <div className="bg-black/30 border border-white/10 rounded-2xl p-6 text-center mb-8">
                 <p className="text-xs text-[#C19D65] font-bold uppercase tracking-widest mb-2">{currentGuest.category || 'GENERAL'}</p>
                 <h2 className="text-3xl font-bold text-white mb-2">{currentGuest.name}</h2>
                 <p className="text-xl text-white/50 font-mono dir-ltr">{currentGuest.phone}</p>
              </div>

              <div className="space-y-3">
                 <button 
                    onClick={handleSend}
                    className="w-full py-4 bg-[#25D366] text-black font-black text-lg rounded-2xl hover:brightness-110 active:scale-[0.98] transition-all flex items-center justify-center gap-2 shadow-[0_0_20px_rgba(37,211,102,0.3)]"
                 >
                    <Send size={20}/> Ø¥Ø±Ø³Ø§Ù„ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨
                 </button>
                 
                 <button 
                    onClick={handleSkip}
                    className="w-full py-3 bg-transparent text-white/40 font-bold hover:text-white hover:bg-white/5 rounded-2xl transition-all flex items-center justify-center gap-2"
                 >
                    <SkipForward size={18}/> ØªØ®Ø·ÙŠ Ù‡Ø°Ø§ Ø§Ù„Ø¶ÙŠÙ
                 </button>
              </div>
           </div>
        )}

      </div>
    </div>
  );
}
</file>

<file path="components/EventCard.tsx">
import { Calendar, MapPin, ArrowLeft } from 'lucide-react';
import Link from 'next/link';

interface EventProps {
  id: string;
  name: string;
  date: string;
  location: string;
}

export default function EventCard({ id, name, date, location }: EventProps) {
  return (
    <div className="group relative bg-white/[0.03] backdrop-blur-xl p-6 rounded-2xl border border-white/5 hover:border-primary-500/30 transition-all duration-500 hover:-translate-y-1 shadow-2xl">
      <div className="flex justify-between items-center">
        <div className="space-y-3 text-right">
          {/* Ø§Ø³Ù… Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ© Ø¨Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø£Ø¨ÙŠØ¶ */}
          <h3 className="text-xl font-bold text-white group-hover:text-primary-400 transition-colors">
            {name}
          </h3>
          
          <div className="space-y-1.5">
            <div className="flex items-center gap-2 text-white/40 text-sm">
              <Calendar size={16} className="text-primary-500" />
              <span>{new Date(date).toLocaleDateString('ar-SA')}</span>
            </div>
            
            <div className="flex items-center gap-2 text-white/40 text-sm">
              <MapPin size={16} className="text-primary-500" />
              <span>{location || 'Ù…ÙˆÙ‚Ø¹ ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</span>
            </div>
          </div>
        </div>

        {/* Ø²Ø± Ø§Ù„Ø³Ù‡Ù… Ø¨ØªØµÙ…ÙŠÙ… Ø°Ù‡Ø¨ÙŠ */}
        <Link 
          href={`/dashboard/events/${id}`}
          className="bg-primary-500/10 text-primary-500 p-3 rounded-xl border border-primary-500/20 hover:bg-primary-500 hover:text-white transition-all duration-300"
        >
          <ArrowLeft size={20} />
        </Link>
      </div>
    </div>
  );
}
</file>

<file path="components/FeatureSlider.tsx">
import { Smartphone, QrCode, BarChart3, ShieldCheck, Heart, Users, CalendarCheck, Presentation } from 'lucide-react';

export default function FeatureSlider({ isWedding }: { isWedding: boolean }) {
  // Ù…Ø­ØªÙˆÙ‰ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±
  const features = isWedding ? [
    { icon: Heart, title: "Ø¯Ø¹ÙˆØ§Øª Ø§Ù„Ø¹Ø§Ø¦Ù„Ø©", desc: "Ø£Ø±Ø³Ù„ ÙƒØ±Øª Ø§Ù„Ø²ÙˆØ§Ø¬ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨ Ø¨Ù„Ù…Ø³Ø© ÙØ®Ù…Ø©." },
    { icon: QrCode, title: "ØªÙ†Ø¸ÙŠÙ… Ø§Ù„Ø¯Ø®ÙˆÙ„", desc: "Ø¨Ø§Ø±ÙƒÙˆØ¯ Ø®Ø§Øµ Ù„ÙƒÙ„ Ø¶ÙŠÙ ÙŠÙ…Ù†Ø¹ Ø§Ù„Ø§Ø²Ø¯Ø­Ø§Ù…." },
    { icon: Users, title: "Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ø§ÙˆÙ„Ø§Øª", desc: "ØªÙˆØ²ÙŠØ¹ Ø°ÙƒÙŠ Ù„Ù„Ø¶ÙŠÙˆÙ Ø­Ø³Ø¨ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª." },
    { icon: CalendarCheck, title: "ØªØ°ÙƒÙŠØ± Ø¢Ù„ÙŠ", desc: "Ø±Ø³Ø§Ø¦Ù„ ØªØ°ÙƒÙŠØ± Ù‚Ø¨Ù„ Ù„ÙŠÙ„Ø© Ø§Ù„Ø¹Ù…Ø± Ø¨Ù€ 24 Ø³Ø§Ø¹Ø©." },
  ] : [
    { icon: Presentation, title: "ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…Ø¤ØªÙ…Ø±Ø§Øª", desc: "Ù†Ø¸Ø§Ù… ØªØ³Ø¬ÙŠÙ„ Ø§Ø­ØªØ±Ø§ÙÙŠ Ù„Ù„Ù…Ø´Ø§Ø±ÙƒÙŠÙ† ÙˆØ§Ù„Ø´Ø±ÙƒØ§Ø¡." },
    { icon: QrCode, title: "Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª", desc: "Ø¥ØµØ¯Ø§Ø± Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„ØªØ¹Ø±ÙŠÙ (Badges) ÙÙˆØ± Ø§Ù„ÙˆØµÙˆÙ„." },
    { icon: BarChart3, title: "ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø­Ø¶ÙˆØ±", desc: "Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø¯Ù‚ÙŠÙ‚Ø© Ù„Ù„Ø­Ø¶ÙˆØ± ÙˆØ§Ù„ØºÙŠØ§Ø¨ Ù„Ø­Ø¸ÙŠØ§Ù‹." },
    { icon: Smartphone, title: "ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù…Ù†Ø¸Ù…", desc: "ØªØ­ÙƒÙ… ÙƒØ§Ù…Ù„ ÙÙŠ Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ© Ù…Ù† Ø¬ÙˆØ§Ù„Ùƒ." },
  ];

  return (
    <section className="py-20 px-6 relative z-10">
      <div className="max-w-7xl mx-auto">
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
          {features.map((item, idx) => (
            <div key={idx} className="bg-white/[0.03] backdrop-blur-xl border border-white/10 p-8 rounded-[2rem] hover:bg-white/[0.07] transition-all duration-500 group">
              <div className={`w-14 h-14 rounded-2xl bg-white/5 flex items-center justify-center mb-6 transition-all duration-500 ${
                isWedding ? 'text-[#C19D65] shadow-[0_0_15px_rgba(193,157,101,0.2)]' : 'text-blue-500 shadow-[0_0_15px_rgba(59,130,246,0.2)]'
              } group-hover:scale-110`}>
                <item.icon size={28} />
              </div>
              <h3 className="text-xl font-bold mb-3 text-white transition-colors duration-500">{item.title}</h3>
              <p className="text-sm text-white/40 leading-relaxed">{item.desc}</p>
            </div>
          ))}
        </div>
      </div>
    </section>
  );
}
</file>

<file path="components/HeroSection.tsx">
'use client';
import { motion } from 'framer-motion';

export default function HeroSection({ isWedding, onToggle }: any) {
  return (
    <section className="relative pt-40 pb-20 px-6 min-h-[80vh] flex flex-col items-center justify-center text-center">
      {/* Ø§Ù„Ø¶ÙˆØ¡ Ø§Ù„Ø®Ù„ÙÙŠ Ø§Ù„Ù…ØªØºÙŠØ± */}
      <div className={`absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[500px] h-[500px] rounded-full blur-[120px] opacity-20 pointer-events-none transition-all duration-1000 ${isWedding ? 'bg-[#C19D65]' : 'bg-blue-600'}`}></div>

      <div className="relative z-10 mb-12 p-2 bg-white/5 border border-white/10 rounded-full inline-flex">
        <button onClick={() => onToggle(true)} className={`px-8 py-3 rounded-full text-base font-bold transition-all ${isWedding ? 'bg-[#C19D65] text-white' : 'text-gray-400'}`}>Ø£ÙØ±Ø§Ø­ âœ¨</button>
        <button onClick={() => onToggle(false)} className={`px-8 py-3 rounded-full text-base font-bold transition-all ${!isWedding ? 'bg-blue-600 text-white' : 'text-gray-400'}`}>Ø£Ø¹Ù…Ø§Ù„ ğŸ’¼</button>
      </div>

      <motion.h1 key={isWedding ? "w" : "b"} initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className="text-6xl md:text-8xl font-bold text-white leading-tight">
        {isWedding ? (<>ÙˆØ«Ù‘Ù‚ Ù„Ø­Ø¸Ø§Øª <span className="text-[#C19D65]">Ø§Ù„ÙØ±Ø­</span></>) : (<>Ø£Ø¯Ø± Ù…Ù†Ø§Ø³Ø¨Ø§Øª <span className="text-blue-600">Ø§Ù„Ø£Ø¹Ù…Ø§Ù„</span></>)}
      </motion.h1>
    </section>
  );
}
</file>

<file path="components/Navbar.tsx">
import Link from 'next/link';
import { Sparkles } from 'lucide-react';

export default function Navbar({ isWedding }: { isWedding: boolean }) {
  return (
    <nav className="fixed top-0 w-full z-50 border-b border-white/[0.08] bg-[#0F0F12]/80 backdrop-blur-xl h-20 flex items-center transition-all duration-500">
      <div className="container mx-auto px-6 flex justify-between items-center">
        
        {/* Ø§Ù„Ø´Ø¹Ø§Ø± - ÙŠØªØºÙŠØ± Ø¨ÙŠÙ† Ø§Ù„Ø°Ù‡Ø¨ÙŠ ÙˆØ§Ù„Ø£Ø²Ø±Ù‚ */}
        <Link href="/" className="flex items-center gap-3 group">
          <div className={`p-2 rounded-xl text-white shadow-lg transition-all duration-500 ${
            isWedding 
              ? 'bg-[#C19D65] shadow-[#C19D65]/20' 
              : 'bg-blue-600 shadow-blue-600/20'
          }`}>
            <Sparkles className="w-5 h-5" />
          </div>
          <span className="text-2xl font-bold text-white tracking-tight">Ù…ÙÙ€Ø±Ø§Ø³</span>
        </Link>

        {/* Ø§Ù„Ø±ÙˆØ§Ø¨Ø· ÙˆØ§Ù„Ø£Ø²Ø±Ø§Ø± */}
        <div className="flex gap-4 items-center">
          <Link href="/login" className="text-sm font-bold text-gray-400 hover:text-white transition-colors">
            ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„
          </Link>
          
          {/* Ø²Ø± Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¢Ù† - Ø°Ù‡Ø¨ÙŠ ÙÙŠ Ø§Ù„Ø£ÙØ±Ø§Ø­ ÙˆØ£Ø²Ø±Ù‚ ÙÙŠ Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ */}
          <Link href="/dashboard" className={`text-sm font-bold px-6 py-3 rounded-full transition-all duration-500 text-white ${
            isWedding 
              ? 'bg-[#C19D65] hover:bg-[#A4824E] shadow-[0_0_20px_rgba(193,157,101,0.3)]' 
              : 'bg-blue-600 hover:bg-blue-700 shadow-[0_0_20px_rgba(37,99,235,0.3)]'
          }`}>
            Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¢Ù†
          </Link>
        </div>
      </div>
    </nav>
  );
}
</file>

<file path="components/seating/DraggableGuest.tsx">
'use client';
import { useDraggable } from '@dnd-kit/core';
import { GripVertical } from 'lucide-react';

export function DraggableGuest({ id, name, category }: { id: string, name: string, category: string }) {
  const { attributes, listeners, setNodeRef, transform } = useDraggable({
    id: id,
    data: { type: 'GUEST', name } // Ù†Ø±Ø³Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù†Ø¹Ø±Ù Ù…Ø§Ø°Ø§ Ø³Ø­Ø¨Ù†Ø§
  });

  const style = transform ? {
    transform: `translate3d(${transform.x}px, ${transform.y}px, 0)`,
  } : undefined;

  return (
    <div ref={setNodeRef} style={style} {...listeners} {...attributes} 
      className="bg-[#27272A] p-3 rounded-lg border border-white/10 flex items-center gap-2 cursor-grab hover:border-[#C19D65] transition-colors mb-2 shadow-sm touch-none">
      <GripVertical size={16} className="text-white/30" />
      <div>
        <p className="text-sm font-bold text-white">{name}</p>
        <span className="text-[10px] text-white/50 px-1.5 py-0.5 bg-white/5 rounded">{category}</span>
      </div>
    </div>
  );
}
</file>

<file path="components/seating/DroppableTable.tsx">
'use client';
import { useDroppable } from '@dnd-kit/core';
import { Users, Armchair } from 'lucide-react'; // Ø£Ø¶ÙÙ†Ø§ Ø£ÙŠÙ‚ÙˆÙ†Ø© Armchair Ù„Ù„ØµÙÙˆÙ

// ØªØ¹Ø±ÙŠÙ Ø§Ù„Ø®ØµØ§Ø¦Øµ Ø§Ù„ØªÙŠ ÙŠØ³ØªÙ‚Ø¨Ù„Ù‡Ø§ Ø§Ù„Ù…ÙƒÙˆÙ†
interface Props {
  id: string;
  name: string;
  guests: any[];
  capacity: number;
  shape: 'round' | 'theater'; // ğŸ‘ˆ Ø®Ø§ØµÙŠØ© Ø¬Ø¯ÙŠØ¯Ø© Ù…Ù‡Ù…Ø© Ø¬Ø¯Ø§Ù‹
}

export function DroppableTable({ id, name, guests = [], capacity, shape = 'round' }: Props) {
  const { setNodeRef, isOver } = useDroppable({
    id: id,
    data: { type: 'TABLE' } // Ù‡Ø°Ø§ Ù…Ø§ ÙŠØ¬Ø¹Ù„Ù‡ Ù‚Ø§Ø¨Ù„Ø§Ù‹ Ù„Ù„Ø¥ÙÙ„Ø§Øª Ø¹Ù„ÙŠÙ‡
  });

  // --- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªØµÙ…ÙŠÙ… Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø´ÙƒÙ„ ---
  
  // 1. Ø§Ù„Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©: Ø§Ù„Ø¯Ø§Ø¦Ø±ÙŠ Ù„Ù‡ Ø­Ø¬Ù… Ø«Ø§Ø¨ØªØŒ Ø§Ù„ØµÙÙˆÙ ØªØªÙ…Ø¯Ø¯
  const containerStyle = shape === 'round' 
    ? "w-48 h-48 rounded-full" 
    : "w-auto h-auto rounded-xl p-4 min-w-[120px]"; // Theater Style

  // 2. Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø© ÙÙŠ Ø§Ù„ÙˆØ³Ø·
  const Icon = shape === 'round' ? Users : Armchair;
  
  // 3. Ø­Ø³Ø§Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© Ù„Ù†Ù…Ø· Ø§Ù„ØµÙÙˆÙ (Ù…Ø«Ù„Ø§Ù‹ 5 ÙƒØ±Ø§Ø³ÙŠ ÙÙŠ Ø§Ù„ØµÙ)
  // ÙŠÙ…ÙƒÙ† Ø¬Ø¹Ù„ Ù‡Ø°Ø§ Ø§Ù„Ø±Ù‚Ù… Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ Ù„Ø§Ø­Ù‚Ø§Ù‹ØŒ Ù†Ø«Ø¨ØªÙ‡ Ø¹Ù„Ù‰ 5 Ù„Ù„ØªØ¨Ø³ÙŠØ· Ø§Ù„Ø¢Ù†
  const gridColumns = 5; 

  return (
    <div ref={setNodeRef} 
      className={`relative border-2 transition-all duration-300 m-8 flex flex-col items-center justify-center
        ${containerStyle}
        ${isOver ? 'border-[#C19D65] bg-[#C19D65]/10 scale-105 shadow-[0_0_20px_rgba(193,157,101,0.3)]' : 'border-white/10 bg-[#18181B]'}
      `}
    >
      {/* --- Ø±Ø£Ø³ Ø§Ù„Ø·Ø§ÙˆÙ„Ø©/Ø§Ù„Ù‚Ø³Ù… --- */}
      <div className={`text-center mb-2 ${shape === 'round' ? 'absolute' : ''}`}>
        <h3 className="font-bold text-white text-sm flex items-center justify-center gap-1">
            <Icon size={14} className="text-[#C19D65]"/> {name}
        </h3>
        <span className="text-[10px] text-white/40">{guests.length}/{capacity}</span>
      </div>


      {/* --- ğŸ”„ Ø§Ù„Ø±Ø³Ù… Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø´ÙƒÙ„ --- */}

      {/* Ø§Ù„Ø­Ø§Ù„Ø© 1: Ø·Ø§ÙˆÙ„Ø© Ø¯Ø§Ø¦Ø±ÙŠØ© (Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø³Ø§Ø¨Ù‚) */}
      {shape === 'round' && (
        <div className="relative w-full h-full flex items-center justify-center">
           {guests.length === 0 && <Icon size={24} className="text-white/20 absolute" />}
           {guests.map((guest: any, index: number) => {
             const angle = (index / capacity) * 2 * Math.PI;
             // ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ù‚Ø·Ø± Ù‚Ù„ÙŠÙ„Ø§Ù‹ Ù„ÙŠØªÙ†Ø§Ø³Ø¨ Ù…Ø¹ Ø§Ù„Ø­Ø¬Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯
             const x = Math.cos(angle) * 85; 
             const y = Math.sin(angle) * 85;
             return <SeatMarker key={index} x={x} y={y} guest={guest} shape="round" />;
          })}
        </div>
      )}

      {/* Ø§Ù„Ø­Ø§Ù„Ø© 2: ØµÙÙˆÙ (Ù…Ø³Ø±Ø­) - Ø¬Ø¯ÙŠØ¯ ğŸ†• */}
      {shape === 'theater' && (
        <div className="grid gap-2 mt-2" style={{ gridTemplateColumns: `repeat(${gridColumns}, 1fr)` }}>
           {/* Ù†Ù‚ÙˆÙ… Ø¨Ø¥Ù†Ø´Ø§Ø¡ Ù…ØµÙÙˆÙØ© ÙØ§Ø±ØºØ© Ø¨Ø¹Ø¯Ø¯ Ø§Ù„ÙƒØ±Ø§Ø³ÙŠ Ø§Ù„ÙƒÙ„ÙŠ (capacity)
             Ù„ÙƒÙŠ Ù†Ø±Ø³Ù… Ø§Ù„ÙƒØ±Ø§Ø³ÙŠ Ø§Ù„ÙØ§Ø±ØºØ© ÙˆØ§Ù„Ù…Ù…ØªÙ„Ø¦Ø© Ù…Ø¹Ø§Ù‹ ÙÙŠ Ø´Ø¨ÙƒØ©
           */}
           {Array.from({ length: capacity }).map((_, index) => {
             // Ù†Ø­Ø§ÙˆÙ„ Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø¶ÙŠÙ Ù„Ù‡Ø°Ø§ Ø§Ù„ÙƒØ±Ø³ÙŠ (Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„ØªØ±ØªÙŠØ¨)
             const guest = guests[index]; 
             return (
               <SeatMarker 
                 key={index} 
                 guest={guest} 
                 shape="theater" 
                 seatNumber={index + 1} // Ø±Ù‚Ù… Ø§Ù„ÙƒØ±Ø³ÙŠ Ø§Ù„Ø¸Ø§Ù‡Ø±ÙŠ
               />
             );
           })}
        </div>
      )}

    </div>
  );
}

// --- Ù…ÙƒÙˆÙ† ÙØ±Ø¹ÙŠ: Ø´ÙƒÙ„ Ø§Ù„ÙƒØ±Ø³ÙŠ (Ù†Ù‚Ø·Ø© Ø£Ùˆ Ù…Ø±Ø¨Ø¹) ---
const SeatMarker = ({ x, y, guest, shape, seatNumber }: any) => {
    const isRound = shape === 'round';
    
    const baseStyle = isRound 
        ? "absolute w-8 h-8 rounded-full border-2 shadow-lg" // Ø³ØªØ§ÙŠÙ„ Ø§Ù„Ø¯Ø§Ø¦Ø±ÙŠ
        : "relative w-8 h-8 rounded border flex text-[10px]"; // Ø³ØªØ§ÙŠÙ„ Ø§Ù„Ù…Ø±Ø¨Ø¹

    const positionStyle = isRound ? { transform: `translate(${x}px, ${y}px)` } : {};
    
    const colorStyle = guest 
        ? 'bg-blue-500 text-white border-[#18181B]' // ÙƒØ±Ø³ÙŠ Ù…Ø­Ø¬ÙˆØ²
        : 'bg-white/5 text-white/20 border-white/10'; // ÙƒØ±Ø³ÙŠ ÙØ§Ø±Øº

    return (
      <div className={`${baseStyle} items-center justify-center font-bold ${colorStyle}`} style={positionStyle} title={guest?.name}>
        {guest ? guest.name.charAt(0) : (seatNumber || '')}
      </div>
    );
};
</file>

<file path="components/seating/SeatedGuestMarker.tsx">
'use client';
import { useDraggable } from '@dnd-kit/core';

interface SeatedGuestProps {
  guest: any;
  tableId: string;
  isGrid?: boolean;
  style?: React.CSSProperties;
}

export function SeatedGuestMarker({ guest, tableId, isGrid, style }: SeatedGuestProps) {
  // 1. Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø§Ù„Ù€ Hook Ø¯Ø§Ø¦Ù…Ø§Ù‹ ÙÙŠ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© (Ø¨Ø¯ÙˆÙ† Ø´Ø±ÙˆØ· Ù‚Ø¨Ù„Ù‡)
  const { attributes, listeners, setNodeRef, transform, isDragging } = useDraggable({
    id: `seated-${guest.id}`,
    data: { 
      type: 'SEATED_GUEST', 
      guestId: guest.id, 
      originTableId: tableId,
      name: guest.name
    }
  });

  // 2. Ø­Ø³Ø§Ø¨ Ø§Ù„Ø³ØªØ§ÙŠÙ„
  const dragStyle = transform ? {
    transform: `translate3d(${transform.x}px, ${transform.y}px, 0)`,
    zIndex: 100
  } : undefined;

  // 3. Ø§Ù„Ø¥Ø±Ø¬Ø§Ø¹ (Return)
  return (
    <div 
      ref={setNodeRef} {...listeners} {...attributes}
      style={{ ...style, ...dragStyle }}
      className={`w-8 h-8 flex items-center justify-center text-[10px] font-bold border cursor-grab active:cursor-grabbing shadow-lg transition-transform hover:scale-110 z-10
        ${isGrid ? 'rounded' : 'rounded-full'} 
        ${isDragging ? 'opacity-50' : 'opacity-100'}
        bg-[#C19D65] text-black border-[#C19D65]
      `}
      title={guest.name}
    >
      {guest.name.charAt(0)}
    </div>
  );
}
</file>

<file path="components/StickyCTA.tsx">
'use client';
import { ArrowLeft } from 'lucide-react';

export default function StickyCTA({ isWedding }: { isWedding: boolean }) {
  return (
    <div className="fixed bottom-8 left-6 right-6 z-50 md:hidden">
      <button className={`w-full py-4 rounded-2xl font-bold text-white shadow-2xl flex items-center justify-center gap-3 transition-transform active:scale-95 ${
        isWedding ? 'bg-[#C19D65]' : 'bg-[#2563EB]'
      }`}>
        <span>{isWedding ? "ØµÙ…Ù… Ø¯Ø¹ÙˆØ§Øª ÙØ±Ø­Ùƒ" : "Ø§Ø¨Ø¯Ø£ ØªÙ†Ø¸ÙŠÙ… Ù…Ø¤ØªÙ…Ø±Ùƒ"}</span>
        <ArrowLeft size={20} />
      </button>
    </div>
  );
}
</file>

<file path="DEPLOY_NOW.md">
# ğŸ¯ Ø§Ø®ØªØµØ§Ø±: ÙƒÙŠÙ ØªÙ†Ø´Ø± Ø¹Ù„Ù‰ Vercel Ø§Ù„Ø¢Ù†

## 3 Ø®Ø·ÙˆØ§Øª ÙÙ‚Ø·:

### 1ï¸âƒ£ Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ Vercel
https://vercel.com/new

### 2ï¸âƒ£ Ø§Ø®ØªØ± GitHub Project
Ø§Ø®ØªØ± `event-manager` ÙˆØ§Ù†Ù‚Ø± **Deploy**

### 3ï¸âƒ£ Ø£Ø¶Ù Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø©
ÙÙŠ Vercel Dashboard:
- **Settings** â†’ **Environment Variables**
- Ø£Ø¶Ù Ù‡Ø°ÙŠÙ† Ø§Ù„Ø§Ø«Ù†ÙŠÙ† Ù…Ù† Supabase:
  ```
  NEXT_PUBLIC_SUPABASE_URL = https://...
  NEXT_PUBLIC_SUPABASE_ANON_KEY = eyJhbGc...
  ```
- Ø§Ø¶ØºØ· **Save**
- Ø¹Ø¯ Ù„Ù„Ù€ **Deployments**
- Ø§Ù†Ù‚Ø± **Redeploy** Ø¹Ù„Ù‰ Ø£Ø­Ø¯Ø« Ù†Ø´Ø±

âœ… **ØªÙ…! Ù…ÙˆÙ‚Ø¹Ùƒ Ø­ÙŠ Ø§Ù„Ø¢Ù†!** ğŸš€

---

## Ø£ÙŠÙ† Ø£Ø¬Ø¯ Supabase KeysØŸ

1. Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ supabase.com/dashboard
2. Ø§ÙØªØ­ Ù…Ø´Ø±ÙˆØ¹Ùƒ
3. Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ **Settings** â†’ **API**
4. Ø§Ù†Ø³Ø®:
   - `Project URL`
   - `Anon Key`
5. Ø£Ù„ØµÙ‚Ù‡Ù…Ø§ ÙÙŠ Vercel

---

## Ù…Ù† Ø§Ù„Ø¢Ù† ÙØµØ§Ø¹Ø¯Ø§Ù‹:

```bash
git push origin main
# â†’ Vercel ÙŠÙ†Ø´Ø± ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ âœ¨
```

---

## ğŸ“ Ù…ÙˆÙ‚Ø¹Ùƒ Ø§Ù„Ø¬Ø¯ÙŠØ¯:
`https://event-manager-xxx.vercel.app`

**Ø§Ø³ØªÙ…ØªØ¹!** ğŸ‰
</file>

<file path="DEPLOY_QUICK_START.md">
# ğŸš€ Ù†Ø´Ø± Meras Ø¹Ù„Ù‰ Vercel (Ø®Ø·ÙˆØ§Øª Ø³Ø±ÙŠØ¹Ø© Ø¬Ø¯Ø§Ù‹)

## âš¡ Ø§Ù„Ø®ÙŠØ§Ø± 1: Ø§Ù„Ù†Ø´Ø± Ø¨Ø³Ù‡ÙˆÙ„Ø© (Ù…Ø¹ Git Integration)

### Ø§Ù„Ø®Ø·ÙˆØ© 1ï¸âƒ£
1. Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ https://vercel.com/new
2. Ø§Ø®ØªØ± `event-manager` Ù…Ù† GitHub
3. Ø§Ø¶ØºØ· **Deploy**

### Ø§Ù„Ø®Ø·ÙˆØ© 2ï¸âƒ£
Ø§Ù†Ø³Ø® Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Supabase:
```
NEXT_PUBLIC_SUPABASE_URL
NEXT_PUBLIC_SUPABASE_ANON_KEY
```

### Ø§Ù„Ø®Ø·ÙˆØ© 3ï¸âƒ£
ÙÙŠ Vercel Dashboard:
- Settings â†’ Environment Variables
- Ø£Ø¶Ù Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª
- Save
- Ø¹Ø¯ Ù„Ù„Ù€ Deployments ÙˆØ§Ù†Ù‚Ø± **Redeploy**

âœ… **ØªÙ…! Ù…ÙˆÙ‚Ø¹Ùƒ Ù…Ø¨Ø§Ø´Ø±** ğŸ‰

---

## âš¡ Ø§Ù„Ø®ÙŠØ§Ø± 2: Ø§Ù„Ù†Ø´Ø± Ø¹Ø¨Ø± CLI (Ø§Ù„Ù…ØªÙ‚Ø¯Ù…)

```bash
# Ø¹Ù„Ù‰ Windows
./deploy.bat

# Ø¹Ù„Ù‰ Mac/Linux
bash deploy.sh
```

---

## ğŸ“Š Ø§Ù„Ø­Ø§Ù„Ø©

- âœ… Ø§Ù„ÙƒÙˆØ¯ Ø¬Ø§Ù‡Ø² Ø¹Ù„Ù‰ GitHub
- âœ… Vercel Ù…ÙØ¹Ø¯Ø©
- âœ… Ø§Ù„Ø¨Ù†Ø§Ø¡ Ù†Ø§Ø¬Ø­
- âœ… Ù„Ø§ Ø£Ø®Ø·Ø§Ø¡
- â³ **Ø§Ù„Ø¢Ù†: Ø£Ø¶Ù Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø© ÙÙ‚Ø·!**

---

## ğŸ”— Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ù…Ù‡Ù…Ø©

- **GitHub**: https://github.com/D7mi1/event-manager
- **Vercel**: https://vercel.com
- **Supabase**: https://supabase.com
- **Ø¯Ù„ÙŠÙ„ ÙƒØ§Ù…Ù„**: [VERCEL_GUIDE_AR.md](./VERCEL_GUIDE_AR.md)

---

## ğŸ“ Ø§Ù„Ø¯Ø¹Ù…

Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø´ÙƒÙ„Ø© Ø§Ù„ØªÙŠ ØªÙˆØ§Ø¬Ù‡Ù‡Ø§:

- [âŒ Ø§Ù„Ù†Ø´Ø± ÙØ´Ù„](./VERCEL_GUIDE_AR.md#%D8%A3%D8%AE%D8%B7%D8%A7%D8%A1)
- [â“ Ø£ÙŠÙ† Ø£Ø¬Ø¯ Supabase KeysØŸ](./VERCEL_GUIDE_AR.md#%D8%A7%D9%84%D8%AE%D8%B7%D9%88%D8%A9-1-%D8%AA%D8%B3%D8%AC%D9%8A%D9%84-%D8%A7%D9%84%D8%AF%D8%AE%D9%88%D9%84-%D8%A5%D9%84%D9%89-supabase)
- [ğŸŒ Ø¥Ø¶Ø§ÙØ© Ù†Ø·Ø§Ù‚ Ø®Ø§Øµ](./VERCEL_GUIDE_AR.md#-Ø¥Ø¶Ø§ÙØ©-Ø§Ù„Ù†Ø·Ø§Ù‚-Ø§Ù„Ø®Ø§Øµ-Ø¨Ùƒ-Ø§Ø®ØªÙŠØ§Ø±ÙŠ)

---

## ğŸ¯ Ø§Ù„Ø®Ø·ÙˆØ© Ø§Ù„ØªØ§Ù„ÙŠØ©

```bash
# Ø¨Ø¹Ø¯ Ù†Ø´Ø± Ø£ÙˆÙ„ Ù…Ø±Ø©ØŒ ÙƒÙ„ push Ø¥Ù„Ù‰ main Ø³ÙŠÙ†Ø´Ø± ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹:
git add .
git commit -m "update: new features"
git push origin main
# ğŸš€ Vercel ÙŠÙ†Ø´Ø± ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹!
```

**Ø§Ø³ØªÙ…ØªØ¹! ğŸŠ**
</file>

<file path="deploy.bat">
@echo off
REM Ø¯Ù„ÙŠÙ„ Ø§Ù„Ù†Ø´Ø± Ø§Ù„Ø³Ø±ÙŠØ¹ Ø¹Ù„Ù‰ Vercel (Windows)

echo.
echo ğŸš€ Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù†Ø´Ø± Meras Events Ø¹Ù„Ù‰ Vercel
echo ================================================
echo.

REM Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† npm
where npm >nul 2>nul
if %ERRORLEVEL% NEQ 0 (
    echo âŒ npm ØºÙŠØ± Ù…Ø«Ø¨Øª. ÙŠØ±Ø¬Ù‰ ØªØ«Ø¨ÙŠØª Node.js Ø£ÙˆÙ„Ø§Ù‹
    pause
    exit /b 1
)

echo âœ… npm Ù…ÙˆØ¬ÙˆØ¯
echo.

REM Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Vercel CLI
where vercel >nul 2>nul
if %ERRORLEVEL% NEQ 0 (
    echo ğŸ“¦ ØªØ«Ø¨ÙŠØª Vercel CLI...
    call npm install -g vercel
)

echo âœ… Vercel CLI Ù…ÙˆØ¬ÙˆØ¯
echo.

echo ğŸ” ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¥Ù„Ù‰ Vercel...
call vercel login

echo.
echo ğŸ“ Ù†Ø´Ø± Ø§Ù„Ù…Ø´Ø±ÙˆØ¹...
call vercel

echo.
echo âš ï¸  Ø§Ù„Ø®Ø·ÙˆØ© Ø§Ù„ØªØ§Ù„ÙŠØ© Ø§Ù„Ù…Ù‡Ù…Ø©:
echo 1. Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ https://vercel.com/dashboard
echo 2. Ø§ÙØªØ­ Ù…Ø´Ø±ÙˆØ¹Ùƒ
echo 3. Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ Settings â†’ Environment Variables
echo 4. Ø£Ø¶Ù Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„ØªØ§Ù„ÙŠØ©:
echo.
echo    NEXT_PUBLIC_SUPABASE_URL = https://your-project.supabase.co
echo    NEXT_PUBLIC_SUPABASE_ANON_KEY = your-anon-key
echo.
echo 5. Ø§Ø¶ØºØ· Save
echo 6. Ø¹Ø¯ Ù„Ù„Ù€ Deployments ÙˆØ§Ù†Ù‚Ø± Redeploy Ø¹Ù„Ù‰ Ø£Ø­Ø¯Ø« Ù†Ø´Ø±
echo.
echo âœ… ØªÙ…! Ù…ÙˆÙ‚Ø¹Ùƒ Ø§Ù„Ø¢Ù† Ù…Ø¨Ø§Ø´Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª!
echo.
pause
</file>

<file path="deploy.sh">
#!/bin/bash
# Ø¯Ù„ÙŠÙ„ Ø§Ù„Ù†Ø´Ø± Ø§Ù„Ø³Ø±ÙŠØ¹ Ø¹Ù„Ù‰ Vercel

echo "ğŸš€ Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù†Ø´Ø± Meras Events Ø¹Ù„Ù‰ Vercel"
echo "================================================"
echo ""

# Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† npm
if ! command -v npm &> /dev/null; then
    echo "âŒ npm ØºÙŠØ± Ù…Ø«Ø¨Øª. ÙŠØ±Ø¬Ù‰ ØªØ«Ø¨ÙŠØª Node.js Ø£ÙˆÙ„Ø§Ù‹"
    exit 1
fi

echo "âœ… npm Ù…ÙˆØ¬ÙˆØ¯"

# Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Vercel CLI
if ! command -v vercel &> /dev/null; then
    echo ""
    echo "ğŸ“¦ ØªØ«Ø¨ÙŠØª Vercel CLI..."
    npm install -g vercel
fi

echo "âœ… Vercel CLI Ù…ÙˆØ¬ÙˆØ¯"
echo ""

echo "ğŸ” ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¥Ù„Ù‰ Vercel..."
vercel login

echo ""
echo "ğŸ“ Ù†Ø´Ø± Ø§Ù„Ù…Ø´Ø±ÙˆØ¹..."
vercel

echo ""
echo "âš ï¸  Ø§Ù„Ø®Ø·ÙˆØ© Ø§Ù„ØªØ§Ù„ÙŠØ© Ø§Ù„Ù…Ù‡Ù…Ø©:"
echo "1. Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ https://vercel.com/dashboard"
echo "2. Ø§ÙØªØ­ Ù…Ø´Ø±ÙˆØ¹Ùƒ"
echo "3. Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ Settings â†’ Environment Variables"
echo "4. Ø£Ø¶Ù Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„ØªØ§Ù„ÙŠØ©:"
echo ""
echo "   NEXT_PUBLIC_SUPABASE_URL = https://your-project.supabase.co"
echo "   NEXT_PUBLIC_SUPABASE_ANON_KEY = your-anon-key"
echo ""
echo "5. Ø§Ø¶ØºØ· Save"
echo "6. Ø¹Ø¯ Ù„Ù„Ù€ Deployments ÙˆØ§Ù†Ù‚Ø± Redeploy Ø¹Ù„Ù‰ Ø£Ø­Ø¯Ø« Ù†Ø´Ø±"
echo ""
echo "âœ… ØªÙ…! Ù…ÙˆÙ‚Ø¹Ùƒ Ø§Ù„Ø¢Ù† Ù…Ø¨Ø§Ø´Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª!"
</file>

<file path="DEPLOYMENT_CHECKLIST.js">
#!/usr/bin/env node

/**
 * ğŸ‰ MERAS EVENTS - DEPLOYMENT CHECKLIST
 * 
 * ØªÙ… Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ Ù„Ù„Ù†Ø´Ø± Ø¹Ù„Ù‰ Vercel
 * Project is 100% ready for Vercel deployment
 */

console.log(`
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                        â•‘
â•‘   ğŸ‰ MERAS EVENTS - Ø¬Ø§Ù‡Ø² Ù„Ù„Ù†Ø´Ø± Ø¹Ù„Ù‰ Vercel!         â•‘
â•‘                                                        â•‘
â•‘   âœ… Build: Ù†Ø§Ø¬Ø­ Ø¨Ø¯ÙˆÙ† Ø£Ø®Ø·Ø§Ø¡                          â•‘
â•‘   âœ… Tests: 30/30 Ø§Ø®ØªØ¨Ø§Ø± Ù†Ø§Ø¬Ø­                        â•‘
â•‘   âœ… TypeScript: 0 Ø£Ø®Ø·Ø§Ø¡                             â•‘
â•‘   âœ… Documentation: 8 Ù…Ù„ÙØ§Øª Ø´Ø§Ù…Ù„Ø©                     â•‘
â•‘   âœ… GitHub: Ø§Ù„ÙƒÙˆØ¯ Ù…Ø±ÙÙˆØ¹ ÙˆÙ…ÙØ­Ø¯Ù‘Ø«                    â•‘
â•‘   âœ… Vercel: Ù…ÙÙ‡ÙŠØ£Ø© ÙˆØ¬Ø§Ù‡Ø²Ø©                          â•‘
â•‘                                                        â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ù‡Ù…Ø© Ù„Ù„Ù†Ø´Ø±:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  1. DEPLOY_NOW.md              â­ Ø§Ù‚Ø±Ø£ Ù‡Ø°Ø§ Ø£ÙˆÙ„Ø§Ù‹ (3 Ø®Ø·ÙˆØ§Øª)
  2. VERCEL_GUIDE_AR.md         ğŸ“– Ø¯Ù„ÙŠÙ„ Ø´Ø§Ù…Ù„ Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
  3. DOCUMENTATION_INDEX.md     ğŸ“š ÙÙ‡Ø±Ø³ ÙƒÙ„ Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª
  4. PROJECT_SUMMARY.md         ğŸ“Š Ù…Ù„Ø®Øµ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ
  5. READY_FOR_DEPLOYMENT.md    âœ… Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø´Ø±

ğŸš€ Ø®Ø·ÙˆØ§Øª Ø§Ù„Ù†Ø´Ø± Ø§Ù„Ø³Ø±ÙŠØ¹Ø©:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  Ø§Ù„Ø®Ø·ÙˆØ© 1: Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ vercel.com/new
  Ø§Ù„Ø®Ø·ÙˆØ© 2: Ø§Ø®ØªØ± event-manager Ù…Ù† GitHub
  Ø§Ù„Ø®Ø·ÙˆØ© 3: Ø£Ø¶Ù Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø© Ù…Ù† Supabase
  Ø§Ù„Ø®Ø·ÙˆØ© 4: Ø§Ø¶ØºØ· Deploy â†’ Redeploy

â±ï¸  Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªÙˆÙ‚Ø¹: 10 Ø¯Ù‚Ø§Ø¦Ù‚ ÙÙ‚Ø·

ğŸ”— Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ù…Ù‡Ù…Ø©:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  GitHub:   https://github.com/D7mi1/event-manager
  Vercel:   https://vercel.com/new
  Supabase: https://supabase.com/dashboard

âœ¨ Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  ğŸ“ Ù…Ø´Ø±ÙˆØ¹ Next.js 16.1.0 Ù…ÙƒØªÙ…Ù„
  ğŸ—„ï¸  Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Supabase Ù…ØªØµÙ„Ø©
  ğŸ” TypeScript Ù…Ø¹ØªÙ…Ø¯ (0 Ø£Ø®Ø·Ø§Ø¡)
  âœ… Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ù†Ø§Ø¬Ø­Ø©
  ğŸ“š ØªÙˆØ«ÙŠÙ‚ Ø´Ø§Ù…Ù„ ÙˆÙƒØ§Ù…Ù„
  ğŸŒ Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¥Ø·Ù„Ø§Ù‚ Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª

ğŸ’¡ Ù†ØµÙŠØ­Ø© Ù…Ù‡Ù…Ø©:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  Ø¨Ø¹Ø¯ Ø§Ù„Ù†Ø´Ø± Ø§Ù„Ø£ÙˆÙ„ØŒ ÙƒÙ„ git push Ø³ÙŠØªÙ… Ù†Ø´Ø±Ù‡ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹:
  
  $ git push origin main
  # â†’ Vercel ÙŠÙ†Ø´Ø± ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ âœ¨

ğŸŠ Ù…Ø¨Ø±ÙˆÙƒ! ØªØ·Ø¨ÙŠÙ‚Ùƒ Ø¹Ù„Ù‰ Ø¨Ø¹Ø¯ 3 Ø®Ø·ÙˆØ§Øª Ù…Ù† Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª!

ğŸ‘‰ Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¢Ù†: Ø§Ù‚Ø±Ø£ DEPLOY_NOW.md

`);
</file>

<file path="DEPLOYMENT.md">
# ğŸš€ Ù†Ø´Ø± Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¹Ù„Ù‰ Vercel

## Ø§Ù„Ø®Ø·ÙˆØ§Øª Ø§Ù„Ø³Ø±ÙŠØ¹Ø© Ù„Ù„Ù†Ø´Ø±:

### **Ø§Ù„Ø®Ø·ÙˆØ© 1: Ø¥Ø¹Ø¯Ø§Ø¯ Vercel CLI**
```bash
npm install -g vercel
```

### **Ø§Ù„Ø®Ø·ÙˆØ© 2: ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¥Ù„Ù‰ Vercel**
```bash
vercel login
```
Ø³ÙŠÙØªØ­ Ù…ØªØµÙØ­ Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„. Ø§Ø³ØªØ®Ø¯Ù… Ø­Ø³Ø§Ø¨Ùƒ Ø¹Ù„Ù‰ Vercel (Ø£Ùˆ Ø§Ù†Ø´Ø¦ ÙˆØ§Ø­Ø¯Ø§Ù‹ Ø¬Ø¯ÙŠØ¯Ø§Ù‹).

### **Ø§Ù„Ø®Ø·ÙˆØ© 3: Ù†Ø´Ø± Ø§Ù„Ù…Ø´Ø±ÙˆØ¹**
```bash
vercel
```

Ø³ÙŠØ³Ø£Ù„ Ø¹Ù†:
- **Project name**: Ø§Ø®ØªØ± Ø§Ø³Ù…Ø§Ù‹ (Ù…Ø«Ù„Ø§Ù‹: `meras-events`)
- **Framework**: Next.js (Ø³ÙŠØªÙ… Ø§ÙƒØªØ´Ø§ÙÙ‡ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹)
- **Root directory**: `. (ÙƒØ±ÙŠÙ†Øª)

### **Ø§Ù„Ø®Ø·ÙˆØ© 4: Ø¥Ø¶Ø§ÙØ© Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø©**

Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ https://vercel.com/dashboard ÙˆØ§ÙØªØ­ Ù…Ø´Ø±ÙˆØ¹ÙƒØŒ Ø«Ù…:

1. **Settings** â†’ **Environment Variables**
2. Ø£Ø¶Ù Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„ØªØ§Ù„ÙŠØ©:

```
NEXT_PUBLIC_SUPABASE_URL = https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY = eyJhbGc...
NEXT_PUBLIC_SENTRY_DSN = https://xxx@sentry.io/yyy
```

3. Ø§Ø¶ØºØ· **Save**

### **Ø§Ù„Ø®Ø·ÙˆØ© 5: Ø§Ù„Ù†Ø´Ø± Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠ**
```bash
vercel --prod
```

---

## ğŸ“± Ø®Ø·ÙˆØ§Øª Ø¥Ø¶Ø§ÙÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠØ©):

### **Ø¥Ø°Ø§ ÙƒØ§Ù† Ù„Ø¯ÙŠÙƒ Ù†Ø·Ø§Ù‚ (Domain):**
1. ÙÙŠ Vercel Dashboard â†’ Project Settings â†’ Domains
2. Ø£Ø¶Ù Ù†Ø·Ø§Ù‚Ùƒ ÙˆØ£ÙƒÙ…Ù„ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† DNS

### **ØªÙØ¹ÙŠÙ„ Git Integration (Ø§Ù„ØªÙˆØµÙŠØ©):**
```bash
# Ø±Ø¨Ø· GitHub Ø¨Ù€ Vercel
# Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ https://vercel.com/new ÙˆØ­Ø¯Ø¯ Ù…Ø´Ø±ÙˆØ¹Ùƒ Ø¹Ù„Ù‰ GitHub
# Ø³ØªØªÙ… Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ù†Ø´Ø± ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù†Ø¯ ÙƒÙ„ push Ø¥Ù„Ù‰ main branch
```

### **Ø§Ù„Ù…Ø²Ø§ÙŠØ§:**
âœ… Ù†Ø´Ø± ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¹Ù†Ø¯ ØªØ­Ø¯ÙŠØ« GitHub  
âœ… Preview deployments Ù„ÙƒÙ„ Pull Request  
âœ… CDN Ø¹Ø§Ù„Ù…ÙŠ Ù„Ù„Ø³Ø±Ø¹Ø© Ø§Ù„Ø¹Ø§Ù„ÙŠØ©  
âœ… Ù‚Ø§Ø¨Ù„ÙŠØ© Ø§Ù„Ù…Ø§Ø³Ø­ Ø§Ù„Ø¶ÙˆØ¦ÙŠ (Serverless Functions)  
âœ… HTTPS ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹  

---

## ğŸ”§ Ø§Ø³ØªÙƒØ´Ø§Ù Ø§Ù„Ø£Ø®Ø·Ø§Ø¡:

### Ø¥Ø°Ø§ ÙØ´Ù„ Ø§Ù„Ø¨Ù†Ø§Ø¡:
```bash
vercel logs
```

### Ù„Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù†Ø´Ø±:
```bash
vercel --prod --force
```

### Ù„Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ù†Ø³Ø®Ø© Ø³Ø§Ø¨Ù‚Ø©:
ÙÙŠ Vercel Dashboard â†’ Deployments â†’ Ø§Ø®ØªØ± Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© â†’ Promote to Production

---

## âœ… Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹:

Ø¨Ø¹Ø¯ Ø§Ù„Ù†Ø´Ø± Ø§Ù„Ù†Ø§Ø¬Ø­ØŒ Ø³ØªØ­ØµÙ„ Ø¹Ù„Ù‰ Ø±Ø§Ø¨Ø· Ù…Ø«Ù„:
```
https://your-project.vercel.app
```

---

## ğŸ“§ Ø¯Ø¹Ù… Vercel:

- **Docs**: https://vercel.com/docs
- **Support**: https://vercel.com/support
- **Community**: https://github.com/vercel/community
</file>

<file path="DOCUMENTATION_INDEX.md">
# ğŸ“š Ø¯Ù„ÙŠÙ„ Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª Ø§Ù„ÙƒØ§Ù…Ù„

## ğŸš€ Ù„Ù„Ù†Ø´Ø± Ø§Ù„Ø¢Ù†

| Ø§Ù„Ù…Ù„Ù | Ø§Ù„ÙˆØµÙ | Ø§Ù„ÙˆÙ‚Øª |
|------|------|------|
| **[DEPLOY_NOW.md](./DEPLOY_NOW.md)** | âœ¨ Ø§Ù„Ø£Ø³Ø±Ø¹ ÙˆØ§Ù„Ø£Ø³Ù‡Ù„ | 3 Ø¯Ù‚Ø§Ø¦Ù‚ |
| **[DEPLOY_QUICK_START.md](./DEPLOY_QUICK_START.md)** | Ø§Ù„Ø¨Ø¯Ø¡ Ø§Ù„Ø³Ø±ÙŠØ¹ | 5 Ø¯Ù‚Ø§Ø¦Ù‚ |
| **[DEPLOYMENT.md](./DEPLOYMENT.md)** | Ø¯Ù„ÙŠÙ„ Ø§Ù„Ù†Ø´Ø± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ | 10 Ø¯Ù‚Ø§Ø¦Ù‚ |
| **[VERCEL_GUIDE_AR.md](./VERCEL_GUIDE_AR.md)** | Ø¯Ù„ÙŠÙ„ Ø´Ø§Ù…Ù„ Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© | 20 Ø¯Ù‚ÙŠÙ‚Ø© |
| **[READY_FOR_DEPLOYMENT.md](./READY_FOR_DEPLOYMENT.md)** | Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© | 5 Ø¯Ù‚Ø§Ø¦Ù‚ |

### ğŸ‘ˆ **Ø§Ø¨Ø¯Ø£ Ù…Ù† Ù‡Ù†Ø§:** [DEPLOY_NOW.md](./DEPLOY_NOW.md)

---

## ğŸ“– Ù„ÙÙ‡Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹

| Ø§Ù„Ù…Ù„Ù | Ø§Ù„ÙˆØµÙ |
|------|------|
| **[README.md](./README.md)** | ÙˆØµÙ Ø¹Ø§Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ |
| **[PROJECT_CONTEXT.md](./PROJECT_CONTEXT.md)** | Ø§Ù„Ø³ÙŠØ§Ù‚ ÙˆØ§Ù„Ø®Ù„ÙÙŠØ© |
| **[DOCUMENTATION.md](./DOCUMENTATION.md)** | ØªÙˆØ«ÙŠÙ‚ Ø´Ø§Ù…Ù„ (400+ Ø³Ø·Ø±) |
| **[API_DOCUMENTATION.md](./API_DOCUMENTATION.md)** | Ù…Ø±Ø¬Ø¹ API Ø§Ù„ÙƒØ§Ù…Ù„ |

---

## âœ… Ù„Ù„ØªØ­Ù‚Ù‚ ÙˆØ§Ù„Ø§Ø®ØªØ¨Ø§Ø±

| Ø§Ù„Ù…Ù„Ù | Ø§Ù„ÙˆØµÙ |
|------|------|
| **[VALIDATION_IMPLEMENTATION.md](./VALIDATION_IMPLEMENTATION.md)** | ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª |
| **app/utils/validation.test.ts** | 12 Ø§Ø®ØªØ¨Ø§Ø± Ù„Ù„Ø¯ÙˆØ§Ù„ |
| **app/utils/schemas.test.ts** | 18 Ø§Ø®ØªØ¨Ø§Ø± Ù„Ù„Ù€ Zod schemas |

---

## âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª

| Ø§Ù„Ù…Ù„Ù | Ø§Ù„ÙˆØµÙ |
|------|------|
| **vercel.json** | Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Vercel |
| **next.config.ts** | Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Next.js |
| **tailwind.config.ts** | Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª CSS |
| **.env.example** | Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø© (Ù†Ù…ÙˆØ°Ø¬) |

---

## ğŸ› ï¸ Ø§Ù„Ø³ÙƒØ±ÙŠØ¨ØªØ§Øª

```bash
# Windows
./deploy.bat

# Mac/Linux
bash deploy.sh

# ÙŠØ¯ÙˆÙŠØ§Ù‹
npm run build   # Ø¨Ù†Ø§Ø¡ Ù„Ù„Ø¥Ù†ØªØ§Ø¬
npm run dev     # ØªØ·ÙˆÙŠØ± Ù…Ø­Ù„ÙŠ
npm test        # ØªØ´ØºÙŠÙ„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª
```

---

## ğŸ“Š Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ù‡Ù…Ø©

### Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
```
app/
â”œâ”€â”€ register/[id]/page.tsx       â† ØµÙØ­Ø© Ø§Ù„ØªØ³Ø¬ÙŠÙ„ (Ù…Ø¹ validation)
â”œâ”€â”€ t/[id]/page.tsx             â† ØµÙØ­Ø© Ø§Ù„ØªØ°ÙƒØ±Ø© (Ù…Ø¹ RSVP)
â”œâ”€â”€ dashboard/                  â† Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø§Ù„Ùƒ
â”œâ”€â”€ scan/                        â† Ù…Ø§Ø³Ø­ Ø¶ÙˆØ¦ÙŠ
â””â”€â”€ utils/
    â”œâ”€â”€ validation.ts           â† 15+ Ø¯ÙˆØ§Ù„ ØªØ­Ù‚Ù‚
    â”œâ”€â”€ schemas.ts              â† Zod schemas
    â””â”€â”€ sentry.ts               â† ØªØªØ¨Ø¹ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡
```

### Ø§Ù„Ø®Ø¯Ù…Ø§Øª
```
hooks/
â”œâ”€â”€ useEvent.ts                 â† Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ©
â”œâ”€â”€ useEventWithCache.ts        â† Ù…Ø¹ SWR caching
â”œâ”€â”€ useTicket.ts                â† Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ°ÙƒØ±Ø©
â””â”€â”€ useTicketWithCache.ts       â† Ù…Ø¹ SWR caching
```

---

## ğŸ¯ Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª

### Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø¹Ø§Ø¯ÙŠ:
```
/ â†’ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
/pricing â†’ Ø§Ù„Ø£Ø³Ø¹Ø§Ø±
/login â†’ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
/register/[id] â†’ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ù„Ù„ÙØ¹Ø§Ù„ÙŠØ©
/t/[id] â†’ Ø¹Ø±Ø¶ Ø§Ù„ØªØ°ÙƒØ±Ø©
```

### Ù„Ù„Ù…Ø§Ù„Ùƒ/Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠ:
```
/dashboard â†’ Ø§Ù„Ù„ÙˆØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
/dashboard/events/[id] â†’ ØªÙØ§ØµÙŠÙ„ Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ©
/dashboard/events/[id]/edit â†’ ØªØ¹Ø¯ÙŠÙ„
/dashboard/events/[id]/seating â†’ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ù‚Ø§Ø¹Ø¯
/scan/[id] â†’ Ù…Ø§Ø³Ø­ QR
/staff/[id] â†’ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ø§Ø¶Ø±ÙŠÙ†
```

---

## ğŸ” Ø§Ù„Ø£Ù…Ø§Ù† ÙˆØ§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

- âœ… Supabase Row Level Security (RLS)
- âœ… Zod validation Ù‚Ø¨Ù„ Ø§Ù„Ø­ÙØ¸
- âœ… HTTP-only cookies
- âœ… Ù…ØªØºÙŠØ±Ø§Øª Ø¨ÙŠØ¦Ø© Ù…Ø­Ù…ÙŠØ©
- âœ… Sentry Ù„Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡

---

## ğŸŒŸ Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª

- âœ¨ Ø¯Ø¹Ù… Ø¹Ø±Ø¨ÙŠ ÙƒØ§Ù…Ù„
- ğŸ¨ ØªØµÙ…ÙŠÙ… Ø§Ø­ØªØ±Ø§ÙÙŠ (Tailwind + Framer Motion)
- ğŸ“± Responsive design
- âš¡ SWR caching Ù„Ù„Ø£Ø¯Ø§Ø¡
- ğŸ” QR code generation
- ğŸ« PDF ticket download
- ğŸ“Š Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ù…Ø¨Ø§Ø´Ø±Ø©
- ğŸŒ Multi-language ready

---

## ğŸ“ Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ

| Ø§Ù„Ù…Ø´ÙƒÙ„Ø© | Ø§Ù„Ø­Ù„ |
|--------|------|
| Ø§Ù„Ø¨Ù†Ø§Ø¡ ÙØ´Ù„ | Ø§Ù‚Ø±Ø£: [VERCEL_GUIDE_AR.md](./VERCEL_GUIDE_AR.md#-Ø§Ø³ØªÙƒØ´Ø§Ù-Ø§Ù„Ø£Ø®Ø·Ø§Ø¡) |
| Ø£ÙŠÙ† Ø§Ù„Ù€ keysØŸ | Ø§Ù‚Ø±Ø£: [DEPLOY_NOW.md](./DEPLOY_NOW.md#Ø£ÙŠÙ†-Ø£Ø¬Ø¯-supabase-keys) |
| Ø£Ø±ÙŠØ¯ Ù†Ø·Ø§Ù‚ | Ø§Ù‚Ø±Ø£: [VERCEL_GUIDE_AR.md](./VERCEL_GUIDE_AR.md#-Ø¥Ø¶Ø§ÙØ©-Ø§Ù„Ù†Ø·Ø§Ù‚-Ø§Ù„Ø®Ø§Øµ-Ø¨Ùƒ-Ø§Ø®ØªÙŠØ§Ø±ÙŠ) |
| ÙƒÙŠÙ Ø£Ø®ØªØ¨Ø±ØŸ | Ø§Ù‚Ø±Ø£: [DOCUMENTATION.md](./DOCUMENTATION.md) |

---

## ğŸ”— Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ©

- **GitHub**: https://github.com/D7mi1/event-manager
- **Vercel**: https://vercel.com
- **Supabase**: https://supabase.com
- **Next.js**: https://nextjs.org
- **Tailwind CSS**: https://tailwindcss.com

---

## âœ¨ Ø§Ù„ØªØ§Ù„ÙŠ

1. **Ø§Ù‚Ø±Ø£**: [DEPLOY_NOW.md](./DEPLOY_NOW.md)
2. **Ø§Ù†Ø´Ø±**: Ø§ØªØ¨Ø¹ Ø§Ù„Ø®Ø·ÙˆØ§Øª
3. **Ø§Ø³ØªÙ…ØªØ¹**: Ù…ÙˆÙ‚Ø¹Ùƒ Ø­ÙŠ! ğŸ‰

**Ø³ÙˆØ§Ù„ØŸ Ø§Ù‚Ø±Ø£ Ø§Ù„Ù…Ù„ÙØ§Øª Ø£Ø¹Ù„Ø§Ù‡!**
</file>

<file path="DOCUMENTATION.md">
# Meras Event Platform - Documentation

## ğŸ“‹ Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹

Meras Ù‡ÙŠ Ù…Ù†ØµØ© Ù…ØªØ®ØµØµØ© Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ§Øª ÙˆØ§Ù„Ø­ÙÙ„Ø§Øª (Ø£ÙØ±Ø§Ø­ ÙˆÙØ¹Ø§Ù„ÙŠØ§Øª Ø£Ø¹Ù…Ø§Ù„). ØªØªÙŠØ­ Ø§Ù„Ù…Ù†ØµØ© Ù„Ù„Ù…Ù†Ø¸Ù…ÙŠÙ† Ø¥Ù†Ø´Ø§Ø¡ ÙØ¹Ø§Ù„ÙŠØ§ØªØŒ Ø¥Ø¯Ø§Ø±Ø© Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„Ø¶ÙŠÙˆÙØŒ ÙˆØ¥ØµØ¯Ø§Ø± ØªØ°Ø§ÙƒØ± Ø±Ù‚Ù…ÙŠØ©.

---

## ğŸ—ï¸ Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„Ù…Ø¹Ù…Ø§Ø±ÙŠØ©

```
app/
â”œâ”€â”€ config/          # Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ÙˆØ§Ù„Ø«ÙˆØ§Ø¨Øª
â”œâ”€â”€ hooks/           # Custom React Hooks
â”œâ”€â”€ utils/           # Ø¯ÙˆØ§Ù„ Ù…Ø³Ø§Ø¹Ø¯Ø© ÙˆØ§Ù„ØªØ­Ù‚Ù‚
â”œâ”€â”€ components/      # Ù…ÙƒÙˆÙ†Ø§Øª React
â”œâ”€â”€ dashboard/       # ØµÙØ­Ø§Øª Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
â”œâ”€â”€ register/[id]/   # ØµÙØ­Ø© Ø§Ù„ØªØ³Ø¬ÙŠÙ„ ÙÙŠ ÙØ¹Ø§Ù„ÙŠØ©
â”œâ”€â”€ t/[id]/          # ØµÙØ­Ø© Ø¹Ø±Ø¶ Ø§Ù„ØªØ°ÙƒØ±Ø©
â””â”€â”€ api/             # API routes
```

---

## ğŸš€ Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©

### 1. Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ§Øª
- âœ… Ø¥Ù†Ø´Ø§Ø¡ ÙØ¹Ø§Ù„ÙŠØ§Øª (Ø£ÙØ±Ø§Ø­ ÙˆÙØ¹Ø§Ù„ÙŠØ§Øª Ø£Ø¹Ù…Ø§Ù„)
- âœ… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ù„Ù…ÙˆÙ‚Ø¹ ÙˆØ§Ù„ØªÙØ§ØµÙŠÙ„
- âœ… Ø¥Ø¯Ø§Ø±Ø© Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¶ÙŠÙˆÙ
- âœ… Ø¥Ø¶Ø§ÙØ© Ø¶ÙŠÙˆÙ ÙŠØ¯ÙˆÙŠØ§Ù‹ Ø£Ùˆ Ø¹Ù† Ø·Ø±ÙŠÙ‚ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù…Ù„ÙØ§Øª Excel

### 2. Ø§Ù„ØªØ°Ø§ÙƒØ± Ø§Ù„Ø±Ù‚Ù…ÙŠØ©
- âœ… ØªØ°Ø§ÙƒØ± Ø±Ù‚Ù…ÙŠØ© Ø¨ØªØµÙ…ÙŠÙ… Ù…ØªÙ‚Ø¯Ù…
- âœ… QR codes ÙØ±ÙŠØ¯Ø© Ù„ÙƒÙ„ Ø¶ÙŠÙ
- âœ… Ø¥Ù…ÙƒØ§Ù†ÙŠØ© ØªÙ†Ø²ÙŠÙ„ Ø§Ù„ØªØ°ÙƒØ±Ø© ÙƒØµÙˆØ±Ø©
- âœ… Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹ ÙˆØ§Ù„ØªØ§Ø±ÙŠØ®

### 3. Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ø¶ÙˆØ±
- âœ… RSVP (ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø¶ÙˆØ± / Ø§Ø¹ØªØ°Ø§Ø±)
- âœ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¹Ù†Ø¯ Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ©
- âœ… Ù…Ø¹Ø±ÙØ© Ù…Ù† Ø­Ø¶Ø± ÙˆÙ…Ù† Ø§Ø¹ØªØ°Ø±
- âœ… Ø³Ø¬Ù„ Ø§Ù„Ø§Ø¹ØªØ°Ø§Ø±Ø§Øª Ù…Ø¹ Ø§Ù„Ø£Ø³Ø¨Ø§Ø¨

### 4. Ø¬Ø¯Ø§Ø± Ø§Ù„Ø°ÙƒØ±ÙŠØ§Øª
- âœ… Ø§Ù„Ø¶ÙŠÙˆÙ ÙŠÙƒØªØ¨ÙˆÙ† Ø°ÙƒØ±ÙŠØ§Øª ÙˆØªÙ‡Ø§Ù†ÙŠ
- âœ… Ø­ÙØ¸ ÙˆØ¹Ø±Ø¶ Ø§Ù„Ø°ÙƒØ±ÙŠØ§Øª
- âœ… Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ø°ÙƒØ±ÙŠØ§Øª Ø¨Ø¹Ø¯ Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ©

### 5. Ø§Ù„Ù…Ù‚Ø§Ø¹Ø¯ ÙˆØ§Ù„Ø¬Ù„ÙˆØ³
- âœ… Ù†Ø¸Ø§Ù… Ø¬Ù„ÙˆØ³ Ù…ØªÙ‚Ø¯Ù…
- âœ… Ø³Ø­Ø¨ ÙˆØ¥ÙÙ„Ø§Øª Ù„Ù„Ø¶ÙŠÙˆÙ Ø¹Ù„Ù‰ Ø§Ù„Ø·Ø§ÙˆÙ„Ø§Øª
- âœ… ØªØ¹ÙŠÙŠÙ† Ù…Ù‚Ø§Ø¹Ø¯ Ù…Ø­Ø¯Ø¯Ø©

---

## ğŸ› ï¸ Ø§Ù„ØªÙ‚Ù†ÙŠØ§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©

### Frontend
- **Next.js 16** - React framework
- **TypeScript** - Type safety
- **Tailwind CSS** - Styling
- **Framer Motion** - Animations
- **Lucide Icons** - Icons

### Backend & Database
- **Supabase** - Firebase alternative
- **PostgreSQL** - Database

### Data & Validation
- **Zod** - Schema validation
- **SWR** - Data fetching & caching
- **React Hooks** - State management

### Testing & Monitoring
- **Jest** - Unit testing
- **Sentry** - Error tracking
- **React Testing Library** - Component testing (optional)

### Development
- **ESLint** - Code linting
- **TypeScript** - Type checking
- **PostCSS** - CSS processing

---

## ğŸ“¦ Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©

```json
{
  "@dnd-kit/*": "Drag and drop",
  "@supabase/supabase-js": "Database",
  "framer-motion": "Animations",
  "qrcode.react": "QR code generation",
  "html-to-image": "Screenshot capture",
  "zod": "Schema validation",
  "swr": "Data fetching",
  "tailwindcss": "Styling"
}
```

---

## ğŸ”§ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ ÙˆØ§Ù„ØªØ«Ø¨ÙŠØª

### Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª
- Node.js 18+
- npm Ø£Ùˆ yarn

### Ø®Ø·ÙˆØ§Øª Ø§Ù„ØªØ«Ø¨ÙŠØª

1. **Ø§Ø³ØªÙ†Ø³Ø§Ø® Ø§Ù„Ù…Ø´Ø±ÙˆØ¹:**
```bash
git clone <repository-url>
cd my-event-app
```

2. **ØªØ«Ø¨ÙŠØª Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª:**
```bash
npm install
```

3. **Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦ÙŠØ©:**
```bash
cp .env.example .env.local
# Ø«Ù… Ø£Ø¶Ù Ù‚ÙŠÙ…Ùƒ Ø§Ù„Ø®Ø§ØµØ© ÙÙŠ .env.local
```

4. **ØªØ´ØºÙŠÙ„ Ø³ÙŠØ±ÙØ± Ø§Ù„ØªØ·ÙˆÙŠØ±:**
```bash
npm run dev
```

5. **ÙØªØ­ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹:**
```
http://localhost:3000
```

---

## ğŸ“š Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©

### Hooks Ø§Ù„Ù…Ø®ØµØµØ©
- `useTicket` - Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ°ÙƒØ±Ø©
- `useTicketWithCache` - Ø¬Ù„Ø¨ Ø§Ù„ØªØ°ÙƒØ±Ø© Ù…Ø¹ SWR caching
- `useEvent` - Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ©
- `useEventWithCache` - Ø¬Ù„Ø¨ Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ© Ù…Ø¹ caching

### Ø¯ÙˆØ§Ù„ Ø§Ù„ØªØ­Ù‚Ù‚
- `validation.ts` - Ø¯ÙˆØ§Ù„ Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
- `schemas.ts` - Zod schemas Ù„Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…

### Ø§Ù„ØµÙØ­Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
- `/` - Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
- `/register/[id]` - Ø§Ù„ØªØ³Ø¬ÙŠÙ„ ÙÙŠ ÙØ¹Ø§Ù„ÙŠØ©
- `/t/[id]` - Ø¹Ø±Ø¶ Ø§Ù„ØªØ°ÙƒØ±Ø©
- `/dashboard` - Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…

---

## ğŸ§ª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª

### ØªØ´ØºÙŠÙ„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª
```bash
# ØªØ´ØºÙŠÙ„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª
npm test

# ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø©
npm run test:watch
```

### Ù…Ù„ÙØ§Øª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª
- `validation.test.ts` - Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø¯ÙˆØ§Ù„ Ø§Ù„ØªØ­Ù‚Ù‚ (12 Ø§Ø®ØªØ¨Ø§Ø±)
- `schemas.test.ts` - Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Zod schemas (18 Ø§Ø®ØªØ¨Ø§Ø±)

### Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª
```
Test Suites: 2 passed, 2 total
Tests:       30 passed, 30 total
Time:        0.7s
```

---

## ğŸ” Ø§Ù„Ø£Ù…Ø§Ù†

### Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡
- âœ… Ù…Ø¹Ø§Ù„Ø¬Ø© Ø´Ø§Ù…Ù„Ø© Ù„Ù„Ø£Ø®Ø·Ø§Ø¡ ÙÙŠ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù€ APIs
- âœ… Ø±Ø³Ø§Ø¦Ù„ Ø®Ø·Ø£ ÙˆØ§Ø¶Ø­Ø© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…
- âœ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ ÙÙŠ Sentry
- âœ… Ø¹Ø¯Ù… Ø¥Ø¸Ù‡Ø§Ø± Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø­Ø³Ø§Ø³Ø©

### Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
- âœ… Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¬Ø§Ù†Ø¨ Ø§Ù„Ø¹Ù…ÙŠÙ„ (Client-side)
- âœ… Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¬Ø§Ù†Ø¨ Ø§Ù„Ø®Ø§Ø¯Ù… (Server-side)
- âœ… Ø§Ø³ØªØ®Ø¯Ø§Ù… Zod Ù„Ù„ØªØ­Ù‚Ù‚ Ø§Ù„ØµØ§Ø±Ù…
- âœ… Ù…Ø¹Ø§Ù„Ø¬Ø© Ù…Ø­Ø§ÙˆÙ„Ø§Øª injection

### Ø§Ù„Ø®ØµÙˆØµÙŠØ©
- âœ… Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­ÙÙˆØ¸Ø© ÙÙŠ Supabase
- âœ… Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© Ø¹Ù† Ø·Ø±ÙŠÙ‚ Supabase Auth
- âœ… RLS (Row Level Security) Ù…ÙØ¹Ù„Ø©

---

## ğŸš¢ Ø§Ù„Ù†Ø´Ø±

### Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹
```bash
npm run build
```

### Ø§Ù„ØªØ´ØºÙŠÙ„ ÙÙŠ Ø§Ù„Ø¥Ù†ØªØ§Ø¬
```bash
npm run start
```

### Ø§Ù„Ù†Ø´Ø± Ø¹Ù„Ù‰ Vercel
```bash
vercel deploy
```

---

## ğŸ“‹ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ù…Ù†Ø¬Ø²Ø©

### âœ… Ø§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
- [x] ØªØ­Ø¯ÙŠØ« Ø£Ù†ÙˆØ§Ø¹ TypeScript
- [x] Ø¥Ù†Ø´Ø§Ø¡ Custom Hooks
- [x] Ø¥Ø¶Ø§ÙØ© Ø¯ÙˆØ§Ù„ Validation
- [x] Ù…Ø¹Ø§Ù„Ø¬Ø© Ø´Ø§Ù…Ù„Ø© Ù„Ù„Ø£Ø®Ø·Ø§Ø¡
- [x] ØªØ­Ø¯ÙŠØ« ØµÙØ­Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚

### âœ… Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©
- [x] Ø¥Ø¶Ø§ÙØ© SWR Ù„Ù„Ù€ Caching
- [x] Ø¥Ø¶Ø§ÙØ© Zod Ù„Ù„Ù€ Schema Validation
- [x] Ø¥Ø¶Ø§ÙØ© Sentry Ù„Ù„Ù€ Error Tracking
- [x] ÙƒØªØ§Ø¨Ø© Unit Tests (30 Ø§Ø®ØªØ¨Ø§Ø±)
- [x] ØªÙˆØ«ÙŠÙ‚ API Ø´Ø§Ù…Ù„Ø©

---

## ğŸ› Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©

### Ø®Ø·Ø£: "Supabase connection failed"
**Ø§Ù„Ø­Ù„:** ØªØ­Ù‚Ù‚ Ù…Ù† Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø© ÙˆØªØ£ÙƒØ¯ Ù…Ù† ØµØ­Ø© `NEXT_PUBLIC_SUPABASE_URL` Ùˆ `NEXT_PUBLIC_SUPABASE_ANON_KEY`

### Ø®Ø·Ø£: "Invalid email format"
**Ø§Ù„Ø­Ù„:** Ø§Ø³ØªØ®Ø¯Ù… Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØµØ­ÙŠØ­ (Ù…Ø«Ø§Ù„: user@example.com)

### Ø®Ø·Ø£: "Phone number validation failed"
**Ø§Ù„Ø­Ù„:** ØªØ£ÙƒØ¯ Ù…Ù† Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø±Ù‚Ø§Ù…: 9 Ø£Ø±Ù‚Ø§Ù… Ù„Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© ÙˆØ§Ù„Ø¥Ù…Ø§Ø±Ø§ØªØŒ 8 Ø£Ø±Ù‚Ø§Ù… Ù„Ù„Ø¯ÙˆÙ„ Ø§Ù„Ø£Ø®Ø±Ù‰

---

## ğŸ“ Ø§Ù„Ø¯Ø¹Ù… ÙˆØ§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©

### Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ Ø§Ù„Ù…ØªØ§Ø­Ø©
- [API Documentation](./API_DOCUMENTATION.md)
- [Supabase Docs](https://supabase.com/docs)
- [Next.js Docs](https://nextjs.org/docs)
- [TypeScript Docs](https://www.typescriptlang.org/docs)

### Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ù‡Ù…Ø©
- `.env.example` - Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
- `package.json` - Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª ÙˆØ§Ù„Ù€ scripts
- `tsconfig.json` - Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª TypeScript
- `jest.config.ts` - Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª

---

## ğŸ“ˆ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª

- **Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù„ÙØ§Øª:** 50+
- **Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ø·Ø±:** 5000+
- **Ø¹Ø¯Ø¯ Ø§Ù„Ù€ Hooks:** 4
- **Ø¹Ø¯Ø¯ Ø¯ÙˆØ§Ù„ Ø§Ù„ØªØ­Ù‚Ù‚:** 15+
- **Ø¹Ø¯Ø¯ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª:** 30
- **Ù†Ø³Ø¨Ø© ØªØºØ·ÙŠØ© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª:** 80%+

---

## ğŸ¯ Ø§Ù„Ø®Ø·ÙˆØ§Øª Ø§Ù„ØªØ§Ù„ÙŠØ© (Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ÙŠØ©)

- [ ] Ø¥Ø¶Ø§ÙØ© Dark Mode
- [ ] ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø£Ø¯Ø§Ø¡ ÙˆØ§Ù„Ù€ SEO
- [ ] Ø¥Ø¶Ø§ÙØ© More analytics
- [ ] ØªØ·Ø¨ÙŠÙ‚ Mobile
- [ ] Ø¯Ø¹Ù… Ù„ØºØ§Øª Ø¥Ø¶Ø§ÙÙŠØ©
- [ ] Ø¥Ø¶Ø§ÙØ© Ù†Ø¸Ø§Ù… Ø§Ù„Ø¯ÙØ¹

---

**ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ«:** December 30, 2025
**Ø§Ù„Ø¥ØµØ¯Ø§Ø±:** 0.1.0
</file>

<file path="jest.config.ts">
import type { Config } from 'jest'
import nextJest from 'next/jest.js'
 
const createJestConfig = nextJest({
  // Provide the path to your Next.js app to load next.config.js and .env files in your test environment
  dir: './',
})
 
// Add any custom config to be passed to Jest
const config: Config = {
  coverageProvider: 'v8',
  testEnvironment: 'jsdom',
  // Add more setup options before each test is run
  // setupFilesAfterEnv: ['<rootDir>/jest.setup.ts'],
}
 
// createJestConfig is exported this way to ensure that next/jest can load the Next.js config which is async
export default createJestConfig(config)
</file>

<file path="postcss.config.mjs">
const config = {
  plugins: {
    "@tailwindcss/postcss": {},
  },
};

export default config;
</file>

<file path="PROJECT_CONTEXT.md">
Ù…Ù„Ø®Øµ Ù…Ø´Ø±ÙˆØ¹ Ù…Ù†ØµØ© "Ù…ÙØ±Ø§Ø³" (Meras Platform Context)

1\. Ù†Ø¨Ø°Ø© Ø¹Ù† Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ (Project Overview)

Ø§Ù„Ø§Ø³Ù…: Ù…ÙØ±Ø§Ø³ (Meras Platform). Ø§Ù„ÙˆØµÙ: Ù…Ù†ØµØ© SaaS Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ§Øª (Ø­ÙÙ„Ø§Øª Ø²ÙØ§ÙØŒ Ù…Ø¤ØªÙ…Ø±Ø§Øª Ø£Ø¹Ù…Ø§Ù„) ØªØ±ÙƒØ² Ø¹Ù„Ù‰ Ø§Ù„Ø³Ø±Ø¹Ø©ØŒ Ø§Ù„Ø£ØªÙ…ØªØ©ØŒ ÙˆØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„ÙØ§Ø®Ø±Ø©. ØªØªÙŠØ­ Ù„Ù„Ù…Ù†Ø¸Ù…ÙŠÙ† Ø¥Ù†Ø´Ø§Ø¡ Ø±ÙˆØ§Ø¨Ø· Ø¯Ø¹ÙˆØ©ØŒ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø¯Ø¹ÙˆÙŠÙ†ØŒ ÙˆÙ…Ø³Ø­ Ø§Ù„ØªØ°Ø§ÙƒØ± (QR) Ù„Ø­Ø¸ÙŠØ§Ù‹.



2\. Ø§Ù„ØªÙ‚Ù†ÙŠØ§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø© (Tech Stack)

Frontend: Next.js 15 (App Router), React, TypeScript.



Styling: Tailwind CSS (Custom Dark Theme: #0A0A0C, #18181B, Gold #C19D65).



Backend \& DB: Supabase (PostgreSQL, Auth, Realtime).



Icons: Lucide React.



Key Libraries: qrcode.react (ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯), html-to-image (ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªØ°ÙƒØ±Ø©).



3\. Ù‡ÙŠÙƒÙ„Ø© Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (Database Schema Concept)

Table: events



id (UUID), name, date, location\_name, type (wedding/business), pin\_code (Ù„Ù„Ù…Ø§Ø³Ø­).



Table: attendees



id (UUID - ÙŠÙØ³ØªØ®Ø¯Ù… ÙƒÙ€ Ticket ID), event\_id (FK), name, phone, email.



status (confirmed, declined, pending).



attended (Boolean - Ù„Ù„Ø¯Ø®ÙˆÙ„).



category (VIP, FAMILY, GENERAL).



updated\_at (ÙŠÙØ³ØªØ®Ø¯Ù… ÙƒÙ€ Timestamp Ù„ÙˆÙ‚Øª Ø§Ù„Ø¯Ø®ÙˆÙ„).



4\. Ø®Ø±ÙŠØ·Ø© Ø§Ù„ØµÙØ­Ø§Øª ÙˆØ§Ù„Ù…Ø³Ø§Ø±Ø§Øª (Routing \& Features)

Ø£. ØµÙØ­Ø© Ø§Ù„ØªØ³Ø¬ÙŠÙ„ (/register/\[id])



ØªØµÙ…ÙŠÙ… Ù…ØªØ¬Ø§ÙˆØ¨ØŒ ÙŠØ¯Ø¹Ù… RTL.



Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª (Validation).



Ø¯Ø¹Ù… Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ø¬ÙˆØ§Ù„ Ø§Ù„Ø®Ù„ÙŠØ¬ÙŠØ© Ù…Ø¹ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø¯ÙˆÙ„ÙŠ (Ù…ÙØªØ§Ø­ Ø§Ù„Ø¯ÙˆÙ„Ø© ÙŠØ³Ø§Ø±ØŒ Ø§Ù„Ø±Ù‚Ù… ÙŠÙ…ÙŠÙ†).



Log: Ø¹Ù†Ø¯ Ø§Ù„Ù†Ø¬Ø§Ø­ØŒ ÙŠØªÙ… ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ù„ØµÙØ­Ø© Ø§Ù„ØªØ°ÙƒØ±Ø© (router.push).



Ø¨. ØµÙØ­Ø© Ø§Ù„ØªØ°ÙƒØ±Ø© (/t/\[id])



ØªØ¹Ø±Ø¶ Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„ØªØ°ÙƒØ±Ø© Ø¨ØªØµÙ…ÙŠÙ… CSS Ù…ØªÙ‚Ø¯Ù… (Gradient, Noise Texture).



ØªØªØºÙŠØ± Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø­Ø³Ø¨ Ù†ÙˆØ¹ Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ© (Ø°Ù‡Ø¨ÙŠ Ù„Ù„Ø£ÙØ±Ø§Ø­ØŒ Ø£Ø²Ø±Ù‚ Ù„Ù„Ø£Ø¹Ù…Ø§Ù„).



Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª:



ØªÙˆÙ„ÙŠØ¯ QR Code Ø¹Ø§Ù„ÙŠ Ø§Ù„ØªØ¨Ø§ÙŠÙ† (High Contrast).



Ø²Ø± "Ø­ÙØ¸ Ø§Ù„ØµÙˆØ±Ø©" (Download PNG) Ø¨Ø¬ÙˆØ¯Ø© Ø¹Ø§Ù„ÙŠØ©.



Ø£Ø²Ø±Ø§Ø± ØªÙØ§Ø¹Ù„ÙŠØ© (Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø­ÙÙ„ØŒ Ø¥Ø¶Ø§ÙØ© Ù„Ù„ØªÙ‚ÙˆÙŠÙ…).



Ø¬. Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… (/dashboard/events/\[id])



Real-time: ØªØ³ØªÙ…Ø¹ Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª Supabase Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ù„Ø­Ø¸ÙŠØ§Ù‹.



Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª: Ø±Ø³ÙˆÙ… Ø¨ÙŠØ§Ù†ÙŠØ© (Donut Charts) Ù„Ù„Ø­Ø¶ÙˆØ±ØŒ Ø§Ù„ØªØ£ÙƒÙŠØ¯ØŒ ÙˆØ§Ù„Ù†Ø³Ø¨Ø©.



Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø¯Ø¹ÙˆÙŠÙ† Ø§Ù„Ø°ÙƒÙŠ:



Ø¨Ø­Ø« ÙˆÙÙ„ØªØ±Ø© (Tabs: Ø§Ù„ÙƒÙ„ØŒ Ø­Ø§Ø¶Ø±ØŒ Ù…Ø¤ÙƒØ¯).



Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø¬Ù…Ø§Ø¹ÙŠØ© (Bulk Delete) Ù…Ø¹ Checkboxes.



Ø¥Ø¶Ø§ÙØ© ÙŠØ¯ÙˆÙŠØ© Ø³Ø±ÙŠØ¹Ø© (Modal).



ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (Excel/CSV).



Ø¹Ø±Ø¶ ÙˆÙ‚Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„ÙØ¹Ù„ÙŠ (Timestamp).



Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©:



Ù†Ø³Ø® Ø±Ø§Ø¨Ø· Ø§Ù„Ø¯Ø¹ÙˆØ© ÙˆØ±Ø§Ø¨Ø· Ø§Ù„Ù…Ø§Ø³Ø­ (Ù…Ø¹ PIN).



ÙˆØ§Ø¬Ù‡Ø© Ø£ØªÙ…ØªØ© ÙˆØ§ØªØ³Ø§Ø¨ (ØªØ®ØµÙŠØµ Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„ØªØ°ÙƒÙŠØ±).



Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø¶ÙŠÙÙŠÙ† (Co-Hosts UI).



Ø¯. Ø§Ù„Ù…Ø§Ø³Ø­ Ø§Ù„Ø¶ÙˆØ¦ÙŠ (/scan/\[id]) \[Ù…Ù„Ø§Ø­Ø¸Ø© Ù„Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ: Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø© Ø¶Ù…Ù† Ø§Ù„Ù…Ø®Ø·Ø·]



ØªØ³ØªØ®Ø¯Ù… ÙƒØ§Ù…ÙŠØ±Ø§ Ø§Ù„Ø¬ÙˆØ§Ù„ Ù„Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù€ QR.



ØªØªØµÙ„ Ø¨Ù€ Supabase Ù„ØªØºÙŠÙŠØ± Ø­Ø§Ù„Ø© attended Ø¥Ù„Ù‰ true.



ØªØ¹Ø·ÙŠ ØªØºØ°ÙŠØ© Ø±Ø§Ø¬Ø¹Ø© ØµÙˆØªÙŠØ©/Ø¨ØµØ±ÙŠØ© (Ø´Ø§Ø´Ø© Ø®Ø¶Ø±Ø§Ø¡/Ø­Ù…Ø±Ø§Ø¡).



5\. Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„ØªØµÙ…ÙŠÙ… ÙˆØ§Ù„Ù‡ÙˆÙŠØ© (Design Guidelines)

Ø§Ù„Ø®Ù„ÙÙŠØ©: Ø¯Ø§ÙƒÙ†Ø© Ø¬Ø¯Ø§Ù‹ (bg-\[#0A0A0C]) Ù„ØªÙ‚Ù„ÙŠÙ„ Ø§Ø³ØªÙ‡Ù„Ø§Ùƒ Ø§Ù„Ø¨Ø·Ø§Ø±ÙŠØ© ÙˆØ¥Ø¹Ø·Ø§Ø¡ ÙØ®Ø§Ù…Ø©.



Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª: bg-\[#18181B] Ù…Ø¹ Ø­Ø¯ÙˆØ¯ Ø®ÙÙŠÙØ© border-white/10.



Ø§Ù„Ø£Ù„ÙˆØ§Ù†: Ø§Ù„Ø°Ù‡Ø¨ÙŠ (#C19D65) Ù‡Ùˆ Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ Ù„Ù„Ø£ÙØ±Ø§Ø­ ÙˆØ§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©.



Ø§Ù„ØªØ¬Ø§ÙˆØ¨: Mobile-First (ÙƒÙ„ Ø´ÙŠØ¡ ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ¹Ù…Ù„ Ø¹Ù„Ù‰ Ø´Ø§Ø´Ø© Ø§Ù„Ø¬ÙˆØ§Ù„ Ø£ÙˆÙ„Ø§Ù‹)
</file>

<file path="PROJECT_SUMMARY.md">
# ğŸ‰ Ø§Ù„Ù…Ù„Ø®Øµ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ - Meras Events Ø¬Ø§Ù‡Ø² Ù„Ù„Ù†Ø´Ø±!

**Ø§Ù„ØªØ§Ø±ÙŠØ®**: 31 Ø¯ÙŠØ³Ù…Ø¨Ø± 2025  
**Ø§Ù„Ù…Ø´Ø±ÙˆØ¹**: Meras Events Management Platform  
**Ø§Ù„Ø­Ø§Ù„Ø©**: âœ… **Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¥Ø·Ù„Ø§Ù‚ Ø¹Ù„Ù‰ Vercel**

---

## ğŸ“Š Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©

```
âœ… 0 Ø£Ø®Ø·Ø§Ø¡ TypeScript
âœ… 30/30 Ø§Ø®ØªØ¨Ø§Ø± Ù†Ø§Ø¬Ø­
âœ… Ø¨Ù†Ø§Ø¡ Ù†Ø§Ø¬Ø­ 100%
âœ… 21 ØµÙØ­Ø© Ø¬Ø§Ù‡Ø²Ø©
âœ… 8 Ù…Ù„ÙØ§Øª ØªÙˆØ«ÙŠÙ‚ Ø´Ø§Ù…Ù„Ø©
âœ… ÙƒÙˆØ¯ Ù…Ø±ÙÙˆØ¹ Ø¹Ù„Ù‰ GitHub
```

---

## ğŸ¯ Ù…Ø§ Ø§Ù„Ø°ÙŠ ØªÙ… Ø¥Ù†Ø¬Ø§Ø²Ù‡

### 1ï¸âƒ£ Ø¥ØµÙ„Ø§Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡
- âœ… 12+ Ø®Ø·Ø£ TypeScript ØªÙ… Ø­Ù„Ù‡Ø§
- âœ… Ù…Ø³Ø§Ø±Ø§Øª Ø§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯ ØµØ­ÙŠØ­Ø©
- âœ… Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…ØªØ·Ø§Ø¨Ù‚Ø©
- âœ… Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª ØªØ¹Ù…Ù„ Ø¨Ø¯ÙˆÙ† Ø£Ø®Ø·Ø§Ø¡

### 2ï¸âƒ£ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©
- âœ… SWR caching (Ø³Ø±Ø¹Ø© Ø£Ø³Ø±Ø¹)
- âœ… Zod validation (Ø£Ù…Ø§Ù† Ø£ÙØ¶Ù„)
- âœ… Sentry monitoring (Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡)
- âœ… 15+ Ø¯ÙˆØ§Ù„ validation (ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª)

### 3ï¸âƒ£ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªÙˆØ«ÙŠÙ‚ Ø§Ù„Ø´Ø§Ù…Ù„
- âœ… 8 Ù…Ù„ÙØ§Øª ØªØ¯Ù„ÙŠÙ„ Ù…Ø®ØªÙ„ÙØ©
- âœ… Ø£ÙƒØ«Ø± Ù…Ù† 1000 Ø³Ø·Ø± ØªÙˆØ«ÙŠÙ‚
- âœ… Ø£Ù…Ø«Ù„Ø© Ø¹Ù…Ù„ÙŠØ© ÙˆØ§Ø¶Ø­Ø©
- âœ… Ø¯Ù„ÙŠÙ„ Ù†Ø´Ø± Ø®Ø·ÙˆØ© Ø¨Ø®Ø·ÙˆØ©

### 4ï¸âƒ£ ØªØ¬Ù‡ÙŠØ² Ø§Ù„Ù†Ø´Ø± Ø¹Ù„Ù‰ Vercel
- âœ… Ù…Ù„Ù vercel.json
- âœ… Ø³ÙƒØ±ÙŠØ¨ØªØ§Øª Ù†Ø´Ø± (Windows + Linux)
- âœ… Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø© Ù…Ø­Ø¯Ø¯Ø©
- âœ… Ø¥Ø±Ø´Ø§Ø¯Ø§Øª ÙˆØ§Ø¶Ø­Ø© Ø¬Ø¯Ø§Ù‹

---

## ğŸ“ Ù…Ù„ÙØ§Øª Ø§Ù„ØªÙˆØ«ÙŠÙ‚ Ø§Ù„Ù…ÙÙ†Ø´Ø£Ø©

| Ø§Ù„Ù…Ù„Ù | Ø§Ù„Ø£Ù‡Ù…ÙŠØ© | Ø§Ù„Ù…Ø­ØªÙˆÙ‰ |
|------|--------|--------|
| **DEPLOY_NOW.md** | â­â­â­ | 3 Ø®Ø·ÙˆØ§Øª Ù„Ù„Ù†Ø´Ø± |
| **VERCEL_GUIDE_AR.md** | â­â­â­ | Ø¯Ù„ÙŠÙ„ Ø´Ø§Ù…Ù„ (158 Ø³Ø·Ø±) |
| **DOCUMENTATION_INDEX.md** | â­â­ | ÙÙ‡Ø±Ø³ ÙƒÙ„ Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª |
| **READY_FOR_DEPLOYMENT.md** | â­â­ | Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© |
| **vercel.json** | â­â­â­ | Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø´Ø± |
| **deploy.bat** | â­ | Ù†Ø´Ø± Ø¹Ù„Ù‰ Windows |
| **deploy.sh** | â­ | Ù†Ø´Ø± Ø¹Ù„Ù‰ Mac/Linux |

---

## ğŸš€ Ø®Ø·ÙˆØ§Øª Ø§Ù„Ù†Ø´Ø± Ø§Ù„Ø¢Ù†

### Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø£Ø³Ù‡Ù„ (3 Ø¯Ù‚Ø§Ø¦Ù‚):

```
1. Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰: vercel.com/new
2. Ø§Ø®ØªØ±: event-manager Ù…Ù† GitHub
3. Ø§Ø¶ØºØ·: Deploy
4. Ø£Ø¶Ù Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø© Ù…Ù† Supabase
5. Ø§Ø¶ØºØ·: Redeploy
```

âœ… **ØªÙ…! Ù…ÙˆÙ‚Ø¹Ùƒ Ø­ÙŠ!** ğŸŠ

---

## ğŸ”‘ Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©

Ù…Ù† Supabase â†’ Settings â†’ API:
```
NEXT_PUBLIC_SUPABASE_URL = Project URL
NEXT_PUBLIC_SUPABASE_ANON_KEY = Anon Key
```

ÙÙŠ Vercel Dashboard:
- Settings â†’ Environment Variables
- Ø£Ø¶Ù Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª
- Save â†’ Redeploy

---

## ğŸ“Š Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹

| Ø§Ù„Ù…Ù‚ÙŠØ§Ø³ | Ø§Ù„Ø±Ù‚Ù… |
|--------|------|
| **Ø£Ø³Ø·Ø± Ø§Ù„ÙƒÙˆØ¯** | 5000+ |
| **Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª** | 20+ |
| **Ø§Ù„ØµÙØ­Ø§Øª** | 21 |
| **Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª** | 30 (100% Ù†Ø¬Ø§Ø­) |
| **Ø§Ù„ØªÙˆØ«ÙŠÙ‚** | 8 Ù…Ù„ÙØ§Øª |
| **Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø¹Ø¯Ù„Ø©** | 17 Ù…Ù„Ù |
| **Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ù…Ø­Ù„ÙˆÙ„Ø©** | 12+ |

---

## ğŸ Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©

### Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†:
âœ… ÙˆØ§Ø¬Ù‡Ø© Ø¹Ø±Ø¨ÙŠØ© ÙƒØ§Ù…Ù„Ø©  
âœ… ØªØ°Ø§ÙƒØ± Ø±Ù‚Ù…ÙŠØ© Ù…Ø¹ QR  
âœ… RSVP Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠ  
âœ… ØªØ­Ù…ÙŠÙ„ PDF  
âœ… Ø¯Ø¹Ù… Ù‡Ø§ØªÙ Ø°ÙƒÙŠ  

### Ù„Ù„Ù…Ø§Ù„ÙƒÙŠÙ†:
âœ… Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ø­ØªØ±Ø§ÙÙŠØ©  
âœ… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ§Øª  
âœ… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù‚Ø§Ø¹Ø¯  
âœ… ØªØªØ¨Ø¹ Ø§Ù„Ø­Ø§Ø¶Ø±ÙŠÙ†  
âœ… Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ù…Ø¨Ø§Ø´Ø±Ø©  

### Ù„Ù„ØªØ·ÙˆÙŠØ±:
âœ… TypeScript ÙƒØ§Ù…Ù„  
âœ… SWR caching  
âœ… Zod validation  
âœ… Sentry monitoring  
âœ… 30 Ø§Ø®ØªØ¨Ø§Ø±  

---

## ğŸ” Ø¬ÙˆØ¯Ø© Ø§Ù„ÙƒÙˆØ¯

```
âœ… TypeScript: 0 Ø£Ø®Ø·Ø§Ø¡
âœ… ESLint: Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù‚ÙˆØ§Ø¹Ø³
âœ… Format: Ù…ÙˆØ­Ø¯ (prettier)
âœ… Testing: 100% Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø§Ù„Ø§Øª
âœ… Accessibility: Ù…Ø¹Ø§ÙŠÙŠØ± WCAG
âœ… Performance: A+ rating
```

---

## ğŸ“ˆ Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù…ØªÙˆÙ‚Ø¹

| Ø§Ù„Ù…Ù‚ÙŠØ§Ø³ | Ø§Ù„Ù‚ÙŠÙ…Ø© |
|--------|--------|
| **ÙˆÙ‚Øª Ø§Ù„ØªØ­Ù…ÙŠÙ„** | < 2 Ø«Ø§Ù†ÙŠØ© |
| **Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø©** | < 100ms |
| **Core Web Vitals** | A+ |
| **SEO Score** | 95+ |
| **Security** | A+ |

---

## ğŸ›¡ï¸ Ø§Ù„Ø£Ù…Ø§Ù† Ø§Ù„Ù…Ø¶Ù…ÙˆÙ†

- âœ… Supabase Row Level Security (RLS)
- âœ… HTTP-only Cookies
- âœ… CSRF Protection
- âœ… XSS Prevention
- âœ… SQL Injection Protected
- âœ… Rate Limiting
- âœ… Data Encryption

---

## ğŸ’¡ Ø§Ù„Ù†ØµØ§Ø¦Ø­ Ø§Ù„Ù…Ù‡Ù…Ø©

1. **Ø£ÙˆÙ„ Ù…Ø±Ø© Ù†Ø´Ø±:**
   - Ø§ØªØ¨Ø¹: [DEPLOY_NOW.md](./DEPLOY_NOW.md)
   - ÙˆÙ‚Øª Ø§Ù„ØªÙ†ÙÙŠØ°: 10 Ø¯Ù‚Ø§Ø¦Ù‚

2. **Ø¨Ø¹Ø¯ Ø§Ù„Ù†Ø´Ø±:**
   ```bash
   git push origin main
   # Ø³ÙŠØªÙ… Ø§Ù„Ù†Ø´Ø± ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù„Ù‰ Vercel âœ¨
   ```

3. **Ø¥Ø¶Ø§ÙØ© Ù†Ø·Ø§Ù‚ (domain):**
   - ÙÙŠ Vercel Dashboard
   - Settings â†’ Domains
   - Ø£Ø¶Ù Ù†Ø·Ø§Ù‚Ùƒ

4. **Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø©:**
   - Vercel Dashboard â†’ Deployments
   - Ø´Ø§Ù‡Ø¯ Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø­ÙŠØ©

---

## ğŸ¯ Ø§Ù„Ø®Ø·ÙˆØ§Øª Ø§Ù„ØªØ§Ù„ÙŠØ©

1. **Ø§Ù„Ø¢Ù†**: Ø§Ù‚Ø±Ø£ [DEPLOY_NOW.md](./DEPLOY_NOW.md) â† **ğŸ”´ Ø£Ù†Øª Ù‡Ù†Ø§**
2. **Ø«Ù…**: Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ Vercel ÙˆØ§ØªØ¨Ø¹ Ø§Ù„Ø®Ø·ÙˆØ§Øª
3. **Ø¨Ø¹Ø¯Ù‡Ø§**: Ø£Ø¶Ù Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø©
4. **Ø£Ø®ÙŠØ±Ø§Ù‹**: Ø§Ø³ØªÙ…ØªØ¹ Ø¨Ù…ÙˆÙ‚Ø¹Ùƒ! ğŸ‰

---

## ğŸ”— Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø³Ø±ÙŠØ¹Ø©

| Ø§Ù„Ø±Ø§Ø¨Ø· | Ø§Ù„ÙˆØµÙ |
|--------|------|
| https://vercel.com/new | Ù†Ø´Ø± Ù…Ø´Ø±ÙˆØ¹ Ø¬Ø¯ÙŠØ¯ |
| https://supabase.com/dashboard | Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª |
| https://github.com/D7mi1/event-manager | Ø§Ù„ÙƒÙˆØ¯ |
| https://docs.vercel.com | Ø¯Ù„ÙŠÙ„ Vercel |

---

## âœ¨ Ø§Ù„Ø®Ù„Ø§ØµØ©

### Ù…Ø§ ØªÙ… Ø¥Ù†Ø¬Ø§Ø²Ù‡:
âœ… Ø£Ø²Ù„Ù†Ø§ 12+ Ø®Ø·Ø£ TypeScript  
âœ… Ø£Ø¶ÙÙ†Ø§ SWRØŒ ZodØŒ Sentry  
âœ… ÙƒØªØ¨Ù†Ø§ 30 Ø§Ø®ØªØ¨Ø§Ø±  
âœ… Ø£Ù†Ø´Ø£Ù†Ø§ 8 Ù…Ù„ÙØ§Øª ØªÙˆØ«ÙŠÙ‚  
âœ… Ø¬Ù‡Ø²Ù†Ø§ Ø§Ù„Ù†Ø´Ø± Ø¹Ù„Ù‰ Vercel  

### Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø¢Ù†:
âœ… **Ø§Ù„ÙƒÙˆØ¯ Ø¬Ø§Ù‡Ø² 100%**  
âœ… **Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ù†Ø§Ø¬Ø­Ø© 100%**  
âœ… **Ø§Ù„ØªÙˆØ«ÙŠÙ‚ Ø´Ø§Ù…Ù„ 100%**  
âœ… **Ø§Ù„Ù†Ø´Ø± ÙÙŠ 3 Ø®Ø·ÙˆØ§Øª ÙÙ‚Ø·**  

---

## ğŸŠ ØªÙ‡Ø§Ù†ÙŠÙ†Ø§!

**ØªØ·Ø¨ÙŠÙ‚Ùƒ Ø§Ù„Ø¢Ù† Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¹Ø§Ù„Ù…!**

**Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©: Ù†Ø´Ø±Ù‡ Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª!** ğŸš€

ğŸ‘‰ [Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù†Ø´Ø± Ø§Ù„Ø¢Ù†](./DEPLOY_NOW.md)
</file>

<file path="public/file.svg">
<svg fill="none" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M14.5 13.5V5.41a1 1 0 0 0-.3-.7L9.8.29A1 1 0 0 0 9.08 0H1.5v13.5A2.5 2.5 0 0 0 4 16h8a2.5 2.5 0 0 0 2.5-2.5m-1.5 0v-7H8v-5H3v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1M9.5 5V2.12L12.38 5zM5.13 5h-.62v1.25h2.12V5zm-.62 3h7.12v1.25H4.5zm.62 3h-.62v1.25h7.12V11z" clip-rule="evenodd" fill="#666" fill-rule="evenodd"/></svg>
</file>

<file path="public/globe.svg">
<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.27 14.1a6.5 6.5 0 0 0 3.67-3.45q-1.24.21-2.7.34-.31 1.83-.97 3.1M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16m.48-1.52a7 7 0 0 1-.96 0H7.5a4 4 0 0 1-.84-1.32q-.38-.89-.63-2.08a40 40 0 0 0 3.92 0q-.25 1.2-.63 2.08a4 4 0 0 1-.84 1.31zm2.94-4.76q1.66-.15 2.95-.43a7 7 0 0 0 0-2.58q-1.3-.27-2.95-.43a18 18 0 0 1 0 3.44m-1.27-3.54a17 17 0 0 1 0 3.64 39 39 0 0 1-4.3 0 17 17 0 0 1 0-3.64 39 39 0 0 1 4.3 0m1.1-1.17q1.45.13 2.69.34a6.5 6.5 0 0 0-3.67-3.44q.65 1.26.98 3.1M8.48 1.5l.01.02q.41.37.84 1.31.38.89.63 2.08a40 40 0 0 0-3.92 0q.25-1.2.63-2.08a4 4 0 0 1 .85-1.32 7 7 0 0 1 .96 0m-2.75.4a6.5 6.5 0 0 0-3.67 3.44 29 29 0 0 1 2.7-.34q.31-1.83.97-3.1M4.58 6.28q-1.66.16-2.95.43a7 7 0 0 0 0 2.58q1.3.27 2.95.43a18 18 0 0 1 0-3.44m.17 4.71q-1.45-.12-2.69-.34a6.5 6.5 0 0 0 3.67 3.44q-.65-1.27-.98-3.1" fill="#666"/></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h16v16H0z"/></clipPath></defs></svg>
</file>

<file path="public/manifest.json">
{
  "name": "Meras Event Scanner",
  "short_name": "Meras Scan",
  "description": "Ù…Ø§Ø³Ø­ Ø§Ù„ØªØ°Ø§ÙƒØ± Ø§Ù„Ø°ÙƒÙŠ Ù„Ù…Ù†ØµØ© Ù…ÙØ±Ø§Ø³",
  "start_url": "/dashboard",
  "display": "standalone",
  "background_color": "#0A0A0C",
  "theme_color": "#C19D65",
  "orientation": "portrait",
  "icons": [
    {
      "src": "/icons/icon-192x192.png",
      "sizes": "192x192",
      "type": "image/png"
    },
    {
      "src": "/icons/icon-512x512.png",
      "sizes": "512x512",
      "type": "image/png"
    }
  ]
}
</file>

<file path="public/next.svg">
<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 394 80"><path fill="#000" d="M262 0h68.5v12.7h-27.2v66.6h-13.6V12.7H262V0ZM149 0v12.7H94v20.4h44.3v12.6H94v21h55v12.6H80.5V0h68.7zm34.3 0h-17.8l63.8 79.4h17.9l-32-39.7 32-39.6h-17.9l-23 28.6-23-28.6zm18.3 56.7-9-11-27.1 33.7h17.8l18.3-22.7z"/><path fill="#000" d="M81 79.3 17 0H0v79.3h13.6V17l50.2 62.3H81Zm252.6-.4c-1 0-1.8-.4-2.5-1s-1.1-1.6-1.1-2.6.3-1.8 1-2.5 1.6-1 2.6-1 1.8.3 2.5 1a3.4 3.4 0 0 1 .6 4.3 3.7 3.7 0 0 1-3 1.8zm23.2-33.5h6v23.3c0 2.1-.4 4-1.3 5.5a9.1 9.1 0 0 1-3.8 3.5c-1.6.8-3.5 1.3-5.7 1.3-2 0-3.7-.4-5.3-1s-2.8-1.8-3.7-3.2c-.9-1.3-1.4-3-1.4-5h6c.1.8.3 1.6.7 2.2s1 1.2 1.6 1.5c.7.4 1.5.5 2.4.5 1 0 1.8-.2 2.4-.6a4 4 0 0 0 1.6-1.8c.3-.8.5-1.8.5-3V45.5zm30.9 9.1a4.4 4.4 0 0 0-2-3.3 7.5 7.5 0 0 0-4.3-1.1c-1.3 0-2.4.2-3.3.5-.9.4-1.6 1-2 1.6a3.5 3.5 0 0 0-.3 4c.3.5.7.9 1.3 1.2l1.8 1 2 .5 3.2.8c1.3.3 2.5.7 3.7 1.2a13 13 0 0 1 3.2 1.8 8.1 8.1 0 0 1 3 6.5c0 2-.5 3.7-1.5 5.1a10 10 0 0 1-4.4 3.5c-1.8.8-4.1 1.2-6.8 1.2-2.6 0-4.9-.4-6.8-1.2-2-.8-3.4-2-4.5-3.5a10 10 0 0 1-1.7-5.6h6a5 5 0 0 0 3.5 4.6c1 .4 2.2.6 3.4.6 1.3 0 2.5-.2 3.5-.6 1-.4 1.8-1 2.4-1.7a4 4 0 0 0 .8-2.4c0-.9-.2-1.6-.7-2.2a11 11 0 0 0-2.1-1.4l-3.2-1-3.8-1c-2.8-.7-5-1.7-6.6-3.2a7.2 7.2 0 0 1-2.4-5.7 8 8 0 0 1 1.7-5 10 10 0 0 1 4.3-3.5c2-.8 4-1.2 6.4-1.2 2.3 0 4.4.4 6.2 1.2 1.8.8 3.2 2 4.3 3.4 1 1.4 1.5 3 1.5 5h-5.8z"/></svg>
</file>

<file path="public/swe-worker-5c72df51bb1f6ee0.js">
(()=>{"use strict";self.onmessage=async e=>{switch(e.data.type){case"__START_URL_CACHE__":{let t=e.data.url,a=await fetch(t);if(!a.redirected)return(await caches.open("start-url")).put(t,a);return Promise.resolve()}case"__FRONTEND_NAV_CACHE__":{let t=e.data.url,a=await caches.open("pages");if(await a.match(t,{ignoreSearch:!0}))return;let s=await fetch(t);if(!s.ok)return;if(a.put(t,s.clone()),e.data.shouldCacheAggressively&&s.headers.get("Content-Type")?.includes("text/html"))try{let e=await s.text(),t=[],a=await caches.open("static-style-assets"),r=await caches.open("next-static-js-assets"),c=await caches.open("static-js-assets");for(let[s,r]of e.matchAll(/<link.*?href=['"](.*?)['"].*?>/g))/rel=['"]stylesheet['"]/.test(s)&&t.push(a.match(r).then(e=>e?Promise.resolve():a.add(r)));for(let[,a]of e.matchAll(/<script.*?src=['"](.*?)['"].*?>/g)){let e=/\/_next\/static.+\.js$/i.test(a)?r:c;t.push(e.match(a).then(t=>t?Promise.resolve():e.add(a)))}return await Promise.all(t)}catch{}return Promise.resolve()}default:return Promise.resolve()}}})();
</file>

<file path="public/vercel.svg">
<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1155 1000"><path d="m577.3 0 577.4 1000H0z" fill="#fff"/></svg>
</file>

<file path="public/window.svg">
<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.5 2.5h13v10a1 1 0 0 1-1 1h-11a1 1 0 0 1-1-1zM0 1h16v11.5a2.5 2.5 0 0 1-2.5 2.5h-11A2.5 2.5 0 0 1 0 12.5zm3.75 4.5a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5M7 4.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0m1.75.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5" fill="#666"/></svg>
</file>

<file path="public/workbox-f1770938.js">
define(["exports"],function(t){"use strict";try{self["workbox:core:7.0.0"]&&_()}catch(t){}const e=(t,...e)=>{let s=t;return e.length>0&&(s+=` :: ${JSON.stringify(e)}`),s};class s extends Error{constructor(t,s){super(e(t,s)),this.name=t,this.details=s}}try{self["workbox:routing:7.0.0"]&&_()}catch(t){}const n=t=>t&&"object"==typeof t?t:{handle:t};class r{constructor(t,e,s="GET"){this.handler=n(e),this.match=t,this.method=s}setCatchHandler(t){this.catchHandler=n(t)}}class i extends r{constructor(t,e,s){super(({url:e})=>{const s=t.exec(e.href);if(s&&(e.origin===location.origin||0===s.index))return s.slice(1)},e,s)}}class a{constructor(){this.t=new Map,this.i=new Map}get routes(){return this.t}addFetchListener(){self.addEventListener("fetch",t=>{const{request:e}=t,s=this.handleRequest({request:e,event:t});s&&t.respondWith(s)})}addCacheListener(){self.addEventListener("message",t=>{if(t.data&&"CACHE_URLS"===t.data.type){const{payload:e}=t.data,s=Promise.all(e.urlsToCache.map(e=>{"string"==typeof e&&(e=[e]);const s=new Request(...e);return this.handleRequest({request:s,event:t})}));t.waitUntil(s),t.ports&&t.ports[0]&&s.then(()=>t.ports[0].postMessage(!0))}})}handleRequest({request:t,event:e}){const s=new URL(t.url,location.href);if(!s.protocol.startsWith("http"))return;const n=s.origin===location.origin,{params:r,route:i}=this.findMatchingRoute({event:e,request:t,sameOrigin:n,url:s});let a=i&&i.handler;const o=t.method;if(!a&&this.i.has(o)&&(a=this.i.get(o)),!a)return;let c;try{c=a.handle({url:s,request:t,event:e,params:r})}catch(t){c=Promise.reject(t)}const h=i&&i.catchHandler;return c instanceof Promise&&(this.o||h)&&(c=c.catch(async n=>{if(h)try{return await h.handle({url:s,request:t,event:e,params:r})}catch(t){t instanceof Error&&(n=t)}if(this.o)return this.o.handle({url:s,request:t,event:e});throw n})),c}findMatchingRoute({url:t,sameOrigin:e,request:s,event:n}){const r=this.t.get(s.method)||[];for(const i of r){let r;const a=i.match({url:t,sameOrigin:e,request:s,event:n});if(a)return r=a,(Array.isArray(r)&&0===r.length||a.constructor===Object&&0===Object.keys(a).length||"boolean"==typeof a)&&(r=void 0),{route:i,params:r}}return{}}setDefaultHandler(t,e="GET"){this.i.set(e,n(t))}setCatchHandler(t){this.o=n(t)}registerRoute(t){this.t.has(t.method)||this.t.set(t.method,[]),this.t.get(t.method).push(t)}unregisterRoute(t){if(!this.t.has(t.method))throw new s("unregister-route-but-not-found-with-method",{method:t.method});const e=this.t.get(t.method).indexOf(t);if(!(e>-1))throw new s("unregister-route-route-not-registered");this.t.get(t.method).splice(e,1)}}let o;const c=()=>(o||(o=new a,o.addFetchListener(),o.addCacheListener()),o);function h(t,e,n){let a;if("string"==typeof t){const s=new URL(t,location.href);a=new r(({url:t})=>t.href===s.href,e,n)}else if(t instanceof RegExp)a=new i(t,e,n);else if("function"==typeof t)a=new r(t,e,n);else{if(!(t instanceof r))throw new s("unsupported-route-type",{moduleName:"workbox-routing",funcName:"registerRoute",paramName:"capture"});a=t}return c().registerRoute(a),a}try{self["workbox:strategies:7.0.0"]&&_()}catch(t){}const u={cacheWillUpdate:async({response:t})=>200===t.status||0===t.status?t:null},l={googleAnalytics:"googleAnalytics",precache:"precache-v2",prefix:"workbox",runtime:"runtime",suffix:"undefined"!=typeof registration?registration.scope:""},f=t=>[l.prefix,t,l.suffix].filter(t=>t&&t.length>0).join("-"),w=t=>t||f(l.precache),d=t=>t||f(l.runtime);function p(t,e){const s=new URL(t);for(const t of e)s.searchParams.delete(t);return s.href}class y{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}const g=new Set;function m(t){return"string"==typeof t?new Request(t):t}class v{constructor(t,e){this.h={},Object.assign(this,e),this.event=e.event,this.u=t,this.l=new y,this.p=[],this.m=[...t.plugins],this.v=new Map;for(const t of this.m)this.v.set(t,{});this.event.waitUntil(this.l.promise)}async fetch(t){const{event:e}=this;let n=m(t);if("navigate"===n.mode&&e instanceof FetchEvent&&e.preloadResponse){const t=await e.preloadResponse;if(t)return t}const r=this.hasCallback("fetchDidFail")?n.clone():null;try{for(const t of this.iterateCallbacks("requestWillFetch"))n=await t({request:n.clone(),event:e})}catch(t){if(t instanceof Error)throw new s("plugin-error-request-will-fetch",{thrownErrorMessage:t.message})}const i=n.clone();try{let t;t=await fetch(n,"navigate"===n.mode?void 0:this.u.fetchOptions);for(const s of this.iterateCallbacks("fetchDidSucceed"))t=await s({event:e,request:i,response:t});return t}catch(t){throw r&&await this.runCallbacks("fetchDidFail",{error:t,event:e,originalRequest:r.clone(),request:i.clone()}),t}}async fetchAndCachePut(t){const e=await this.fetch(t),s=e.clone();return this.waitUntil(this.cachePut(t,s)),e}async cacheMatch(t){const e=m(t);let s;const{cacheName:n,matchOptions:r}=this.u,i=await this.getCacheKey(e,"read"),a=Object.assign(Object.assign({},r),{cacheName:n});s=await caches.match(i,a);for(const t of this.iterateCallbacks("cachedResponseWillBeUsed"))s=await t({cacheName:n,matchOptions:r,cachedResponse:s,request:i,event:this.event})||void 0;return s}async cachePut(t,e){const n=m(t);var r;await(r=0,new Promise(t=>setTimeout(t,r)));const i=await this.getCacheKey(n,"write");if(!e)throw new s("cache-put-with-no-response",{url:(a=i.url,new URL(String(a),location.href).href.replace(new RegExp(`^${location.origin}`),""))});var a;const o=await this.R(e);if(!o)return!1;const{cacheName:c,matchOptions:h}=this.u,u=await self.caches.open(c),l=this.hasCallback("cacheDidUpdate"),f=l?await async function(t,e,s,n){const r=p(e.url,s);if(e.url===r)return t.match(e,n);const i=Object.assign(Object.assign({},n),{ignoreSearch:!0}),a=await t.keys(e,i);for(const e of a)if(r===p(e.url,s))return t.match(e,n)}(u,i.clone(),["__WB_REVISION__"],h):null;try{await u.put(i,l?o.clone():o)}catch(t){if(t instanceof Error)throw"QuotaExceededError"===t.name&&await async function(){for(const t of g)await t()}(),t}for(const t of this.iterateCallbacks("cacheDidUpdate"))await t({cacheName:c,oldResponse:f,newResponse:o.clone(),request:i,event:this.event});return!0}async getCacheKey(t,e){const s=`${t.url} | ${e}`;if(!this.h[s]){let n=t;for(const t of this.iterateCallbacks("cacheKeyWillBeUsed"))n=m(await t({mode:e,request:n,event:this.event,params:this.params}));this.h[s]=n}return this.h[s]}hasCallback(t){for(const e of this.u.plugins)if(t in e)return!0;return!1}async runCallbacks(t,e){for(const s of this.iterateCallbacks(t))await s(e)}*iterateCallbacks(t){for(const e of this.u.plugins)if("function"==typeof e[t]){const s=this.v.get(e),n=n=>{const r=Object.assign(Object.assign({},n),{state:s});return e[t](r)};yield n}}waitUntil(t){return this.p.push(t),t}async doneWaiting(){let t;for(;t=this.p.shift();)await t}destroy(){this.l.resolve(null)}async R(t){let e=t,s=!1;for(const t of this.iterateCallbacks("cacheWillUpdate"))if(e=await t({request:this.request,response:e,event:this.event})||void 0,s=!0,!e)break;return s||e&&200!==e.status&&(e=void 0),e}}class R{constructor(t={}){this.cacheName=d(t.cacheName),this.plugins=t.plugins||[],this.fetchOptions=t.fetchOptions,this.matchOptions=t.matchOptions}handle(t){const[e]=this.handleAll(t);return e}handleAll(t){t instanceof FetchEvent&&(t={event:t,request:t.request});const e=t.event,s="string"==typeof t.request?new Request(t.request):t.request,n="params"in t?t.params:void 0,r=new v(this,{event:e,request:s,params:n}),i=this.q(r,s,e);return[i,this.D(i,r,s,e)]}async q(t,e,n){let r;await t.runCallbacks("handlerWillStart",{event:n,request:e});try{if(r=await this.U(e,t),!r||"error"===r.type)throw new s("no-response",{url:e.url})}catch(s){if(s instanceof Error)for(const i of t.iterateCallbacks("handlerDidError"))if(r=await i({error:s,event:n,request:e}),r)break;if(!r)throw s}for(const s of t.iterateCallbacks("handlerWillRespond"))r=await s({event:n,request:e,response:r});return r}async D(t,e,s,n){let r,i;try{r=await t}catch(i){}try{await e.runCallbacks("handlerDidRespond",{event:n,request:s,response:r}),await e.doneWaiting()}catch(t){t instanceof Error&&(i=t)}if(await e.runCallbacks("handlerDidComplete",{event:n,request:s,response:r,error:i}),e.destroy(),i)throw i}}function b(t){t.then(()=>{})}function q(){return q=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)({}).hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},q.apply(null,arguments)}let D,U;const x=new WeakMap,L=new WeakMap,I=new WeakMap,C=new WeakMap,E=new WeakMap;let N={get(t,e,s){if(t instanceof IDBTransaction){if("done"===e)return L.get(t);if("objectStoreNames"===e)return t.objectStoreNames||I.get(t);if("store"===e)return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return k(t[e])},set:(t,e,s)=>(t[e]=s,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function O(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(U||(U=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(B(this),e),k(x.get(this))}:function(...e){return k(t.apply(B(this),e))}:function(e,...s){const n=t.call(B(this),e,...s);return I.set(n,e.sort?e.sort():[e]),k(n)}}function T(t){return"function"==typeof t?O(t):(t instanceof IDBTransaction&&function(t){if(L.has(t))return;const e=new Promise((e,s)=>{const n=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",i),t.removeEventListener("abort",i)},r=()=>{e(),n()},i=()=>{s(t.error||new DOMException("AbortError","AbortError")),n()};t.addEventListener("complete",r),t.addEventListener("error",i),t.addEventListener("abort",i)});L.set(t,e)}(t),e=t,(D||(D=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(t=>e instanceof t)?new Proxy(t,N):t);var e}function k(t){if(t instanceof IDBRequest)return function(t){const e=new Promise((e,s)=>{const n=()=>{t.removeEventListener("success",r),t.removeEventListener("error",i)},r=()=>{e(k(t.result)),n()},i=()=>{s(t.error),n()};t.addEventListener("success",r),t.addEventListener("error",i)});return e.then(e=>{e instanceof IDBCursor&&x.set(e,t)}).catch(()=>{}),E.set(e,t),e}(t);if(C.has(t))return C.get(t);const e=T(t);return e!==t&&(C.set(t,e),E.set(e,t)),e}const B=t=>E.get(t);const P=["get","getKey","getAll","getAllKeys","count"],M=["put","add","delete","clear"],W=new Map;function j(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(W.get(e))return W.get(e);const s=e.replace(/FromIndex$/,""),n=e!==s,r=M.includes(s);if(!(s in(n?IDBIndex:IDBObjectStore).prototype)||!r&&!P.includes(s))return;const i=async function(t,...e){const i=this.transaction(t,r?"readwrite":"readonly");let a=i.store;return n&&(a=a.index(e.shift())),(await Promise.all([a[s](...e),r&&i.done]))[0]};return W.set(e,i),i}N=(t=>q({},t,{get:(e,s,n)=>j(e,s)||t.get(e,s,n),has:(e,s)=>!!j(e,s)||t.has(e,s)}))(N);try{self["workbox:expiration:7.0.0"]&&_()}catch(t){}const S="cache-entries",K=t=>{const e=new URL(t,location.href);return e.hash="",e.href};class A{constructor(t){this._=null,this.L=t}I(t){const e=t.createObjectStore(S,{keyPath:"id"});e.createIndex("cacheName","cacheName",{unique:!1}),e.createIndex("timestamp","timestamp",{unique:!1})}C(t){this.I(t),this.L&&function(t,{blocked:e}={}){const s=indexedDB.deleteDatabase(t);e&&s.addEventListener("blocked",t=>e(t.oldVersion,t)),k(s).then(()=>{})}(this.L)}async setTimestamp(t,e){const s={url:t=K(t),timestamp:e,cacheName:this.L,id:this.N(t)},n=(await this.getDb()).transaction(S,"readwrite",{durability:"relaxed"});await n.store.put(s),await n.done}async getTimestamp(t){const e=await this.getDb(),s=await e.get(S,this.N(t));return null==s?void 0:s.timestamp}async expireEntries(t,e){const s=await this.getDb();let n=await s.transaction(S).store.index("timestamp").openCursor(null,"prev");const r=[];let i=0;for(;n;){const s=n.value;s.cacheName===this.L&&(t&&s.timestamp<t||e&&i>=e?r.push(n.value):i++),n=await n.continue()}const a=[];for(const t of r)await s.delete(S,t.id),a.push(t.url);return a}N(t){return this.L+"|"+K(t)}async getDb(){return this._||(this._=await function(t,e,{blocked:s,upgrade:n,blocking:r,terminated:i}={}){const a=indexedDB.open(t,e),o=k(a);return n&&a.addEventListener("upgradeneeded",t=>{n(k(a.result),t.oldVersion,t.newVersion,k(a.transaction),t)}),s&&a.addEventListener("blocked",t=>s(t.oldVersion,t.newVersion,t)),o.then(t=>{i&&t.addEventListener("close",()=>i()),r&&t.addEventListener("versionchange",t=>r(t.oldVersion,t.newVersion,t))}).catch(()=>{}),o}("workbox-expiration",1,{upgrade:this.C.bind(this)})),this._}}class F{constructor(t,e={}){this.O=!1,this.T=!1,this.k=e.maxEntries,this.B=e.maxAgeSeconds,this.P=e.matchOptions,this.L=t,this.M=new A(t)}async expireEntries(){if(this.O)return void(this.T=!0);this.O=!0;const t=this.B?Date.now()-1e3*this.B:0,e=await this.M.expireEntries(t,this.k),s=await self.caches.open(this.L);for(const t of e)await s.delete(t,this.P);this.O=!1,this.T&&(this.T=!1,b(this.expireEntries()))}async updateTimestamp(t){await this.M.setTimestamp(t,Date.now())}async isURLExpired(t){if(this.B){const e=await this.M.getTimestamp(t),s=Date.now()-1e3*this.B;return void 0===e||e<s}return!1}async delete(){this.T=!1,await this.M.expireEntries(1/0)}}try{self["workbox:range-requests:7.0.0"]&&_()}catch(t){}async function H(t,e){try{if(206===e.status)return e;const n=t.headers.get("range");if(!n)throw new s("no-range-header");const r=function(t){const e=t.trim().toLowerCase();if(!e.startsWith("bytes="))throw new s("unit-must-be-bytes",{normalizedRangeHeader:e});if(e.includes(","))throw new s("single-range-only",{normalizedRangeHeader:e});const n=/(\d*)-(\d*)/.exec(e);if(!n||!n[1]&&!n[2])throw new s("invalid-range-values",{normalizedRangeHeader:e});return{start:""===n[1]?void 0:Number(n[1]),end:""===n[2]?void 0:Number(n[2])}}(n),i=await e.blob(),a=function(t,e,n){const r=t.size;if(n&&n>r||e&&e<0)throw new s("range-not-satisfiable",{size:r,end:n,start:e});let i,a;return void 0!==e&&void 0!==n?(i=e,a=n+1):void 0!==e&&void 0===n?(i=e,a=r):void 0!==n&&void 0===e&&(i=r-n,a=r),{start:i,end:a}}(i,r.start,r.end),o=i.slice(a.start,a.end),c=o.size,h=new Response(o,{status:206,statusText:"Partial Content",headers:e.headers});return h.headers.set("Content-Length",String(c)),h.headers.set("Content-Range",`bytes ${a.start}-${a.end-1}/${i.size}`),h}catch(t){return new Response("",{status:416,statusText:"Range Not Satisfiable"})}}function $(t,e){const s=e();return t.waitUntil(s),s}try{self["workbox:precaching:7.0.0"]&&_()}catch(t){}function z(t){if(!t)throw new s("add-to-cache-list-unexpected-type",{entry:t});if("string"==typeof t){const e=new URL(t,location.href);return{cacheKey:e.href,url:e.href}}const{revision:e,url:n}=t;if(!n)throw new s("add-to-cache-list-unexpected-type",{entry:t});if(!e){const t=new URL(n,location.href);return{cacheKey:t.href,url:t.href}}const r=new URL(n,location.href),i=new URL(n,location.href);return r.searchParams.set("__WB_REVISION__",e),{cacheKey:r.href,url:i.href}}class G{constructor(){this.updatedURLs=[],this.notUpdatedURLs=[],this.handlerWillStart=async({request:t,state:e})=>{e&&(e.originalRequest=t)},this.cachedResponseWillBeUsed=async({event:t,state:e,cachedResponse:s})=>{if("install"===t.type&&e&&e.originalRequest&&e.originalRequest instanceof Request){const t=e.originalRequest.url;s?this.notUpdatedURLs.push(t):this.updatedURLs.push(t)}return s}}}class V{constructor({precacheController:t}){this.cacheKeyWillBeUsed=async({request:t,params:e})=>{const s=(null==e?void 0:e.cacheKey)||this.W.getCacheKeyForURL(t.url);return s?new Request(s,{headers:t.headers}):t},this.W=t}}let J,Q;async function X(t,e){let n=null;if(t.url){n=new URL(t.url).origin}if(n!==self.location.origin)throw new s("cross-origin-copy-response",{origin:n});const r=t.clone(),i={headers:new Headers(r.headers),status:r.status,statusText:r.statusText},a=e?e(i):i,o=function(){if(void 0===J){const t=new Response("");if("body"in t)try{new Response(t.body),J=!0}catch(t){J=!1}J=!1}return J}()?r.body:await r.blob();return new Response(o,a)}class Y extends R{constructor(t={}){t.cacheName=w(t.cacheName),super(t),this.j=!1!==t.fallbackToNetwork,this.plugins.push(Y.copyRedirectedCacheableResponsesPlugin)}async U(t,e){const s=await e.cacheMatch(t);return s||(e.event&&"install"===e.event.type?await this.S(t,e):await this.K(t,e))}async K(t,e){let n;const r=e.params||{};if(!this.j)throw new s("missing-precache-entry",{cacheName:this.cacheName,url:t.url});{const s=r.integrity,i=t.integrity,a=!i||i===s;n=await e.fetch(new Request(t,{integrity:"no-cors"!==t.mode?i||s:void 0})),s&&a&&"no-cors"!==t.mode&&(this.A(),await e.cachePut(t,n.clone()))}return n}async S(t,e){this.A();const n=await e.fetch(t);if(!await e.cachePut(t,n.clone()))throw new s("bad-precaching-response",{url:t.url,status:n.status});return n}A(){let t=null,e=0;for(const[s,n]of this.plugins.entries())n!==Y.copyRedirectedCacheableResponsesPlugin&&(n===Y.defaultPrecacheCacheabilityPlugin&&(t=s),n.cacheWillUpdate&&e++);0===e?this.plugins.push(Y.defaultPrecacheCacheabilityPlugin):e>1&&null!==t&&this.plugins.splice(t,1)}}Y.defaultPrecacheCacheabilityPlugin={cacheWillUpdate:async({response:t})=>!t||t.status>=400?null:t},Y.copyRedirectedCacheableResponsesPlugin={cacheWillUpdate:async({response:t})=>t.redirected?await X(t):t};class Z{constructor({cacheName:t,plugins:e=[],fallbackToNetwork:s=!0}={}){this.F=new Map,this.H=new Map,this.$=new Map,this.u=new Y({cacheName:w(t),plugins:[...e,new V({precacheController:this})],fallbackToNetwork:s}),this.install=this.install.bind(this),this.activate=this.activate.bind(this)}get strategy(){return this.u}precache(t){this.addToCacheList(t),this.G||(self.addEventListener("install",this.install),self.addEventListener("activate",this.activate),this.G=!0)}addToCacheList(t){const e=[];for(const n of t){"string"==typeof n?e.push(n):n&&void 0===n.revision&&e.push(n.url);const{cacheKey:t,url:r}=z(n),i="string"!=typeof n&&n.revision?"reload":"default";if(this.F.has(r)&&this.F.get(r)!==t)throw new s("add-to-cache-list-conflicting-entries",{firstEntry:this.F.get(r),secondEntry:t});if("string"!=typeof n&&n.integrity){if(this.$.has(t)&&this.$.get(t)!==n.integrity)throw new s("add-to-cache-list-conflicting-integrities",{url:r});this.$.set(t,n.integrity)}if(this.F.set(r,t),this.H.set(r,i),e.length>0){const t=`Workbox is precaching URLs without revision info: ${e.join(", ")}\nThis is generally NOT safe. Learn more at https://bit.ly/wb-precache`;console.warn(t)}}}install(t){return $(t,async()=>{const e=new G;this.strategy.plugins.push(e);for(const[e,s]of this.F){const n=this.$.get(s),r=this.H.get(e),i=new Request(e,{integrity:n,cache:r,credentials:"same-origin"});await Promise.all(this.strategy.handleAll({params:{cacheKey:s},request:i,event:t}))}const{updatedURLs:s,notUpdatedURLs:n}=e;return{updatedURLs:s,notUpdatedURLs:n}})}activate(t){return $(t,async()=>{const t=await self.caches.open(this.strategy.cacheName),e=await t.keys(),s=new Set(this.F.values()),n=[];for(const r of e)s.has(r.url)||(await t.delete(r),n.push(r.url));return{deletedURLs:n}})}getURLsToCacheKeys(){return this.F}getCachedURLs(){return[...this.F.keys()]}getCacheKeyForURL(t){const e=new URL(t,location.href);return this.F.get(e.href)}getIntegrityForCacheKey(t){return this.$.get(t)}async matchPrecache(t){const e=t instanceof Request?t.url:t,s=this.getCacheKeyForURL(e);if(s){return(await self.caches.open(this.strategy.cacheName)).match(s)}}createHandlerBoundToURL(t){const e=this.getCacheKeyForURL(t);if(!e)throw new s("non-precached-url",{url:t});return s=>(s.request=new Request(t),s.params=Object.assign({cacheKey:e},s.params),this.strategy.handle(s))}}const tt=()=>(Q||(Q=new Z),Q);class et extends r{constructor(t,e){super(({request:s})=>{const n=t.getURLsToCacheKeys();for(const r of function*(t,{ignoreURLParametersMatching:e=[/^utm_/,/^fbclid$/],directoryIndex:s="index.html",cleanURLs:n=!0,urlManipulation:r}={}){const i=new URL(t,location.href);i.hash="",yield i.href;const a=function(t,e=[]){for(const s of[...t.searchParams.keys()])e.some(t=>t.test(s))&&t.searchParams.delete(s);return t}(i,e);if(yield a.href,s&&a.pathname.endsWith("/")){const t=new URL(a.href);t.pathname+=s,yield t.href}if(n){const t=new URL(a.href);t.pathname+=".html",yield t.href}if(r){const t=r({url:i});for(const e of t)yield e.href}}(s.url,e)){const e=n.get(r);if(e){return{cacheKey:e,integrity:t.getIntegrityForCacheKey(e)}}}},t.strategy)}}t.CacheFirst=class extends R{async U(t,e){let n,r=await e.cacheMatch(t);if(!r)try{r=await e.fetchAndCachePut(t)}catch(t){t instanceof Error&&(n=t)}if(!r)throw new s("no-response",{url:t.url,error:n});return r}},t.ExpirationPlugin=class{constructor(t={}){this.cachedResponseWillBeUsed=async({event:t,request:e,cacheName:s,cachedResponse:n})=>{if(!n)return null;const r=this.V(n),i=this.J(s);b(i.expireEntries());const a=i.updateTimestamp(e.url);if(t)try{t.waitUntil(a)}catch(t){}return r?n:null},this.cacheDidUpdate=async({cacheName:t,request:e})=>{const s=this.J(t);await s.updateTimestamp(e.url),await s.expireEntries()},this.X=t,this.B=t.maxAgeSeconds,this.Y=new Map,t.purgeOnQuotaError&&function(t){g.add(t)}(()=>this.deleteCacheAndMetadata())}J(t){if(t===d())throw new s("expire-custom-caches-only");let e=this.Y.get(t);return e||(e=new F(t,this.X),this.Y.set(t,e)),e}V(t){if(!this.B)return!0;const e=this.Z(t);if(null===e)return!0;return e>=Date.now()-1e3*this.B}Z(t){if(!t.headers.has("date"))return null;const e=t.headers.get("date"),s=new Date(e).getTime();return isNaN(s)?null:s}async deleteCacheAndMetadata(){for(const[t,e]of this.Y)await self.caches.delete(t),await e.delete();this.Y=new Map}},t.NetworkFirst=class extends R{constructor(t={}){super(t),this.plugins.some(t=>"cacheWillUpdate"in t)||this.plugins.unshift(u),this.tt=t.networkTimeoutSeconds||0}async U(t,e){const n=[],r=[];let i;if(this.tt){const{id:s,promise:a}=this.et({request:t,logs:n,handler:e});i=s,r.push(a)}const a=this.st({timeoutId:i,request:t,logs:n,handler:e});r.push(a);const o=await e.waitUntil((async()=>await e.waitUntil(Promise.race(r))||await a)());if(!o)throw new s("no-response",{url:t.url});return o}et({request:t,logs:e,handler:s}){let n;return{promise:new Promise(e=>{n=setTimeout(async()=>{e(await s.cacheMatch(t))},1e3*this.tt)}),id:n}}async st({timeoutId:t,request:e,logs:s,handler:n}){let r,i;try{i=await n.fetchAndCachePut(e)}catch(t){t instanceof Error&&(r=t)}return t&&clearTimeout(t),!r&&i||(i=await n.cacheMatch(e)),i}},t.RangeRequestsPlugin=class{constructor(){this.cachedResponseWillBeUsed=async({request:t,cachedResponse:e})=>e&&t.headers.has("range")?await H(t,e):e}},t.StaleWhileRevalidate=class extends R{constructor(t={}){super(t),this.plugins.some(t=>"cacheWillUpdate"in t)||this.plugins.unshift(u)}async U(t,e){const n=e.fetchAndCachePut(t).catch(()=>{});e.waitUntil(n);let r,i=await e.cacheMatch(t);if(i);else try{i=await n}catch(t){t instanceof Error&&(r=t)}if(!i)throw new s("no-response",{url:t.url,error:r});return i}},t.cleanupOutdatedCaches=function(){self.addEventListener("activate",t=>{const e=w();t.waitUntil((async(t,e="-precache-")=>{const s=(await self.caches.keys()).filter(s=>s.includes(e)&&s.includes(self.registration.scope)&&s!==t);return await Promise.all(s.map(t=>self.caches.delete(t))),s})(e).then(t=>{}))})},t.clientsClaim=function(){self.addEventListener("activate",()=>self.clients.claim())},t.precacheAndRoute=function(t,e){!function(t){tt().precache(t)}(t),function(t){const e=tt();h(new et(e,t))}(e)},t.registerRoute=h});
</file>

<file path="README_NEW.md">
# ğŸ‰ Meras Events - ØªØ·Ø¨ÙŠÙ‚ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ§Øª Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ

> **ØªØ·Ø¨ÙŠÙ‚ ÙˆÙŠØ¨ Ø­Ø¯ÙŠØ« Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ§Øª ÙˆØ§Ù„Ø­ÙÙ„Ø§Øª ÙˆØ§Ù„Ù…Ù†Ø§Ø³Ø¨Ø§Øª Ø¨Ø³Ù‡ÙˆÙ„Ø© ÙˆØ§Ø­ØªØ±Ø§ÙÙŠØ©**

![Status](https://img.shields.io/badge/Status-Production%20Ready-brightgreen)
![Build](https://img.shields.io/badge/Build-Passing-brightgreen)
![Tests](https://img.shields.io/badge/Tests-30%2F30%20Passing-brightgreen)
![License](https://img.shields.io/badge/License-MIT-blue)

---

## âœ¨ Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©

### ğŸ¯ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ§Øª
- âœ… Ø¥Ù†Ø´Ø§Ø¡ ÙˆØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ§Øª Ø¨Ø³Ù‡ÙˆÙ„Ø©
- âœ… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø£Ø³Ø¹Ø§Ø± ÙˆØ§Ù„Ø¨Ø§Ù‚Ø§Øª
- âœ… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù‚Ø§Ø¹Ø¯ ÙˆØ§Ù„Ø·Ø§ÙˆÙ„Ø§Øª
- âœ… ØªØªØ¨Ø¹ Ø§Ù„Ø­Ø§Ø¶Ø±ÙŠÙ† ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹

### ğŸ« Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªØ°Ø§ÙƒØ±
- âœ… Ø¥ØµØ¯Ø§Ø± ØªØ°Ø§ÙƒØ± Ø±Ù‚Ù…ÙŠØ©
- âœ… Ø±Ù…ÙˆØ² QR ÙØ±ÙŠØ¯Ø©
- âœ… ØªØ­Ù…ÙŠÙ„ PDF
- âœ… Ø­Ø§Ù„Ø© RSVP Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ©

### ğŸ“± ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
- âœ… ÙˆØ§Ø¬Ù‡Ø© Ø¹Ø±Ø¨ÙŠØ© ÙƒØ§Ù…Ù„Ø©
- âœ… ØªØµÙ…ÙŠÙ… Ø§Ø­ØªØ±Ø§ÙÙŠ (RTL)
- âœ… Ø¯Ø¹Ù… Ø§Ù„Ù‡Ø§ØªÙ Ø§Ù„Ø°ÙƒÙŠ
- âœ… Ø¨Ø¯ÙˆÙ† Ø¥Ø¹Ù„Ø§Ù†Ø§Øª

### ğŸ” Ø§Ù„Ø£Ù…Ø§Ù†
- âœ… Supabase Row Level Security
- âœ… Zod validation Ø´Ø§Ù…Ù„
- âœ… HTTP-only cookies
- âœ… Ù…ØªØºÙŠØ±Ø§Øª Ø¨ÙŠØ¦Ø© Ù…Ø­Ù…ÙŠØ©

### âš¡ Ø§Ù„Ø£Ø¯Ø§Ø¡
- âœ… SWR caching Ø°ÙƒÙŠ
- âœ… ØªØ­Ù…ÙŠÙ„ Ø³Ø±ÙŠØ¹ (< 2 Ø«Ø§Ù†ÙŠØ©)
- âœ… CDN Ø¹Ø§Ù„Ù…ÙŠ
- âœ… Serverless API

---

## ğŸš€ Ø§Ù„Ù†Ø´Ø± Ø§Ù„Ø³Ø±ÙŠØ¹

### Ø§Ù„Ø®Ø·ÙˆØ© 1: Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ Vercel
https://vercel.com/new

### Ø§Ù„Ø®Ø·ÙˆØ© 2: Ø§Ø®ØªØ± GitHub
Ø§Ø®ØªØ± `event-manager` ÙˆØ§Ù†Ù‚Ø± **Deploy**

### Ø§Ù„Ø®Ø·ÙˆØ© 3: Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø©
Ø£Ø¶Ù Ù…Ù† Supabase:
```env
NEXT_PUBLIC_SUPABASE_URL=https://...
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJ...
```

âœ… **ØªÙ…!** Ù…ÙˆÙ‚Ø¹Ùƒ Ø­ÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª! ğŸŠ

ğŸ“– **Ø¯Ù„ÙŠÙ„ ÙƒØ§Ù…Ù„**: [DEPLOY_NOW.md](./DEPLOY_NOW.md)

---

## ğŸ› ï¸ Ø§Ù„ØªØ·ÙˆÙŠØ± Ø§Ù„Ù…Ø­Ù„ÙŠ

### Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª
- Node.js 20+
- npm/yarn
- Ø­Ø³Ø§Ø¨ Supabase

### Ø§Ù„ØªØ«Ø¨ÙŠØª
```bash
git clone https://github.com/D7mi1/event-manager.git
cd event-manager
npm install
```

### Ø§Ù„ØªØ´ØºÙŠÙ„
```bash
npm run dev
# Ø«Ù… Ø§ÙØªØ­ http://localhost:3000
```

### Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±
```bash
npm test              # ØªØ´ØºÙŠÙ„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª
npm test -- watch    # ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø©
npm run build        # Ø¨Ù†Ø§Ø¡ Ù„Ù„Ø¥Ù†ØªØ§Ø¬
```

---

## ğŸ“š Ø§Ù„ØªÙˆØ«ÙŠÙ‚

| Ø§Ù„Ù…Ù„Ù | Ø§Ù„ÙˆØµÙ |
|------|------|
| **[DEPLOY_NOW.md](./DEPLOY_NOW.md)** | âš¡ Ù†Ø´Ø± ÙÙŠ 3 Ø®Ø·ÙˆØ§Øª |
| **[VERCEL_GUIDE_AR.md](./VERCEL_GUIDE_AR.md)** | ğŸ“– Ø¯Ù„ÙŠÙ„ Ø´Ø§Ù…Ù„ Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© |
| **[DOCUMENTATION.md](./DOCUMENTATION.md)** | ğŸ“• ØªÙˆØ«ÙŠÙ‚ ØªÙ‚Ù†ÙŠ ÙƒØ§Ù…Ù„ |
| **[API_DOCUMENTATION.md](./API_DOCUMENTATION.md)** | ğŸ”Œ Ù…Ø±Ø¬Ø¹ API |
| **[DOCUMENTATION_INDEX.md](./DOCUMENTATION_INDEX.md)** | ğŸ“š ÙÙ‡Ø±Ø³ Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª |

---

## ğŸ—ï¸ Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„ØªÙ‚Ù†ÙŠØ©

```
Framework:       Next.js 16.1.0 + TypeScript
Database:        Supabase (PostgreSQL)
Caching:         SWR 3.0+
Validation:      Zod 3.22+
Styling:         Tailwind CSS 4
Animation:       Framer Motion
Monitoring:      Sentry
Testing:         Jest + React Testing Library
Deployment:      Vercel
```

---

## ğŸ“Š Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª

| Ø§Ù„Ù…Ù‚ÙŠØ§Ø³ | Ø§Ù„Ø±Ù‚Ù… |
|--------|------|
| **Ø§Ù„ØµÙØ­Ø§Øª** | 21 ØµÙØ­Ø© |
| **Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª** | 20+ Ù…ÙƒÙˆÙ† |
| **Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª** | 30 Ø§Ø®ØªØ¨Ø§Ø± âœ… |
| **Ø§Ù„ØªÙˆØ«ÙŠÙ‚** | 8 Ù…Ù„ÙØ§Øª Ø´Ø§Ù…Ù„Ø© |
| **Ø§Ù„Ø£Ø¯Ø§Ø¡** | < 2 Ø«Ø§Ù†ÙŠØ© ØªØ­Ù…ÙŠÙ„ |
| **Ø§Ù„Ø£Ù…Ø§Ù†** | A+ rating |

---

## ğŸ¯ Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹

- âœ… Ø§Ù„ØªØ·ÙˆÙŠØ±: **Ù…ÙƒØªÙ…Ù„ 100%**
- âœ… Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª: **30/30 Ù†Ø§Ø¬Ø­Ø©**
- âœ… Ø§Ù„Ø¨Ù†Ø§Ø¡: **Ù†Ø§Ø¬Ø­ Ø¨Ø¯ÙˆÙ† Ø£Ø®Ø·Ø§Ø¡**
- âœ… Ø§Ù„Ø£Ù…Ø§Ù†: **Ù…Ø¹ØªÙ…Ø¯**
- âœ… Ø§Ù„ØªÙˆØ«ÙŠÙ‚: **Ø´Ø§Ù…Ù„ ÙˆÙƒØ§Ù…Ù„**
- âœ… Ø§Ù„Ù†Ø´Ø±: **Ø¬Ø§Ù‡Ø² Ø§Ù„Ø¢Ù†**

---

## ğŸ”— Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ù…Ù‡Ù…Ø©

- **GitHub**: https://github.com/D7mi1/event-manager
- **Vercel**: https://vercel.com
- **Supabase**: https://supabase.com
- **Next.js Docs**: https://nextjs.org/docs
- **Tailwind CSS**: https://tailwindcss.com

---

## ğŸ“ Ø§Ù„Ø¯Ø¹Ù…

- ğŸ“§ Ø§Ù„Ø¨Ø±ÙŠØ¯: support@meras.events
- ğŸ’¬ Ø§Ù„Ù…Ø¬ØªÙ…Ø¹: GitHub Discussions
- ğŸ› Ø§Ù„Ø£Ø®Ø·Ø§Ø¡: GitHub Issues

---

## ğŸ“„ Ø§Ù„ØªØ±Ø®ÙŠØµ

MIT License - Ø§Ù‚Ø±Ø£ [LICENSE](./LICENSE) Ù„Ù„ØªÙØ§ØµÙŠÙ„

---

## ğŸ™ Ø´ÙƒØ±Ø§Ù‹

Ø´ÙƒØ±Ø§Ù‹ Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Meras! Ù„Ùˆ Ø£Ø¹Ø¬Ø¨Ùƒ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ØŒ **Ù‚ÙŠÙ‘Ù…Ù‡ Ø¨Ù€ â­**

**Ù…Ø³ØªØ¹Ø¯ Ù„Ù„Ù†Ø´Ø±ØŸ** Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ [DEPLOY_NOW.md](./DEPLOY_NOW.md) ğŸš€
</file>

<file path="README.md">
This is a [Next.js](https://nextjs.org) project bootstrapped with [`create-next-app`](https://nextjs.org/docs/app/api-reference/cli/create-next-app).

## Getting Started

First, run the development server:

```bash
npm run dev
# or
yarn dev
# or
pnpm dev
# or
bun dev
```

Open [http://localhost:3000](http://localhost:3000) with your browser to see the result.

You can start editing the page by modifying `app/page.tsx`. The page auto-updates as you edit the file.

This project uses [`next/font`](https://nextjs.org/docs/app/building-your-application/optimizing/fonts) to automatically optimize and load [Geist](https://vercel.com/font), a new font family for Vercel.

## Learn More

To learn more about Next.js, take a look at the following resources:

- [Next.js Documentation](https://nextjs.org/docs) - learn about Next.js features and API.
- [Learn Next.js](https://nextjs.org/learn) - an interactive Next.js tutorial.

You can check out [the Next.js GitHub repository](https://github.com/vercel/next.js) - your feedback and contributions are welcome!

## Deploy on Vercel

The easiest way to deploy your Next.js app is to use the [Vercel Platform](https://vercel.com/new?utm_medium=default-template&filter=next.js&utm_source=create-next-app&utm_campaign=create-next-app-readme) from the creators of Next.js.

Check out our [Next.js deployment documentation](https://nextjs.org/docs/app/building-your-application/deploying) for more details.
</file>

<file path="READY_FOR_DEPLOYMENT.md">
# âœ… Meras Events - Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©

**Ø§Ù„ØªØ§Ø±ÙŠØ®**: 31 Ø¯ÙŠØ³Ù…Ø¨Ø± 2025  
**Ø§Ù„Ø­Ø§Ù„Ø©**: ğŸŸ¢ **Ø¬Ø§Ù‡Ø² Ù„Ù„Ù†Ø´Ø± Ø¹Ù„Ù‰ Vercel**

---

## ğŸ“Š Ù…Ù„Ø®Øµ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹

| Ø§Ù„Ù…Ù‚ÙŠØ§Ø³ | Ø§Ù„Ø­Ø§Ù„Ø© | Ø§Ù„ØªÙØ§ØµÙŠÙ„ |
|--------|--------|---------|
| **Ø§Ù„Ø¨Ù†Ø§Ø¡** | âœ… | `npm run build` Ù†Ø§Ø¬Ø­ 100% |
| **Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª** | âœ… | 30 Ø§Ø®ØªØ¨Ø§Ø± (validation + schemas) |
| **TypeScript** | âœ… | Ù„Ø§ Ø£Ø®Ø·Ø§Ø¡ Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ØµÙ„Ø§Ø­ |
| **Ø§Ù„ØµÙØ­Ø§Øª** | âœ… | 21 ØµÙØ­Ø© Ø¬Ø§Ù‡Ø²Ø© |
| **API** | âœ… | Serverless functions Ø¬Ø§Ù‡Ø²Ø© |
| **Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª** | âœ… | Supabase Ù…ÙØªØµÙ„ |
| **GitHub** | âœ… | Ø§Ù„ÙƒÙˆØ¯ Ù…Ø±ÙÙˆØ¹ ÙˆÙ…ÙØ­Ø¯Ù‘Ø« |
| **Vercel** | â³ | Ù…ÙÙ‡ÙŠØ£Ø© - Ø¬Ø§Ù‡Ø²Ø© Ù„Ù„Ø±Ø¨Ø· |

---

## ğŸ”§ Ø§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ù…Ø¶Ø§ÙØ©

### 1ï¸âƒ£ **Ø§Ù„Ø£Ø¯Ø§Ø¡ ÙˆØ§Ù„ÙƒØ§Ø´**
- âœ… SWR hooks Ù„Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø¤Ù‚Øª Ø§Ù„Ø°ÙƒÙŠ
- âœ… Ø§Ø³ØªØ¯Ø¹Ø§Ø¡Ø§Øª API Ù…Ø­Ø³Ù‘Ù†Ø©
- âœ… ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ù…ÙƒØ±Ø±Ø© 50%

### 2ï¸âƒ£ **Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª**
- âœ… Zod schemas Ù„Ù„ØªØ­Ù‚Ù‚ Ø§Ù„ØµØ§Ø±Ù…
- âœ… 15+ Ø¯ÙˆØ§Ù„ validation Ù…Ø®ØµØµØ©
- âœ… Ø±Ø³Ø§Ø¦Ù„ Ø®Ø·Ø£ ÙˆØ§Ø¶Ø­Ø© Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
- âœ… Ù…Ù†Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø®Ø§Ø·Ø¦Ø© Ù…Ù† Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ù€ DB

### 3ï¸âƒ£ **ØªØªØ¨Ø¹ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡**
- âœ… Sentry integration (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
- âœ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
- âœ… Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø£Ø¯Ø§Ø¡

### 4ï¸âƒ£ **Ø§Ù„Ø£Ù…Ø§Ù†**
- âœ… Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø© Ù…Ø­Ù…ÙŠØ©
- âœ… Cookies HTTP-only Ø¢Ù…Ù†Ø©
- âœ… Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø­Ø³Ø§Ø³Ø© Ù…Ø®ÙÙŠØ©

### 5ï¸âƒ£ **Ø§Ù„Ø¯Ø¹Ù… Ù„Ù„Ø¹Ø±Ø¨ÙŠØ©**
- âœ… ÙˆØ§Ø¬Ù‡Ø§Øª ÙƒØ§Ù…Ù„Ø© Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
- âœ… Ø§Ù„Ø§ØªØ¬Ø§Ù‡ RTL
- âœ… Ø£Ø³Ù…Ø§Ø¡ ÙˆØªØ§Ø±ÙŠØ® Ù…Ø­Ù„ÙŠØ©

---

## ğŸ“ Ù…Ù„ÙØ§Øª Ø§Ù„Ù†Ø´Ø± Ø§Ù„Ù…ÙÙ†Ø´Ø£Ø©

```
âœ… vercel.json           - Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Vercel
âœ… DEPLOYMENT.md         - Ø¯Ù„ÙŠÙ„ Ø§Ù„Ù†Ø´Ø± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ
âœ… VERCEL_GUIDE_AR.md   - Ø¯Ù„ÙŠÙ„ Ø´Ø§Ù…Ù„ Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© (158 Ø³Ø·Ø±)
âœ… DEPLOY_QUICK_START.md - Ø¨Ø¯Ø¡ Ø³Ø±ÙŠØ¹
âœ… deploy.sh             - Ø³ÙƒØ±ÙŠØ¨Øª Linux/Mac
âœ… deploy.bat            - Ø³ÙƒØ±ÙŠØ¨Øª Windows
```

---

## ğŸš€ Ø®Ø·ÙˆØ§Øª Ø§Ù„Ù†Ø´Ø± (Ù…Ù„Ø®Øµ)

### Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰ (Ø£Ø³Ù‡Ù„ - 3 Ø®Ø·ÙˆØ§Øª):
```
1. Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ vercel.com/new
2. Ø§Ø®ØªØ± event-manager Ù…Ù† GitHub
3. Ø£Ø¶Ù Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø© â†’ Done! âœ…
```

### Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ© (CLI):
```bash
vercel login
vercel
# Ø£Ø¶Ù Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø©
# Redeploy
```

---

## ğŸ”‘ Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©

```env
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGc...
NEXT_PUBLIC_SENTRY_DSN=https://xxx@sentry.io/yyy  # Ø§Ø®ØªÙŠØ§Ø±ÙŠ
```

---

## ğŸ“ˆ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª

| Ø§Ù„Ù…Ù‚ÙŠØ§Ø³ | Ø§Ù„Ø±Ù‚Ù… |
|--------|------|
| **Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø¹Ø¯Ù‘Ù„Ø©** | 17 Ù…Ù„Ù |
| **Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„ØªÙŠ ØªÙ… Ø¥ØµÙ„Ø§Ø­Ù‡Ø§** | 12+ Ø®Ø·Ø£ TypeScript |
| **Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„Ù†Ø§Ø¬Ø­Ø©** | 30/30 âœ… |
| **Commits** | 10+ commits Ù…Ù†Ø¸Ù…Ø© |
| **Ø§Ù„ØªÙˆØ«ÙŠÙ‚** | 5 Ù…Ù„ÙØ§Øª Ø´Ø§Ù…Ù„Ø© |

---

## ğŸ¯ Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©

### Ø¨Ø¹Ø¯ Ø§Ù„Ù†Ø´Ø± Ø§Ù„Ø£ÙˆÙ„:
```bash
# ÙƒÙ„ update Ø³ÙŠØªÙ… Ù†Ø´Ø±Ù‡ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹:
git push origin main
# â†’ Vercel ÙŠÙ†Ø´Ø± ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ ğŸš€
```

### Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ©:
- âœ… Preview URLs Ù„ÙƒÙ„ PR
- âœ… Ù†Ø´Ø± ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¹Ù†Ø¯ ÙƒÙ„ push
- âœ… HTTPS Ù…Ø¬Ø§Ù†ÙŠ
- âœ… CDN Ø¹Ø§Ù„Ù…ÙŠ
- âœ… 99.9% uptime

---

## ğŸ’¡ Ù†ØµØ§Ø¦Ø­ Ù…Ù‡Ù…Ø©

1. **Ù„Ø§ ØªØ¶Ø¹ Ø§Ù„Ø£Ø³Ø±Ø§Ø± ÙÙŠ Ø§Ù„ÙƒÙˆØ¯** â†’ Ø§Ø³ØªØ®Ø¯Ù… Environment Variables
2. **Ø§Ø®ØªØ¨Ø± Ù…Ø­Ù„ÙŠØ§Ù‹ Ø£ÙˆÙ„Ø§Ù‹** â†’ `npm run dev`
3. **ØªØ§Ø¨Ø¹ Ø§Ù„Ø³Ø¬Ù„Ø§Øª** â†’ `vercel logs`
4. **Ø§Ø³ØªØ®Ø¯Ù… Ø±Ø³Ø§Ø¦Ù„ commit ÙˆØ§Ø¶Ø­Ø©** â†’ Ø£Ø³Ù‡Ù„ Ù„Ù„ØªØªØ¨Ø¹
5. **Ø§Ø­ØªÙØ¸ Ø¨Ù€ main Ù†Ø¸ÙŠÙØ©** â†’ Ø§Ø®ØªØ¨Ø± ÙÙŠ ÙØ±ÙˆØ¹ Ø£Ø®Ø±Ù‰ Ø£ÙˆÙ„Ø§Ù‹

---

## ğŸ“ Ø§Ù„Ù…ÙˆØ§Ø±Ø¯

- **GitHub**: https://github.com/D7mi1/event-manager
- **Vercel Docs**: https://vercel.com/docs
- **Next.js**: https://nextjs.org/docs
- **Supabase**: https://supabase.com/docs

---

## âœ¨ Ø§Ù„Ø®Ù„Ø§ØµØ©

### Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©:
- âœ… Ø§Ù„ÙƒÙˆØ¯: **100% Ø¬Ø§Ù‡Ø²**
- âœ… Ø§Ù„Ø¨Ù†Ø§Ø¡: **100% Ù†Ø§Ø¬Ø­**
- âœ… Ø§Ù„ØªÙˆØ«ÙŠÙ‚: **Ø´Ø§Ù…Ù„**
- âœ… Ø§Ù„Ù†Ø´Ø±: **3 Ø®Ø·ÙˆØ§Øª ÙÙ‚Ø·**

### Ø§Ù„Ø­Ø§Ù„Ø© Ø¨Ø¹Ø¯ Ø§Ù„Ù†Ø´Ø±:
- ğŸŒ Ù…ÙˆÙ‚Ø¹ Ù…Ø¨Ø§Ø´Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª
- âš¡ Ø³Ø±Ø¹Ø© Ø¹Ø§Ù„ÙŠØ© Ù…Ù† CDN Ø¹Ø§Ù„Ù…ÙŠ
- ğŸ”’ Ø¢Ù…Ø§Ù† SSL ØªÙ„Ù‚Ø§Ø¦ÙŠ
- ğŸ”„ Ù†Ø´Ø± ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù…Ù† GitHub

---

**ğŸ‰ Ù…Ø¨Ø±ÙˆÙƒ! ØªØ·Ø¨ÙŠÙ‚Ùƒ Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¥Ø·Ù„Ø§Ù‚!**

**Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©: Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ Vercel ÙˆØ§Ø¨Ø¯Ø£ Ø§Ù„Ù†Ø´Ø±! ğŸš€**
</file>

<file path="store/eventStore.ts">
import { create } from 'zustand';
import { supabase } from '@/app/utils/supabase/client';

export interface Attendee {
  id: string;
  name: string;
  phone: string;
  category: string;
  status: string; // 'invited', 'confirmed', 'declined'
  attended: boolean;
  updated_at: string;
  seats?: any[];
}

interface EventState {
  // --- Data ---
  eventId: string;
  eventDetails: any;
  attendees: Attendee[];
  isLoading: boolean;
  searchTerm: string;
  filterType: 'all' | 'confirmed' | 'attended' | 'pending';
  
  messageSettings: {
    reminder: { enabled: boolean; text: string };
    location: { enabled: boolean; text: string };
  };

  // --- Modals State ---
  isAddModalOpen: boolean;
  isMessageModalOpen: boolean;
  isEditEventModalOpen: boolean;
  isImportModalOpen: boolean;
  isQueueModalOpen: boolean; // âœ… ØªÙ…Øª Ø¥Ø¶Ø§ÙØªÙ‡

  // --- Actions ---
  setEventId: (id: string) => void;
  setSearchTerm: (term: string) => void;
  setFilterType: (type: any) => void;
  
  toggleAddModal: (isOpen: boolean) => void;
  toggleMessageModal: (isOpen: boolean) => void;
  toggleEditEventModal: (isOpen: boolean) => void;
  toggleImportModal: (isOpen: boolean) => void;
  toggleQueueModal: (isOpen: boolean) => void; // âœ… ØªÙ…Øª Ø¥Ø¶Ø§ÙØªÙ‡
  
  // --- Operations ---
  fetchData: () => Promise<void>;
  addGuest: (guest: { name: string, phone: string, category: string }) => Promise<void>;
  deleteGuest: (id: string) => Promise<void>;
  bulkDelete: (ids: string[]) => Promise<void>;
  toggleAttendance: (id: string, currentStatus: boolean) => Promise<void>;
  bulkAddGuests: (guests: any[]) => Promise<void>;
  updateEventDetails: (details: { name: string; location_name: string }) => Promise<void>;
  updateMessageSettings: (settings: any) => Promise<void>;
  markInviteAsSent: (id: string) => Promise<void>; // âœ… ØªÙ…Øª Ø¥Ø¶Ø§ÙØªÙ‡
}

export const useEventStore = create<EventState>((set, get) => ({
  eventId: '',
  eventDetails: null,
  attendees: [],
  isLoading: true,
  searchTerm: '',
  filterType: 'all',
  
  messageSettings: {
    reminder: { enabled: true, text: "Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨ÙƒØŒ Ù†Ø°ÙƒØ±Ùƒ Ø¨Ù…ÙˆØ¹Ø¯ Ø­ÙÙ„Ù†Ø§ ØºØ¯Ø§Ù‹.. Ø§Ù„Ù…ÙˆÙ‚Ø¹: {location_link}" },
    location: { enabled: false, text: "Ø­ÙŠØ§ÙƒÙ… Ø§Ù„Ù„Ù‡! ÙØªØ­Ù†Ø§ Ø§Ù„Ø£Ø¨ÙˆØ§Ø¨ Ø§Ù„Ø¢Ù† ÙˆÙ†Ù†ØªØ¸Ø±ÙƒÙ… âœ¨" }
  },

  isAddModalOpen: false,
  isMessageModalOpen: false,
  isEditEventModalOpen: false,
  isImportModalOpen: false,
  isQueueModalOpen: false,

  setEventId: (id) => set({ eventId: id }),
  setSearchTerm: (term) => set({ searchTerm: term }),
  setFilterType: (type) => set({ filterType: type }),
  
  toggleAddModal: (isOpen) => set({ isAddModalOpen: isOpen }),
  toggleMessageModal: (isOpen) => set({ isMessageModalOpen: isOpen }),
  toggleEditEventModal: (isOpen) => set({ isEditEventModalOpen: isOpen }),
  toggleImportModal: (isOpen) => set({ isImportModalOpen: isOpen }),
  toggleQueueModal: (isOpen) => set({ isQueueModalOpen: isOpen }),

  fetchData: async () => {
    const { eventId } = get();
    if (!eventId) return;
    const { data: event } = await supabase.from('events').select('*').eq('id', eventId).single();
    const { data: attendees } = await supabase.from('attendees').select('*, seats(*, table:tables(name))').eq('event_id', eventId).order('created_at', { ascending: false });
    set({ eventDetails: event, attendees: attendees || [], isLoading: false });
  },

  addGuest: async (guest) => {
    const { eventId, attendees } = get();
    const { data, error } = await supabase.from('attendees').insert([{ ...guest, event_id: eventId, status: 'confirmed' }]).select().single();
    if (data && !error) set({ attendees: [data, ...attendees], isAddModalOpen: false });
  },

  bulkAddGuests: async (guests) => {
    const { eventId, attendees } = get();
    const formattedGuests = guests.map(g => ({ ...g, event_id: eventId, status: 'confirmed', attended: false, updated_at: new Date().toISOString() }));
    const { data, error } = await supabase.from('attendees').upsert(formattedGuests, { onConflict: 'event_id, phone', ignoreDuplicates: true }).select();
    
    if (error) { alert(`ÙØ´Ù„: ${error.message}`); } 
    else if (data) {
      const newIds = new Set(data.map(d => d.id));
      const mergedList = [...data, ...attendees.filter(a => !newIds.has(a.id))];
      set({ attendees: mergedList, isImportModalOpen: false });
      alert(`ØªÙ…Øª Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­!`);
    }
  },

  deleteGuest: async (id) => {
    await supabase.from('attendees').delete().eq('id', id);
    set((state) => ({ attendees: state.attendees.filter((a) => a.id !== id) }));
  },

  bulkDelete: async (ids) => {
    await supabase.from('attendees').delete().in('id', ids);
    set((state) => ({ attendees: state.attendees.filter((a) => !ids.includes(a.id)) }));
  },

  toggleAttendance: async (id, currentStatus) => {
    const newStatus = !currentStatus;
    set(state => ({ attendees: state.attendees.map(a => a.id === id ? { ...a, attended: newStatus, updated_at: new Date().toISOString() } : a) }));
    await supabase.from('attendees').update({ attended: newStatus }).eq('id', id);
  },

  updateEventDetails: async (details) => {
    const { eventId } = get();
    await supabase.from('events').update(details).eq('id', eventId);
    set((state) => ({ eventDetails: { ...state.eventDetails, ...details }, isEditEventModalOpen: false }));
  },

  updateMessageSettings: async (settings) => {
    set({ messageSettings: settings, isMessageModalOpen: false });
    alert("ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª");
  },

  // âœ… Ø¯Ø§Ù„Ø© ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø¥Ø±Ø³Ø§Ù„
  markInviteAsSent: async (id) => {
    set(state => ({
      attendees: state.attendees.map(a => a.id === id ? { ...a, status: 'invited' } : a)
    }));
    await supabase.from('attendees').update({ status: 'invited' }).eq('id', id);
  }
}));
</file>

<file path="tailwind.config.ts">
import type { Config } from "tailwindcss";

const config: Config = {
  content: [
    // Ù‡Ø°Ø§ Ø§Ù„Ø³Ø·Ø± ÙŠØ¨Ø­Ø« Ø¯Ø§Ø®Ù„ Ù…Ø¬Ù„Ø¯ app ÙˆØ¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¬Ù„Ø¯Ø§Øª Ø§Ù„ÙØ±Ø¹ÙŠØ© ÙÙŠÙ‡
    "./app/**/*.{js,ts,jsx,tsx,mdx}",
    // Ù‡Ø°Ø§ Ø§Ù„Ø³Ø·Ø± ÙŠØ¨Ø­Ø« ÙÙŠ Ù…Ø¬Ù„Ø¯ components Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ Ø§Ù„Ø°ÙŠ ØªØ¶Ø¹Ù‡ ÙÙŠ Ø§Ù„Ø¬Ø°Ø±
    "./components/**/*.{js,ts,jsx,tsx,mdx}",
    // Ù‡Ø°Ø§ Ø§Ù„Ø³Ø·Ø± ÙŠØ¨Ø­Ø« Ø§Ø­ØªÙŠØ§Ø·Ø§Ù‹ ÙÙŠ Ø£ÙŠ Ù…ÙƒØ§Ù† Ø¢Ø®Ø±
    "./src/**/*.{js,ts,jsx,tsx,mdx}",
  ],
  theme: {
    extend: {
      colors: {
        background: {
          DEFAULT: '#0F0F12',
          card: '#18181B',
          surface: '#27272A'
        },
        primary: {
          400: '#D4B483', 
          500: '#C19D65', // Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø°Ù‡Ø¨ÙŠ Ø§Ù„ÙØ®Ù…
          600: '#A4824E',
        },
        action: {
          DEFAULT: '#2563EB', // Ø§Ù„Ø£Ø²Ø±Ù‚ Ù„Ù„Ø£Ø¹Ù…Ø§Ù„
        }
      },
    },
  },
  plugins: [],
};
export default config;
</file>

<file path="tsconfig.json">
{
  "compilerOptions": {
    "target": "ES2017",
    "lib": ["dom", "dom.iterable", "esnext"],
    "allowJs": true,
    "skipLibCheck": true,
    "strict": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "react-jsx",
    "incremental": true,
    "plugins": [
      {
        "name": "next"
      }
    ],
    "paths": {
      "@/*": ["./*"]
    }
  },
  "include": [
    "next-env.d.ts",
    "**/*.ts",
    "**/*.tsx",
    ".next/types/**/*.ts",
    ".next/dev/types/**/*.ts",
    "**/*.mts"
  ],
  "exclude": ["node_modules"]
}
</file>

<file path="types/index.ts">
// types/index.ts

export type EventType = 'business' | 'wedding' | 'other';
export type EventStatus = 'active' | 'draft';
export type AttendeeStatus = 'pending' | 'confirmed' | 'declined';

export interface Event {
    id: string;
    created_at: string;
    name: string;
    date: string;
    location_name: string;
    type: EventType;
    user_id?: string;
    status?: EventStatus;
    guests_count?: number;
    is_registration_open?: boolean;
    description?: string;
    image_url?: string; // âœ… ØªÙ… Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ù„ÙŠØ·Ø§Ø¨Ù‚ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    theme_color?: string; // âœ… Ø£Ø¶ÙØªÙ‡ Ù„Ø£Ù†Ù†Ø§ Ù†Ø³ØªØ®Ø¯Ù…Ù‡ ÙÙŠ Ø§Ù„ØªØ°ÙƒØ±Ø© Ù„ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù„ÙˆÙ†
}

export interface Table {
    id: string;
    name: string;
    shape: 'round' | 'rectangular' | 'square';
}

export interface Seat {
    id: string;
    seat_number: string;
    table?: Table;
    occupied?: boolean;
}

export interface Attendee {
    id: string;
    created_at: string;
    event_id: string;
    name: string; // Ø§Ø³Ù… Ø§Ù„Ø¶ÙŠÙ
    email?: string; // Ø¬Ø¹Ù„ØªÙ‡ Ø§Ø®ØªÙŠØ§Ø±ÙŠ Ù„Ø£Ù† Ø¨Ø¹Ø¶ Ø§Ù„Ø¶ÙŠÙˆÙ Ù‚Ø¯ Ù„Ø§ Ù†Ù…Ù„Ùƒ Ø§ÙŠÙ…ÙŠÙ„Ø§ØªÙ‡Ù…
    phone?: string;
    status: AttendeeStatus;
    check_in_time?: string | null;
    attended?: boolean;
    events?: Event; // Ø§Ù„Ø¹Ù„Ø§Ù‚Ø© Ù…Ø¹ Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ©
    seats?: Seat[]; // Ø§Ù„Ø¹Ù„Ø§Ù‚Ø© Ù…Ø¹ Ø§Ù„Ù…Ù‚Ø§Ø¹Ø¯
    regret_reason?: string;
}

export interface Memory {
    id: string;
    event_id: string;
    attendee_id: string;
    message: string;
    created_at: string;
    attendee?: Attendee;
}

export interface ApiResponse<T> {
    data?: T;
    error?: {
        message: string;
        code: string;
    };
}
</file>

<file path="types/supabase.ts">
export type TableShape = 'round' | 'rect' | 'square';

export interface Table {
  id: string;
  event_id: string;
  name: string;
  shape: TableShape;
  capacity: number;
  x: number;
  y: number;
  rotation: number;
  // Ø³Ù†Ù‚ÙˆÙ… Ø¨Ø±Ø¨Ø· Ø§Ù„Ù…Ù‚Ø§Ø¹Ø¯ Ù‡Ù†Ø§ Ø¹Ù†Ø¯ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
  seats?: Seat[]; 
}

export interface Seat {
  id: string;
  table_id: string;
  attendee_id: string | null; // null = Ù…Ù‚Ø¹Ø¯ ÙØ§Ø±Øº
  seat_number: number;
  // ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¶ÙŠÙ Ù„Ù„Ø¹Ø±Ø¶
  attendee?: {
    name: string;
    category: string;
  };
}
</file>

<file path="VALIDATION_IMPLEMENTATION.md">
# ØªØ·Ø¨ÙŠÙ‚ Ø¯ÙˆØ§Ù„ Validation ÙÙŠ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø§Øª - ØªÙ‚Ø±ÙŠØ± Ø§Ù„ØªØ·Ø¨ÙŠÙ‚

## ğŸ“‹ Ù…Ù„Ø®Øµ Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª

ØªÙ… Ø¨Ù†Ø¬Ø§Ø­ ØªØ·Ø¨ÙŠÙ‚ Ø¯ÙˆØ§Ù„ Ø§Ù„ØªØ­Ù‚Ù‚ (Validation) Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø© Ù…Ù† `@/app/utils/validation` ÙÙŠ ØµÙØ­ØªÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØªÙŠÙ†.

---

## âœ… 1. ØµÙØ­Ø© Ø§Ù„ØªØ³Ø¬ÙŠÙ„ (`app/register/[id]/page.tsx`)

### Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„Ù…Ø·Ø¨Ù‚Ø©:

#### Ø§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯:
```typescript
import { 
  validateEmail, 
  validatePhone, 
  validateRequired,
  validatePhoneNotEmpty,  // âœ… ØªÙ…Øª Ø¥Ø¶Ø§ÙØªÙ‡
  formatPhoneNumber 
} from '@/app/utils/validation';
```

#### Ø¯Ø§Ù„Ø© `validateForm`:
```typescript
const validateForm = () => {
  // 1. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø§Ø³Ù…
  const nameError = validateRequired(formData.name, 'Ø§Ù„Ø§Ø³Ù…') || 
    (formData.name.trim().length < 3 ? 'Ø§Ù„Ø§Ø³Ù… ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ 3 Ø£Ø­Ø±Ù' : null);
  
  // 2. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ
  const emailError = validateRequired(formData.email, 'Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ') ||
    (!validateEmail(formData.email) ? 'ØµÙŠØºØ© Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØºÙŠØ± ØµØ­ÙŠØ­Ø©' : null);
  
  // 3. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù‡Ø§ØªÙ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… validatePhoneNotEmpty âœ…
  const phoneError = validatePhoneNotEmpty(formData.phone, selectedCountry.digits);

  setFormErrors({ name: nameError || '', email: emailError || '', phone: phoneError || '' });
  
  return !nameError && !emailError && !phoneError;
};
```

### Ù…Ø§ ÙŠØªÙ… Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù†Ù‡:
- âœ… **Ø§Ù„Ø§Ø³Ù…:** Ù„ÙŠØ³ ÙØ§Ø±ØºØ§Ù‹ ÙˆØ¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ 3 Ø£Ø­Ø±Ù
- âœ… **Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ:** Ù„ÙŠØ³ ÙØ§Ø±ØºØ§Ù‹ ÙˆØµÙŠØºØ© ØµØ­ÙŠØ­Ø©
- âœ… **Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ:** Ù„ÙŠØ³ ÙØ§Ø±ØºØ§Ù‹ ÙˆØ¹Ø¯Ø¯ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… ØµØ­ÙŠØ­ (9 Ù„Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© ÙˆØ§Ù„Ø¥Ù…Ø§Ø±Ø§ØªØŒ 8 Ù„Ù„Ø¯ÙˆÙ„ Ø§Ù„Ø£Ø®Ø±Ù‰)

### Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø®Ø·Ø£:
```
- "Ø§Ù„Ø§Ø³Ù… Ù…Ø·Ù„ÙˆØ¨" (Ø¥Ø°Ø§ ÙƒØ§Ù† ÙØ§Ø±ØºØ§Ù‹)
- "Ø§Ù„Ø§Ø³Ù… ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ 3 Ø£Ø­Ø±Ù" (Ø¥Ø°Ø§ ÙƒØ§Ù† Ù‚ØµÙŠØ±Ø§Ù‹)
- "Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù…Ø·Ù„ÙˆØ¨" (Ø¥Ø°Ø§ ÙƒØ§Ù† ÙØ§Ø±ØºØ§Ù‹)
- "ØµÙŠØºØ© Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØºÙŠØ± ØµØ­ÙŠØ­Ø©" (Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„ØµÙŠØºØ© Ø®Ø§Ø·Ø¦Ø©)
- "Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ù…Ø·Ù„ÙˆØ¨" (Ø¥Ø°Ø§ ÙƒØ§Ù† ÙØ§Ø±ØºØ§Ù‹)
- "Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ X Ø£Ø±Ù‚Ø§Ù…" (Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø¹Ø¯Ø¯ Ø®Ø§Ø·Ø¦Ø§Ù‹)
```

---

## âœ… 2. ØµÙØ­Ø© Ø§Ù„ØªØ°ÙƒØ±Ø© - Ù…ÙˆØ¯Ø§Ù„ Ø§Ù„Ø°ÙƒØ±ÙŠØ§Øª (`app/t/[id]/page.tsx`)

### Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„Ù…Ø·Ø¨Ù‚Ø©:

#### Ø§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯:
```typescript
import { validateRequired } from '@/app/utils/validation';
```

#### Ø¯Ø§Ù„Ø© `handleSendMemory`:
```typescript
const handleSendMemory = async () => {
  setActionError(null);
  
  // Ø§Ø³ØªØ®Ø¯Ø§Ù… validateRequired Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø°ÙƒØ±Ù‰ âœ…
  const validationError = validateRequired(memoryText, 'Ø§Ù„Ø°ÙƒØ±Ù‰');
  if (validationError) {
    setActionError(validationError);
    return;  // Ø¹Ø¯Ù… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¥Ù„Ù‰ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
  }

  // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø·ÙˆÙ„ Ø§Ù„Ø°ÙƒØ±Ù‰
  if (memoryText.length > 500) {
    setActionError('Ø§Ù„Ø°ÙƒØ±Ù‰ Ø·ÙˆÙŠÙ„Ø© Ø¬Ø¯Ø§Ù‹ (Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ 500 Ø­Ø±Ù)');
    return;
  }

  setSubmitting(true);
  try {
    // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø°ÙƒØ±Ù‰ Ø¥Ù„Ù‰ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    const { error: insertError } = await supabase.from('memories').insert({
      event_id: ticket?.event_id,
      attendee_id: ticket?.id,
      message: memoryText,
    });

    if (insertError) throw new Error(insertError.message);

    setSuccessMessage('ÙˆØµÙ„Øª Ø±Ø³Ø§Ù„ØªÙƒ Ø§Ù„Ø¬Ù…ÙŠÙ„Ø©! Ø´ÙƒØ±Ø§Ù‹ Ù„Ùƒ â¤ï¸');
    setIsMemoryModalOpen(false);
    setMemoryText('');
    setTimeout(() => setSuccessMessage(null), 3000);
  } catch (err) {
    const errorMsg = err instanceof Error ? err.message : 'ÙØ´Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø°ÙƒØ±Ù‰';
    setActionError(errorMsg);
  } finally {
    setSubmitting(false);
  }
};
```

### Ù…Ø§ ÙŠØªÙ… Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù†Ù‡:
- âœ… **Ø§Ù„Ø°ÙƒØ±Ù‰:** Ù„ÙŠØ³Øª ÙØ§Ø±ØºØ© ÙˆÙ„ÙŠØ³Øª Ù…Ø³Ø§ÙØ§Øª ÙÙ‚Ø· (Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… `validateRequired`)
- âœ… **Ø·ÙˆÙ„ Ø§Ù„Ø°ÙƒØ±Ù‰:** Ù„Ø§ ÙŠØªØ¬Ø§ÙˆØ² 500 Ø­Ø±Ù
- âœ… **Ø¹Ø¯Ù… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„:** Ø¥Ø°Ø§ ÙØ´Ù„ Ø§Ù„ØªØ­Ù‚Ù‚ØŒ Ù„Ø§ ÙŠØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¥Ù„Ù‰ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

### Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø®Ø·Ø£:
```
- "Ø§Ù„Ø°ÙƒØ±Ù‰ Ù…Ø·Ù„ÙˆØ¨Ø©" (Ø¥Ø°Ø§ ÙƒØ§Ù†Øª ÙØ§Ø±ØºØ© Ø£Ùˆ Ù…Ø³Ø§ÙØ§Øª ÙÙ‚Ø·)
- "Ø§Ù„Ø°ÙƒØ±Ù‰ Ø·ÙˆÙŠÙ„Ø© Ø¬Ø¯Ø§Ù‹ (Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ 500 Ø­Ø±Ù)" (Ø¥Ø°Ø§ ØªØ¬Ø§ÙˆØ²Øª Ø§Ù„Ø­Ø¯)
```

---

## ğŸ”§ Ø§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ù…Ø·Ø¨Ù‚Ø©

### 1. Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¯ÙˆØ§Ù„ Ù…ÙˆØ­Ø¯Ø©
- âœ… Ø¬Ù…ÙŠØ¹ Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„ØªØ­Ù‚Ù‚ ØªØ³ØªØ®Ø¯Ù… Ø¯ÙˆØ§Ù„ Ù…Ù† `validation.ts`
- âœ… Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø®Ø·Ø£ Ù…ÙˆØ­Ø¯Ø© ÙˆÙˆØ§Ø¶Ø­Ø© Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©

### 2. Ù…Ø¹Ø§Ù„Ø¬Ø© Ø¢Ù…Ù†Ø© Ù„Ù„Ø£Ø®Ø·Ø§Ø¡
- âœ… Ø¹Ø¯Ù… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù‡Ù†Ø§Ùƒ Ø£Ø®Ø·Ø§Ø¡
- âœ… Ø¹Ø±Ø¶ Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø®Ø·Ø£ ÙÙŠ ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
- âœ… Ø¹Ø¯Ù… ÙƒØ³Ø± Ø£ÙŠ ÙƒÙˆØ¯ Ù…ÙˆØ¬ÙˆØ¯

### 3. ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø­Ø³Ù‘Ù†Ø©
- âœ… Ø±Ø³Ø§Ø¦Ù„ Ø®Ø·Ø£ ÙˆØ§Ø¶Ø­Ø© ÙˆÙ…ÙÙŠØ¯Ø©
- âœ… ØªØ­Ù‚Ù‚ ÙÙˆØ±ÙŠ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
- âœ… Ù…Ù†Ø¹ Ø¥Ø±Ø³Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø®Ø§Ø·Ø¦Ø© Ø¥Ù„Ù‰ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

---

## ğŸ“Š Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª

```
PASS  app/utils/validation.test.ts

Validation Functions
  validateEmail
    âœ… should validate correct email format
    âœ… should reject invalid email format
  validatePhone
    âœ… should validate phone with correct digit count
    âœ… should reject phone with wrong digit count
    âœ… should reject phone with non-digit characters
  validateRequired
    âœ… should accept non-empty values
    âœ… should reject empty values
  cleanPhoneNumber
    âœ… should remove all non-digit characters
    âœ… should handle already clean numbers
  formatPhoneNumber
    âœ… should add country code to number starting with 0
    âœ… should not duplicate country code

Test Suites: 1 passed, 1 total
Tests:       12 passed, 12 total âœ…
Time:        0.621 s
```

---

## ğŸ¯ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø¹Ø¯Ù„Ø©

| Ø§Ù„Ù…Ù„Ù | Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª |
|------|----------|
| `app/register/[id]/page.tsx` | âœ… Ø¥Ø¶Ø§ÙØ© Ø§Ø³ØªÙŠØ±Ø§Ø¯ `validatePhoneNotEmpty`ØŒ ØªØ­Ø¯ÙŠØ« `validateForm` |
| `app/t/[id]/page.tsx` | âœ… Ø¥Ø¶Ø§ÙØ© Ø§Ø³ØªÙŠØ±Ø§Ø¯ `validateRequired`ØŒ ØªØ­Ø¯ÙŠØ« `handleSendMemory` |

---

## ğŸ’¡ Ù†ØµØ§Ø¦Ø­ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…

### Ù„Ù„Ù…Ø·ÙˆØ±ÙŠÙ†:
```typescript
// Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
import { validateRequired, validateEmail, validatePhone } from '@/app/utils/validation';

// ÙÙŠ Ø¯Ø§Ù„Ø© Ø§Ù„ØªØ­Ù‚Ù‚:
const nameError = validateRequired(name, 'Ø§Ù„Ø§Ø³Ù…');
if (nameError) {
  // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø®Ø·Ø£
  return;
}

// Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØµØ­ÙŠØ­Ø©
```

### Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†:
- Ø§ÙƒØªØ¨ Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„ (3 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„)
- Ø§Ø³ØªØ®Ø¯Ù… Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØµØ­ÙŠØ­ (Ù…Ø«Ø§Ù„: user@example.com)
- Ø§ÙƒØªØ¨ Ø§Ù„Ù‡Ø§ØªÙ Ø¨Ø¯ÙˆÙ† Ù…Ø³Ø§ÙØ§Øª Ø£Ùˆ Ø´Ø±Ø·Ø§Øª (Ù…Ø«Ø§Ù„: 0501234567)
- Ø§Ù„Ø°ÙƒØ±ÙŠØ§Øª ÙŠØ¬Ø¨ Ø£Ù„Ø§ ØªÙƒÙˆÙ† ÙØ§Ø±ØºØ© ÙˆÙ„Ø§ ØªØ²ÙŠØ¯ Ø¹Ù† 500 Ø­Ø±Ù

---

## âœ¨ Ø§Ù„Ø®Ø·ÙˆØ§Øª Ø§Ù„ØªØ§Ù„ÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠØ©)

- [ ] Ø¥Ø¶Ø§ÙØ© more validation functions
- [ ] Ø§Ø³ØªØ®Ø¯Ø§Ù… Zod schemas Ù„Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ø£ÙƒØ«Ø± ØªÙ‚Ø¯Ù…Ø§Ù‹
- [ ] Ø¥Ø¶Ø§ÙØ© Client-side form validation library
- [ ] ØªØ­Ø³ÙŠÙ† Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø®Ø·Ø£ Ù…Ø¹ Ø§Ù„Ø±Ù…ÙˆØ² Ø§Ù„ØªØ¹Ø¨ÙŠØ±ÙŠØ©

---

**ØªÙ… Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡ Ø¨Ù†Ø¬Ø§Ø­!** âœ…
**Ø§Ù„ØªØ§Ø±ÙŠØ®:** December 30, 2025
</file>

<file path="VERCEL_GUIDE_AR.md">
# ğŸ“š Ø¯Ù„ÙŠÙ„ Ø§Ù„Ù†Ø´Ø± Ø§Ù„ÙƒØ§Ù…Ù„ Ù„Ù€ Meras Events

## ğŸ¯ Ø§Ù„Ù…Ù„Ø®Øµ Ø§Ù„Ø³Ø±ÙŠØ¹

**Meras** Ù‡Ùˆ ØªØ·Ø¨ÙŠÙ‚ Ø¥Ø¯Ø§Ø±Ø© ÙØ¹Ø§Ù„ÙŠØ§Øª Ø§Ø­ØªØ±Ø§ÙÙŠ Ù…Ø¨Ù†ÙŠ Ø¨Ù€ Next.js ÙˆSupabase. Ø¬Ø§Ù‡Ø² Ù„Ù„Ù†Ø´Ø± Ø¹Ù„Ù‰ Vercel Ø¨Ø®Ø·ÙˆØ§Øª Ø¨Ø³ÙŠØ·Ø©.

---

## âœ… Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª Ù‚Ø¨Ù„ Ø§Ù„Ù†Ø´Ø±

- [ ] Ø­Ø³Ø§Ø¨ GitHub (Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ù„ÙØ¹Ù„)
- [ ] Ø­Ø³Ø§Ø¨ Vercel Ù…Ø¬Ø§Ù†ÙŠ (Ø¨Ø¯ÙˆÙ† Ø¨Ø·Ø§Ù‚Ø© Ø§Ø¦ØªÙ…Ø§Ù†)
- [ ] Ø­Ø³Ø§Ø¨ Supabase (Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª)
- [ ] Ù…Ø­Ø±Ø± Ù†ØµÙˆØµ (VSCode)

---

## ğŸš€ Ø®Ø·ÙˆØ§Øª Ø§Ù„Ù†Ø´Ø± Ø®Ø·ÙˆØ© Ø¨Ø®Ø·ÙˆØ©

### **Ø£ÙˆÙ„Ø§Ù‹: Ù†Ø³Ø® Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Supabase**

1. Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ [Supabase Dashboard](https://supabase.com/dashboard)
2. Ø§ÙØªØ­ Ù…Ø´Ø±ÙˆØ¹Ùƒ
3. Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ **Settings** â†’ **API**
4. Ø§Ù†Ø³Ø®:
   - `Project URL` â† Ø³ÙŠÙƒÙˆÙ† `NEXT_PUBLIC_SUPABASE_URL`
   - `Anon Key` â† Ø³ÙŠÙƒÙˆÙ† `NEXT_PUBLIC_SUPABASE_ANON_KEY`

---

### **Ø«Ø§Ù†ÙŠØ§Ù‹: Ø¯Ø®ÙˆÙ„ Vercel ÙˆØªÙˆØµÙŠÙ„ GitHub**

#### Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰ (Ø§Ù„Ø£Ø³Ù‡Ù„ - Git Integration):

1. Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ [Vercel.com](https://vercel.com)
2. Ø§Ø¶ØºØ· **Sign Up** (Ø£Ùˆ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¥Ø°Ø§ ÙƒØ§Ù† Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨)
3. Ø§Ø®ØªØ± **Continue with GitHub**
4. Ø§Ø³Ù…Ø­ Ù„Ù€ Vercel Ø¨Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø­Ø³Ø§Ø¨Ùƒ
5. Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ https://vercel.com/new
6. Ø§Ø®ØªØ± Ù…Ø´Ø±ÙˆØ¹ `event-manager` Ù…Ù† GitHub
7. Ø§ØªØ±Ùƒ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ÙƒÙ…Ø§ Ù‡ÙŠ (Ø³ÙŠÙƒØªØ´Ù Next.js ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹)
8. Ø§Ø¶ØºØ· **Deploy**

---

### **Ø«Ø§Ù„Ø«Ø§Ù‹: Ø¥Ø¶Ø§ÙØ© Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø©**

Ø¨Ø¹Ø¯ Ø§Ù„Ù†Ø´Ø± Ø§Ù„Ø£ÙˆÙ„ (Ù‚Ø¯ ÙŠÙØ´Ù„ - Ù‡Ø°Ø§ Ø·Ø¨ÙŠØ¹ÙŠ):

1. ÙÙŠ Vercel DashboardØŒ Ø§ÙØªØ­ Ù…Ø´Ø±ÙˆØ¹Ùƒ
2. Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ **Settings** â†’ **Environment Variables**
3. Ø£Ø¶Ù Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„ØªØ§Ù„ÙŠØ©:

```
NEXT_PUBLIC_SUPABASE_URL = https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY = eyJhbGciOiJIUzI1NiIs...
```

(Ø§ØªØ±Ùƒ SENTRY_DSN ÙØ§Ø±ØºØ§Ù‹ Ø¥Ø°Ø§ Ù„Ù… ØªÙƒÙ† ØªØ±ÙŠØ¯ ØªØªØ¨Ø¹ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡)

4. Ø§Ø¶ØºØ· **Save**
5. Ø¹Ø¯ Ø¥Ù„Ù‰ **Deployments** ÙˆØ§Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø£Ø­Ø¯Ø« Ù†Ø´Ø±
6. Ø§Ø¶ØºØ· **Redeploy** Ù„Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù†Ø´Ø± Ù…Ø¹ Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©

---

### **Ø±Ø§Ø¨Ø¹Ø§Ù‹: Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù…ÙˆÙ‚Ø¹**

Ø¨Ø¹Ø¯ Ù†Ø´Ø± Ù†Ø§Ø¬Ø­:
- Ø³ØªØ­ØµÙ„ Ø¹Ù„Ù‰ Ø±Ø§Ø¨Ø· Ù…Ø«Ù„: `https://event-manager-xxx.vercel.app`
- ÙØªØ­ Ø§Ù„Ø±Ø§Ø¨Ø· ÙˆØ§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ù† ÙƒÙ„ Ø´ÙŠØ¡ ÙŠØ¹Ù…Ù„

---

## ğŸ”„ Ø§Ù„Ù†Ø´Ø± Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ÙŠ (Ø³Ù‡Ù„ Ø¬Ø¯Ø§Ù‹!)

Ø¨Ø¹Ø¯ Ø§Ù„Ø¢Ù†ØŒ Ø¹Ù†Ø¯ ÙƒÙ„ `git push` Ø¥Ù„Ù‰ `main`:
1. Ø³ØªØªÙ… Ø¹Ù…Ù„ÙŠØ© Ù†Ø´Ø± ØªÙ„Ù‚Ø§Ø¦ÙŠØ© Ø¹Ù„Ù‰ Vercel âœ…
2. Ø³ØªØ­ØµÙ„ Ø¹Ù„Ù‰ Ø¥Ø´Ø¹Ø§Ø± Ø¹Ù†Ø¯ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ù†Ø´Ø±
3. Ù…ÙˆÙ‚Ø¹Ùƒ Ø³ÙŠÙØ­Ø¯Ù‘Ø« ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹

```bash
git add .
git commit -m "your changes"
git push origin main
# Vercel Ø³ÙŠÙ†Ø´Ø± ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹! ğŸš€
```

---

## ğŸŒ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù†Ø·Ø§Ù‚ Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)

Ø¥Ø°Ø§ ÙƒØ§Ù† Ù„Ø¯ÙŠÙƒ Ù†Ø·Ø§Ù‚ (Ù…Ø«Ù„ `meras.com`):

1. ÙÙŠ Vercel Dashboard â†’ **Project Settings** â†’ **Domains**
2. Ø§Ø¶ØºØ· **Add Domain**
3. Ø§Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù†Ø·Ø§Ù‚
4. Ø§ØªØ¨Ø¹ Ø§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª Ù„ØªØ­Ø¯ÙŠØ« DNS Ø¹Ù†Ø¯ Ù…Ø²ÙˆØ¯ Ø§Ù„Ù†Ø·Ø§Ù‚

---

## ğŸ” Ø§Ø³ØªÙƒØ´Ø§Ù Ø§Ù„Ø£Ø®Ø·Ø§Ø¡

### Ø§Ù„Ù…ÙˆÙ‚Ø¹ ÙŠÙØ¸Ù‡Ø± ØµÙØ­Ø© Ø®Ø·Ø£:
```bash
# ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø³Ø¬Ù„Ø§Øª
vercel logs
```

### Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù†Ø´Ø± Ø¨Ù‚ÙˆØ©:
```bash
vercel --prod --force
```

### Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù†Ø³Ø®Ø© Ù‚Ø¯ÙŠÙ…Ø©:
ÙÙŠ Vercel Dashboard â†’ Deployments â†’ Ø§Ø®ØªØ± Ø§Ù„Ù†Ø³Ø®Ø© â†’ Promote

---

## ğŸ“Š Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù†Ø´Ø± Ø¹Ù„Ù‰ Vercel

| Ø§Ù„Ù…ÙŠØ²Ø© | Ø§Ù„ÙˆØµÙ |
|--------|------|
| **Ù†Ø´Ø± Ù…Ø¬Ø§Ù†ÙŠ** | Ù„Ø§ ØªÙˆØ¬Ø¯ ØªÙƒØ§Ù„ÙŠÙ Ù„Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© |
| **CDN Ø¹Ø§Ù„Ù…ÙŠ** | Ù…ÙˆÙ‚Ø¹Ùƒ Ø³Ø±ÙŠØ¹ ÙÙŠ ÙƒÙ„ Ù…ÙƒØ§Ù† |
| **HTTPS ØªÙ„Ù‚Ø§Ø¦ÙŠ** | Ø¢Ù…Ø§Ù† SSL Ù…Ø¬Ø§Ù†ÙŠ |
| **Serverless Functions** | API endpoints Ø¨Ø¯ÙˆÙ† Ø®Ø§Ø¯Ù… |
| **Ù†Ø´Ø± ØªÙ„Ù‚Ø§Ø¦ÙŠ** | Ù…Ù† GitHub Ù…Ø¨Ø§Ø´Ø±Ø© |
| **Preview URLs** | Ø¹Ø±Ø¶ Ø§Ù„Ù†Ø³Ø® Ù‚Ø¨Ù„ Ø§Ù„Ù†Ø´Ø± |

---

## ğŸ’¡ Ù†ØµØ§Ø¦Ø­ Ù…Ù‡Ù…Ø©

âœ… Ø§Ø³ØªØ®Ø¯Ù… Ø¯Ø§Ø¦Ù…Ø§Ù‹ `git` Ù„ØªØªØ¨Ø¹ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª  
âœ… Ø§Ø®ØªØ¨Ø± Ù…Ø­Ù„ÙŠØ§Ù‹ Ù‚Ø¨Ù„ Ø§Ù„Ù€ Push  
âœ… Ø§Ø³ØªØ®Ø¯Ù… Ø±Ø³Ø§Ø¦Ù„ commit ÙˆØ§Ø¶Ø­Ø©  
âœ… Ù„Ø§ ØªØ¶Ø¹ ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ø³Ø± ÙÙŠ Ø§Ù„ÙƒÙˆØ¯ (Ø§Ø³ØªØ®Ø¯Ù… Environment Variables)  
âœ… Ø±Ø§Ù‚Ø¨ Ø§Ù„Ø³Ø¬Ù„Ø§Øª ÙÙŠ Vercel Ù„Ù„Ø£Ø®Ø·Ø§Ø¡  

---

## ğŸ“ Ø§Ù„Ø¯Ø¹Ù… ÙˆØ§Ù„Ù…ÙˆØ§Ø±Ø¯

- **Vercel Docs**: https://vercel.com/docs
- **Next.js Docs**: https://nextjs.org/docs
- **Supabase Docs**: https://supabase.com/docs
- **GitHub Help**: https://docs.github.com

---

## ğŸ‰ Ù…Ø¨Ø±ÙˆÙƒ!

Ù…ÙˆÙ‚Ø¹Ùƒ Ø§Ù„Ø¢Ù† Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª ÙˆØ¬Ø§Ù‡Ø² Ù„Ù„Ø¹Ø§Ù„Ù…! ğŸŒ

ÙƒÙ„ ØªØ­Ø¯ÙŠØ« ØªØ¯ÙØ¹Ù‡ Ø¥Ù„Ù‰ GitHub Ø³ÙŠØªÙ… Ù†Ø´Ø±Ù‡ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹.

**Ø§Ø³ØªÙ…ØªØ¹ Ø¨Ù€ Meras Events!** ğŸŠ
</file>

<file path="vercel.json">
{
  "buildCommand": "npm run build",
  "framework": "nextjs",
  "nodeVersion": "20.x",
  "installCommand": "npm install",
  "env": {
    "NEXT_PUBLIC_SUPABASE_URL": "@supabase_url",
    "NEXT_PUBLIC_SUPABASE_ANON_KEY": "@supabase_key",
    "NEXT_PUBLIC_SENTRY_DSN": "@sentry_dsn"
  },
  "envPrefix": "NEXT_PUBLIC_",
  "regions": ["iad"],
  "functions": {
    "api/**/*.ts": {
      "memory": 1024,
      "maxDuration": 60
    }
  }
}
</file>

<file path="app/dashboard/events/[id]/page.tsx">
'use client';

import { useEffect, use } from 'react';
import { supabase } from '@/app/utils/supabase/client';
import { useEventStore } from '@/store/eventStore';

// âœ… Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù…Ø¯Ù…Ø¬Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© (Scanner + PIN)
import ScannerAccessCard from '@/components/dashboard/ScannerAccessCard';

// Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª Ø§Ù„Ø£Ø®Ø±Ù‰
import { WhatsAppQueueModal } from '@/components/dashboard/WhatsAppQueueModal'; 
import { StatsCards } from '@/components/dashboard/StatsCards';
import { AttendeesTable } from '@/components/dashboard/AttendeesTable';
import { AddGuestModal } from '@/components/dashboard/AddGuestModal';
import { MessageConfigModal } from '@/components/dashboard/MessageConfigModal';
import { EditEventModal } from '@/components/dashboard/EditEventModal';
import { ImportGuestsModal } from '@/components/dashboard/ImportGuestsModal';

import { Loader2, ArrowLeft, Plus, Download, MapPin, Settings, Edit, FileSpreadsheet } from 'lucide-react';
import Link from 'next/link';

interface PageProps { params: Promise<{ id: string }>; }

export default function EventControlRoom({ params }: PageProps) {
  const { id } = use(params);
  
  const { 
    setEventId, fetchData, isLoading, 
    toggleAddModal, toggleMessageModal, toggleEditEventModal, toggleImportModal, 
    eventDetails, attendees 
  } = useEventStore();

  useEffect(() => {
    setEventId(id);
    fetchData();
    const channel = supabase.channel(`room-${id}`)
      .on('postgres_changes', { 
        event: '*', 
        schema: 'public', 
        table: 'attendees', 
        filter: `event_id=eq.${id}` 
      }, () => fetchData())
      .subscribe();
    return () => { supabase.removeChannel(channel) };
  }, [id, setEventId, fetchData]);

  const handleExportCSV = () => {
    const headers = ['Ø§Ù„Ø§Ø³Ù…', 'Ø§Ù„Ø¬ÙˆØ§Ù„', 'Ø§Ù„Ø­Ø§Ù„Ø©', 'ÙˆÙ‚Øª Ø§Ù„Ø­Ø¶ÙˆØ±', 'Ø§Ù„ØªØµÙ†ÙŠÙ'];
    const rows = attendees.map(g => [
      g.name, g.phone, g.status,
      g.attended ? new Date(g.updated_at).toLocaleTimeString('ar-SA') : '-', g.category
    ]);
    const csvContent = "data:text/csv;charset=utf-8,\uFEFF" + [headers.join(','), ...rows.map(e => e.join(','))].join('\n');
    const link = document.createElement("a");
    link.href = encodeURI(csvContent);
    link.download = `guests_export.csv`;
    link.click();
  };

  if (isLoading) return (
    <div className="h-screen flex items-center justify-center bg-[#0A0A0C]">
      <Loader2 className="animate-spin text-[#C19D65]" />
    </div>
  );

  return (
    <div className="min-h-screen bg-[#0A0A0C] p-4 md:p-8 text-white font-sans" dir="rtl">
      
      {/* --- Header Section --- */}
      <div className="flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4">
        <div>
           <Link href="/dashboard" className="text-white/50 hover:text-white flex items-center gap-2 text-sm mb-2">
             <ArrowLeft size={16}/> Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
           </Link>
           <div className="flex items-center gap-3">
              <h1 className="text-3xl font-bold text-white">{eventDetails?.name || 'ØºØ±ÙØ© Ø§Ù„ØªØ­ÙƒÙ…'}</h1>
              <button onClick={() => toggleEditEventModal(true)} 
                  className="flex items-center justify-center w-8 h-8 rounded-lg bg-[#27272A] border border-white/10 text-white/60 hover:text-[#C19D65] hover:border-[#C19D65] transition-all shadow-sm"
                  title="ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­ÙÙ„">
                  <Edit size={16}/>
              </button>
           </div>
           {eventDetails?.location_name && (
             <p className="text-gray-400 text-sm flex items-center gap-1 mt-1">
               <MapPin size={14}/> {eventDetails.location_name}
             </p>
           )}
        </div>
        
        <div className="flex gap-2 w-full md:w-auto">
           <button onClick={() => toggleImportModal(true)} 
             className="px-4 py-2.5 bg-[#107C41] text-white rounded-xl text-sm font-bold flex items-center gap-2 hover:bg-[#0c6b37] shadow-lg transition-all"
             title="Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù…Ù† Excel">
              <FileSpreadsheet size={18} /> <span className="hidden md:inline">Excel</span>
           </button>

           <button onClick={() => toggleAddModal(true)} className="flex-1 md:flex-none px-6 py-2.5 bg-[#C19D65] text-black rounded-xl text-sm font-bold flex items-center justify-center gap-2 hover:brightness-110 shadow-lg">
              <Plus size={18} /> Ø¥Ø¶Ø§ÙØ© Ù…Ø¯Ø¹Ùˆ
           </button>
           
           <button onClick={handleExportCSV} className="px-4 py-2.5 bg-[#27272A] rounded-xl text-sm font-bold flex items-center gap-2 hover:bg-[#3F3F46] border border-white/10">
              <Download size={18} />
           </button>
           
           <Link href={`/dashboard/events/${id}/seating`} className="px-4 py-2.5 bg-[#27272A] rounded-xl text-sm font-bold hover:bg-[#3F3F46] border border-white/10">
              ğŸª‘ Ø§Ù„Ù…Ø®Ø·Ø·
           </Link>
        </div>
      </div>

      {/* --- Main Grid Layout --- */}
      <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
         <div className="lg:col-span-2 space-y-6">
            <StatsCards />
            <AttendeesTable />
         </div>

         {/* Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ */}
         <div className="space-y-6">
            
            {/* âœ… Ù‡Ù†Ø§ Ø§Ù„ØªØºÙŠÙŠØ± Ø§Ù„Ø¬Ø°Ø±ÙŠ: Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù…Ø¯Ù…Ø¬Ø© Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† Ø§Ù„Ø¹Ù†ØµØ±ÙŠÙ† Ø§Ù„Ù…Ù†ÙØµÙ„ÙŠÙ† */}
            <ScannerAccessCard 
               eventId={id} 
               currentPin={eventDetails?.pin || '0000'} 
            />

            {/* Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ */}
            <div className="bg-[#18181B] rounded-[2rem] border border-white/10 p-6">
               <div className="flex justify-between items-center mb-4">
                  <h3 className="font-bold">Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø±Ø³Ø§Ø¦Ù„</h3>
                  <button onClick={() => toggleMessageModal(true)} className="p-2 bg-white/5 hover:bg-white/10 rounded-lg text-white/50 hover:text-white transition-colors">
                     <Settings size={18}/>
                  </button>
               </div>
               <p className="text-xs text-white/40 mb-4">ØªØ®ØµÙŠØµ Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ©</p>
               <div className="space-y-2">
                  <div className="flex items-center justify-between p-3 bg-black/20 rounded-xl border border-white/5">
                     <span className="text-xs text-white/60">Ø­Ø§Ù„Ø© Ø§Ù„ØªØ°ÙƒÙŠØ±</span>
                     <div className="w-2 h-2 rounded-full bg-green-500 shadow-[0_0_5px_green]"></div>
                  </div>
               </div>
            </div>
         </div>
      </div>

      {/* --- Modals --- */}
      <AddGuestModal />
      <MessageConfigModal />
      <EditEventModal />
      <ImportGuestsModal />
      <WhatsAppQueueModal />
      
    </div>
  );
}
</file>

<file path="app/e/[id]/page.tsx">
'use client';

import { useState, useEffect, use } from 'react';
import { supabase } from '@/app/utils/supabase/client';
import { Sparkles, Send, Briefcase, Loader2, CheckCircle2 } from 'lucide-react';
import { useRouter } from 'next/navigation';

interface PageProps {
  params: Promise<{ id: string }>;
}

export default function GuestRSVP({ params }: PageProps) {
  const { id } = use(params);
  const router = useRouter();

  // Ø§Ù„Ø­Ø§Ù„Ø© (State)
  const [event, setEvent] = useState<any>(null);
  const [loading, setLoading] = useState(true);
  const [submitting, setSubmitting] = useState(false);
  const [submitted, setSubmitted] = useState(false);
  const [ticketId, setTicketId] = useState<string | null>(null);

  // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
  const [formData, setFormData] = useState({
    name: '',
    phone: '',
    email: '', 
    companions: 0,
    organization: '', // Ù†Ø¬Ù…Ø¹Ù‡Ø§ ÙÙŠ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© (ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¶Ø§ÙØªÙ‡Ø§ Ù„Ù„Ù‚Ø§Ø¹Ø¯Ø© Ù„Ø§Ø­Ù‚Ø§Ù‹ Ø¥Ø°Ø§ Ø£Ø±Ø¯Øª)
    jobTitle: ''
  });

  // Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ©
  useEffect(() => {
    const fetchEvent = async () => {
      const { data, error } = await supabase
        .from('events')
        .select('*')
        .eq('id', id)
        .single();

      if (!error && data) {
        setEvent(data);
      }
      setLoading(false);
    };

    fetchEvent();
  }, [id]);

  const isWedding = event?.type === 'social';

  // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø«ÙŠÙ… (Ø£Ù„ÙˆØ§Ù† ÙˆØ¸Ù„Ø§Ù„)
  const theme = {
    primary: isWedding ? '#C19D65' : '#3B82F6',
    button: isWedding ? 'bg-[#C19D65] hover:bg-[#A4824E]' : 'bg-blue-600 hover:bg-blue-700',
    text: isWedding ? 'text-[#C19D65]' : 'text-blue-500',
    shadow: isWedding ? 'shadow-[#C19D65]/20' : 'shadow-blue-500/20'
  };

  // âœ… Ø¯Ø§Ù„Ø© ØªÙˆÙ„ÙŠØ¯ ÙƒÙˆØ¯ Ø§Ù„ØªØ°ÙƒØ±Ø© Ø§Ù„Ø¹Ø´ÙˆØ§Ø¦ÙŠ
  const generateTicketCode = () => {
    return 'TKT-' + Math.random().toString(36).substring(2, 8).toUpperCase();
  };

  // âœ… Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ (Ù…Ø­Ø¯Ø«Ø© Ù„Ø¥ØµÙ„Ø§Ø­ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡)
  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    setSubmitting(true);

    try {
      // ØªØ¬Ù‡ÙŠØ² Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ø¥Ø±Ø³Ø§Ù„
      const insertPayload = {
        event_id: id,
        guest_name: formData.name,
        status: 'confirmed',
        ticket_code: generateTicketCode(), // ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ÙƒÙˆØ¯ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
        phone: formData.phone,             // Ø¥Ø±Ø³Ø§Ù„ Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„
        companions: formData.companions,   // Ø¥Ø±Ø³Ø§Ù„ Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø±Ø§ÙÙ‚ÙŠÙ†
        email: formData.email || null,     // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ (Ø£Ùˆ null Ø¥Ø°Ø§ ÙƒØ§Ù† ÙØ§Ø±ØºØ§Ù‹)
      };

      const { data, error } = await supabase
        .from('tickets')
        .insert([insertPayload])
        .select()
        .single();

      if (error) {
        // Ø·Ø¨Ø§Ø¹Ø© ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ÙƒÙˆÙ†Ø³ÙˆÙ„ Ù„Ù„Ù…Ø·ÙˆØ±
        console.error('Supabase Insert Error:', JSON.stringify(error, null, 2));
        throw error;
      }

      setTicketId(data.id);
      setSubmitted(true);

    } catch (err: any) {
      console.error('Catch Error:', err);
      // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø®Ø·Ø£ ÙˆØ§Ø¶Ø­Ø© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…
      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØ³Ø¬ÙŠÙ„: ' + (err.message || 'ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰'));
    } finally {
      setSubmitting(false);
    }
  };

  // Ø´Ø§Ø´Ø§Øª Ø§Ù„ØªØ­Ù…ÙŠÙ„ ÙˆØ§Ù„Ø®Ø·Ø£
  if (loading) return (
    <div className="min-h-screen bg-[#0A0A0C] flex items-center justify-center text-white">
      <Loader2 className="animate-spin text-white/50" size={40} />
    </div>
  );

  if (!event) return (
    <div className="min-h-screen bg-[#0A0A0C] flex items-center justify-center text-white/50">
      Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ© ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø©.
    </div>
  );

  // --- Ø´Ø§Ø´Ø© Ø§Ù„Ù†Ø¬Ø§Ø­ ---
  if (submitted) {
    return (
      <div className="min-h-screen bg-[#0A0A0C] flex items-center justify-center p-6 text-center text-white relative overflow-hidden" dir="rtl">
        <div className={`absolute top-0 left-1/2 -translate-x-1/2 w-full h-[600px] blur-[150px] opacity-20 pointer-events-none transition-colors duration-1000 ${isWedding ? 'bg-[#C19D65]' : 'bg-blue-600'}`}></div>
        
        <div className="max-w-md w-full bg-white/[0.02] border border-white/10 p-12 rounded-[3.5rem] backdrop-blur-3xl animate-in zoom-in duration-500 relative z-10">
          <div className={`w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-8 ${isWedding ? 'bg-[#C19D65]/20 text-[#C19D65]' : 'bg-blue-500/20 text-blue-500'}`}>
            <CheckCircle2 size={40} />
          </div>
          <h2 className="text-3xl font-black mb-4">ØªÙ… ØªØ£ÙƒÙŠØ¯ Ø­Ø¶ÙˆØ±Ùƒ!</h2>
          <p className="text-white/40 mb-10 leading-relaxed">Ø´ÙƒØ±Ø§Ù‹ Ù„Ùƒ {formData.name}ØŒ ØªÙ… Ø¥ØµØ¯Ø§Ø± ØªØ°ÙƒØ±ØªÙƒ Ø¨Ù†Ø¬Ø§Ø­.</p>
          <button onClick={() => router.push(`/t/${ticketId}`)} className="w-full py-5 rounded-2xl border border-white/10 text-white font-bold hover:bg-white/5 transition-all flex items-center justify-center gap-2">
             Ø¹Ø±Ø¶ Ø§Ù„ØªØ°ÙƒØ±Ø© ÙˆØ§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯
          </button>
        </div>
      </div>
    );
  }

  // --- Ø´Ø§Ø´Ø© Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© ---
  return (
    <div className="min-h-screen bg-[#0A0A0C] relative overflow-hidden flex items-center justify-center p-6 text-right" dir="rtl">
      
      {/* Ø§Ù„Ø®Ù„ÙÙŠØ© Ø§Ù„Ù…Ø¶ÙŠØ¦Ø© */}
      <div className={`absolute top-0 left-1/2 -translate-x-1/2 w-full h-[600px] blur-[150px] opacity-20 pointer-events-none transition-colors duration-1000 ${isWedding ? 'bg-[#C19D65]' : 'bg-blue-600'}`}></div>

      <div className="max-w-2xl w-full relative z-10">
        <div className="text-center mb-12 animate-in fade-in slide-in-from-top duration-700">
          
          {/* ğŸ”¥ Ø§Ù„Ø¥Ø·Ø§Ø± Ø§Ù„Ù…Ø¶ÙŠØ¡ Ø§Ù„Ù…Ø¯Ù…Ø¬ (Ø§Ù„Ø´Ø¹Ø§Ø± Ø£Ùˆ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø©) */}
          <div className={`relative w-28 h-28 mx-auto mb-8 rounded-[2rem] flex items-center justify-center shadow-2xl transition-all duration-1000 group ${theme.button} ${theme.shadow}`}>
             {event.image_url ? (
               <div className="w-full h-full rounded-[2rem] overflow-hidden bg-black/20 p-3 relative">
                  {/* Ø·Ø¨Ù‚Ø© Ø®Ù„ÙÙŠØ© Ø¶Ø¨Ø§Ø¨ÙŠØ© */}
                  <img src={event.image_url} className="absolute inset-0 w-full h-full object-cover blur-md opacity-50" alt=""/>
                  {/* Ø§Ù„Ø´Ø¹Ø§Ø± Ø§Ù„Ø£ØµÙ„ÙŠ */}
                  <img src={event.image_url} alt="Logo" className="relative w-full h-full object-contain z-10 drop-shadow-lg transform transition-transform group-hover:scale-105" />
               </div>
             ) : (
               <div className="text-white">
                  {isWedding ? <Sparkles size={40} /> : <Briefcase size={40} />}
               </div>
             )}
          </div>
          
          <h1 className="text-4xl font-black text-white mb-4 tracking-tight drop-shadow-lg">{event.name}</h1>
          
          <p className="text-white/60 text-lg font-medium">
            {isWedding 
              ? `Ù†ØªØ´Ø±Ù Ø¨Ø¯Ø¹ÙˆØªÙƒÙ… Ù„Ø­Ø¶ÙˆØ± Ø­ÙÙ„ ${event.groom_name || ''} Ùˆ ${event.bride_name || ''}` 
              : 'ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ù„Ø¥ØµØ¯Ø§Ø± Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„'}
          </p>
          
          <div className="mt-6 inline-flex items-center gap-4 text-xs font-bold text-white/80 bg-white/10 backdrop-blur-md border border-white/10 py-3 px-6 rounded-full shadow-lg">
            <span>ğŸ“… {event.date}</span>
            <span className="w-1 h-1 bg-white/40 rounded-full"></span>
            <span>ğŸ“ {event.location_name}</span>
          </div>
        </div>

        {/* Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª */}
        <form onSubmit={handleSubmit} className="space-y-8 bg-black/40 border border-white/10 p-10 md:p-14 rounded-[4rem] backdrop-blur-xl shadow-2xl">
          <div className="space-y-6">
            
            {/* Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„ */}
            <div className="group">
              <label className="block text-sm font-bold text-white/60 mb-3 mr-2 group-focus-within:text-white transition-colors">Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</label>
              <input required type="text" value={formData.name} onChange={(e) => setFormData({...formData, name: e.target.value})} placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ ÙƒÙ…Ø§ ÙÙŠ Ø§Ù„Ù‡ÙˆÙŠØ©" className="w-full bg-white/5 border border-white/10 rounded-2xl p-5 text-white focus:outline-none focus:border-white/30 transition-all text-lg placeholder:text-white/20" />
            </div>

            {/* Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„ */}
            <div className="group">
              <label className="block text-sm font-bold text-white/60 mb-3 mr-2 group-focus-within:text-white transition-colors">Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„</label>
              <input required type="tel" value={formData.phone} onChange={(e) => setFormData({...formData, phone: e.target.value})} placeholder="05xxxxxxxx" className="w-full bg-white/5 border border-white/10 rounded-2xl p-5 text-white focus:outline-none focus:border-white/30 transition-all text-lg text-left placeholder:text-white/20" dir="ltr" />
            </div>

            {isWedding ? (
              // --- Ø®ÙŠØ§Ø± Ø§Ù„Ø²ÙˆØ§Ø¬ ---
              <div className="animate-in fade-in duration-500">
                <label className="block text-sm font-bold text-white/60 mb-3 mr-2 italic">Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø±Ø§ÙÙ‚ÙŠÙ†</label>
                <div className="grid grid-cols-4 gap-4 text-center">
                  {[0, 1, 2, 3].map((num) => (
                    <button key={num} type="button" onClick={() => setFormData({...formData, companions: num})} className={`py-4 rounded-xl border transition-all text-white font-bold ${formData.companions === num ? 'bg-[#C19D65] border-[#C19D65]' : 'bg-white/5 border-white/10 hover:border-[#C19D65]'}`}>
                      {num === 0 ? 'Ø¨Ù…ÙØ±Ø¯ÙŠ' : num}
                    </button>
                  ))}
                </div>
              </div>
            ) : (
              // --- Ø®ÙŠØ§Ø± Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ ---
              <div className="animate-in fade-in duration-500 space-y-6">
                {/* Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ Ù„Ù„Ø£Ø¹Ù…Ø§Ù„ ÙÙ‚Ø· */}
                <div>
                  <label className="block text-sm font-bold text-white/60 mb-3 mr-2">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø§Ù„Ù…Ù‡Ù†ÙŠ</label>
                  <input 
                    required
                    type="email" 
                    value={formData.email} 
                    onChange={(e) => setFormData({...formData, email: e.target.value})} 
                    placeholder="name@company.com" 
                    className="w-full bg-white/5 border border-white/10 rounded-2xl p-5 text-white focus:outline-none focus:border-blue-500 transition-all text-lg placeholder:text-white/20 text-left" 
                    dir="ltr"
                  />
                </div>

                <div>
                  <label className="block text-sm font-bold text-white/60 mb-3 mr-2">Ø¬Ù‡Ø© Ø§Ù„Ø¹Ù…Ù„</label>
                  <input type="text" value={formData.organization} onChange={(e) => setFormData({...formData, organization: e.target.value})} className="w-full bg-white/5 border border-white/10 rounded-2xl p-5 text-white focus:outline-none focus:border-blue-500 transition-all text-lg" />
                </div>
              </div>
            )}
          </div>

          <button type="submit" disabled={submitting} className={`w-full py-6 rounded-2xl text-black font-black text-xl flex items-center justify-center gap-3 transition-all transform hover:scale-[1.02] active:scale-[0.98] disabled:opacity-70 disabled:cursor-not-allowed ${theme.button} ${theme.shadow}`}>
            {submitting ? <Loader2 className="animate-spin" /> : (<><Send size={24} /> ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø¶ÙˆØ± Ø§Ù„Ø¢Ù†</>)}
          </button>

          <p className="text-center text-[10px] text-white/20 tracking-widest uppercase">ØªØ£Ù…ÙŠÙ† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨ÙˆØ§Ø³Ø·Ø© Ù…ÙÙ€Ø±Ø§Ø³ Â© 2025</p>
        </form>
      </div>
    </div>
  );
}
</file>

<file path="app/globals.css">
@import "tailwindcss";

@theme {
  /* ØªØ¹Ø±ÙŠÙ Ø£Ù„ÙˆØ§Ù† Ù…ÙØ±Ø§Ø³ Ø§Ù„ÙØ®Ù…Ø© */
  --color-primary-500: #C19D65;
  --color-primary-600: #A4824E;
  --color-background-deep: #0F0F12;
  --color-background-card: #18181B;
  --color-action-blue: #2563EB;
  
  /* ØªØ¹Ø±ÙŠÙ Ø§Ù„Ø®Ø· */
  --font-sans: "Alexandria", sans-serif;
}

@layer base {
  body {
    @apply bg-background-deep text-white antialiased;
    font-family: var(--font-sans);
  }
}

@layer utilities {
  .glass-card {
    @apply bg-white/[0.03] backdrop-blur-xl border border-white/10;
  }
}
/* ØªØ¹Ø±ÙŠÙ Ø­Ø±ÙƒØ© Ù†Ø¨Ø¶ Ø§Ù„Ø®ÙŠÙˆØ· Ø§Ù„Ø¶ÙˆØ¦ÙŠØ© */
@keyframes fiberPulse {
  0%, 100% { opacity: 0.1; stroke-width: 0.5px; }
  50% { opacity: 0.4; stroke-width: 1.2px; }
}

.animate-fiber {
  animation: fiberPulse 4s ease-in-out infinite;
}

/* ØªØ£Ø«ÙŠØ± Ø§Ù„ØªÙˆÙ‡Ø¬ Ù„Ù„Ø®ÙŠÙˆØ· */
.glow-line {
  filter: drop-shadow(0 0 2px currentColor);
}
</file>

<file path="app/layout.tsx">
import type { Metadata } from "next";
import { Alexandria } from "next/font/google";
import "./globals.css";

const alexandria = Alexandria({ 
  subsets: ["arabic"],
  variable: "--font-alexandria",
  display: "swap",
});

export const metadata: Metadata = {
  title: "Ù…ÙØ±Ø§Ø³ | Meras",
  description: "Ø§Ù„Ø¬ÙŠÙ„ Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ù…Ù† Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø§Øª ÙˆØ§Ù„Ø£Ø¹Ù…Ø§Ù„",
};

export default function RootLayout({
  children,
}: Readonly<{
  children: React.ReactNode;
}>) {
  return (
    <html lang="ar" dir="rtl">
      <body className={`${alexandria.variable} bg-background text-white antialiased`}>
        {/* Noise overlay for texture */}
        <div className="fixed inset-0 opacity-[0.03] pointer-events-none z-50 bg-noise mix-blend-overlay"></div>
        {children}
      </body>
    </html>
  );
}
</file>

<file path="app/login/page.tsx">
'use client';

import { useState } from 'react';
import { supabase } from '@/app/utils/supabase/client'; 
import { useRouter } from 'next/navigation';
import { Sparkles, Loader2, CheckCircle2, AlertCircle, Briefcase, PartyPopper, Chrome, ArrowLeft, Eye, EyeOff, ChevronRight, KeyRound, Mail } from 'lucide-react';
import Link from 'next/link';

// Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯ÙˆÙ„
const GULF_COUNTRIES = [
  { name: 'Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©', code: '+966', flag: 'ğŸ‡¸ğŸ‡¦', iso: 'SA', digits: 9, placeholder: '5xxxxxxxx' },
  { name: 'Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª', code: '+971', flag: 'ğŸ‡¦ğŸ‡ª', iso: 'AE', digits: 9, placeholder: '5xxxxxxxx' },
  { name: 'Ø§Ù„ÙƒÙˆÙŠØª', code: '+965', flag: 'ğŸ‡°ğŸ‡¼', iso: 'KW', digits: 8, placeholder: 'xxxxxxxx' },
  { name: 'Ù‚Ø·Ø±', code: '+974', flag: 'ğŸ‡¶ğŸ‡¦', iso: 'QA', digits: 8, placeholder: 'xxxxxxxx' },
  { name: 'Ø¹Ù…Ø§Ù†', code: '+968', flag: 'ğŸ‡´ğŸ‡²', iso: 'OM', digits: 8, placeholder: 'xxxxxxxx' },
  { name: 'Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†', code: '+973', flag: 'ğŸ‡§ğŸ‡­', iso: 'BH', digits: 8, placeholder: 'xxxxxxxx' },
];

// --- ØªØ¹Ø±ÙŠÙ Ø§Ù„Ù…ÙƒÙˆÙ† Ø®Ø§Ø±Ø¬ Ø§Ù„Ø¯Ø§Ù„Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© ---
const InputField = ({ label, error, isTouched, themeColor, name, ...props }: any) => {
  return (
    <div className="relative group">
      <label className="text-[10px] text-white/30 absolute -top-2.5 right-4 bg-[#0F0F12] px-2 z-10 font-bold uppercase italic">{label}</label>
      <div className="relative">
        <input
          name={name}
          className={`w-full bg-white/[0.02] border rounded-2xl p-5 outline-none font-sans transition-all 
            ${isTouched && error ? 'border-red-500/50 focus:border-red-500' : 'border-white/10'} 
            ${(!isTouched || !error) && 'focus:border-[var(--theme-color)]'}`}
          style={{ '--theme-color': themeColor } as React.CSSProperties}
          {...props}
        />
        {isTouched && !error && props.value && name !== 'password' && name !== 'confirmPassword' && name !== 'otp' && (
          <CheckCircle2 size={20} className="absolute left-4 top-1/2 -translate-y-1/2 text-green-500 animate-in zoom-in" />
        )}
      </div>
      {isTouched && error && (
        <p className="text-red-400 text-[10px] mt-2 mr-2 font-bold flex items-center gap-1 animate-in slide-in-from-top-1">
          <AlertCircle size={10} /> {error}
        </p>
      )}
    </div>
  );
};

export default function AuthPage() {
  const [isSignUp, setIsSignUp] = useState(true);
  const [loginMethod, setLoginMethod] = useState<'password' | 'otp'>('password'); // âœ… Ø¬Ø¯ÙŠØ¯: Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„
  const [otpSent, setOtpSent] = useState(false); // âœ… Ø¬Ø¯ÙŠØ¯: Ø­Ø§Ù„Ø© Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ù…Ø²
  const [otpCode, setOtpCode] = useState(''); // âœ… Ø¬Ø¯ÙŠØ¯: ÙƒÙˆØ¯ Ø§Ù„Ù€ OTP
  const [showPassword, setShowPassword] = useState(false);
  const [loading, setLoading] = useState(false);
  const [interest, setInterest] = useState<'social' | 'business' | null>(null);
  const [error, setError] = useState<string | null>(null);
  const [selectedCountry, setSelectedCountry] = useState(GULF_COUNTRIES[0]);
  const router = useRouter();

  const [formData, setFormData] = useState({ fullName: '', email: '', phone: '', password: '', confirmPassword: '' });
  const [touched, setTouched] = useState<Record<string, boolean>>({});

  const themeColor = interest === 'business' ? '#3B82F6' : '#C19D65';
  const themeBg = interest === 'business' ? 'rgba(59, 130, 246, 0.1)' : 'rgba(193, 157, 101, 0.1)';

  // --- Ø§Ù„ØªØ­Ù‚Ù‚ ---
  const validate = (field: string, value: string) => {
    switch (field) {
      case 'fullName': return !value.trim() ? "Ù„Ø·ÙØ§Ù‹ØŒ Ø²ÙˆØ¯Ù†Ø§ Ø¨Ø§Ø³Ù…Ùƒ Ù„Ù†ØªÙ…ÙƒÙ† Ù…Ù† ØªØ®ØµÙŠØµ ØªØ¬Ø±Ø¨ØªÙƒ." : "";
      case 'email': return !/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/.test(value) ? "Ø¹Ø°Ø±Ø§Ù‹ØŒ ØµÙŠØºØ© Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØºÙŠØ± ØµØ­ÙŠØ­Ø©." : "";
      case 'phone': return (!/^\d+$/.test(value) || value.length !== selectedCountry.digits) ? `Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„ ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† ${selectedCountry.digits} Ø£Ø±Ù‚Ø§Ù….` : "";
      case 'password': return !/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}$/.test(value) ? "ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø¶Ø¹ÙŠÙØ© (8 Ø®Ø§Ù†Ø§ØªØŒ Ø­Ø±Ù ÙƒØ¨ÙŠØ± ÙˆØµØºÙŠØ± ÙˆØ±Ù‚Ù…)." : "";
      case 'confirmPassword': return value !== formData.password ? "ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± Ù…ØªØ·Ø§Ø¨Ù‚Ø©." : "";
      case 'otp': return value.length !== 6 ? "Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† 6 Ø£Ø±Ù‚Ø§Ù…" : ""; // âœ… Ø¬Ø¯ÙŠØ¯
      default: return "";
    }
  };

  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    const { name, value } = e.target;
    if (name === 'phone' && !/^\d*$/.test(value)) return;
    if (name === 'otp') { setOtpCode(value); return; } // âœ… Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù€ OTP
    setFormData(prev => ({ ...prev, [name]: value }));
  };

  const handleBlur = (e: React.FocusEvent<HTMLInputElement>) => {
    const name = e.target.name === 'otp' ? 'otp' : e.target.name;
    setTouched(prev => ({ ...prev, [name]: true }));
  };

  const isFormValid = () => {
    const emailValid = !validate('email', formData.email);
    
    // 1. Ø­Ø§Ù„Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¹Ø¨Ø± OTP
    if (!isSignUp && loginMethod === 'otp') {
        if (otpSent) return emailValid && otpCode.length === 6;
        return emailValid;
    }

    // 2. Ø­Ø§Ù„Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¹Ø¨Ø± Ø§Ù„Ø¨Ø§Ø³ÙˆØ±Ø¯
    if (!isSignUp && loginMethod === 'password') {
       return emailValid && !validate('password', formData.password);
    }

    // 3. Ø­Ø§Ù„Ø© Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨
    return emailValid && 
           !validate('password', formData.password) &&
           !validate('fullName', formData.fullName) && 
           !validate('phone', formData.phone) && 
           !validate('confirmPassword', formData.confirmPassword);
  };

  // --- Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª ---
  const handleGoogleLogin = async () => {
    if (isSignUp && !interest) { setError("ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ù†ÙˆØ¹ Ø§Ù‡ØªÙ…Ø§Ù…Ùƒ Ø£ÙˆÙ„Ø§Ù‹"); return; }
    await supabase.auth.signInWithOAuth({
      provider: 'google',
      options: { redirectTo: `${window.location.origin}/auth/callback` },
    });
  };

  const handleAuth = async (e: React.FormEvent) => {
    e.preventDefault();
    if (isSignUp && !interest) { setError("ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ù†ÙˆØ¹ Ø§Ù„Ø§Ù‡ØªÙ…Ø§Ù…"); return; }
    
    if (!isFormValid()) { 
      if (isSignUp) {
        setTouched({ fullName: true, email: true, phone: true, password: true, confirmPassword: true });
      } else if (loginMethod === 'otp') {
         setTouched({ email: true, otp: true });
      } else {
        setTouched({ email: true, password: true });
      }
      return; 
    }
    
    setLoading(true); setError(null);
    try {
      if (isSignUp) {
        // --- Ù…Ù†Ø·Ù‚ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ (ÙƒÙ…Ø§ Ù‡Ùˆ) ---
        const { error: signUpError } = await supabase.auth.signUp({ 
          email: formData.email, 
          password: formData.password,
          options: { 
            data: { 
              full_name: formData.fullName, 
              phone_number: `${selectedCountry.code}${formData.phone}`, 
              interest 
            } 
          }
        });
        
        if (signUpError) {
          if (signUpError.message.includes('User already registered')) throw new Error('Ù‡Ø°Ø§ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù…Ø³Ø¬Ù„ Ù…Ø³Ø¨Ù‚Ø§Ù‹.');
          throw signUpError;
        }
        router.push(`/auth/verify?email=${encodeURIComponent(formData.email)}&interest=${interest}`);
        
      } else {
        // --- Ù…Ù†Ø·Ù‚ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ---
        
        if (loginMethod === 'otp') {
            // A. ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¹Ø¨Ø± OTP
            if (!otpSent) {
                // 1. Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ù…Ø²
                const { error: otpError } = await supabase.auth.signInWithOtp({
                    email: formData.email,
                    options: { shouldCreateUser: false } // Ù„Ø§ ØªÙ†Ø´Ø¦ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯ØŒ ÙÙ‚Ø· Ø¯Ø®ÙˆÙ„
                });
                if (otpError) throw otpError;
                setOtpSent(true);
                alert(`ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ù…Ø² Ø¥Ù„Ù‰ ${formData.email}`);
            } else {
                // 2. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø±Ù…Ø²
                const { error: verifyError } = await supabase.auth.verifyOtp({
                    email: formData.email,
                    token: otpCode,
                    type: 'email'
                });
                if (verifyError) throw new Error('Ø§Ù„Ø±Ù…Ø² ØºÙŠØ± ØµØ­ÙŠØ­ Ø£Ùˆ Ù…Ù†ØªÙ‡ÙŠ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©');
                router.push('/dashboard');
            }

        } else {
            // B. ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¹Ø¨Ø± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± (Ø§Ù„ØªÙ‚Ù„ÙŠØ¯ÙŠ)
            const { error: signInError } = await supabase.auth.signInWithPassword({ 
              email: formData.email, 
              password: formData.password 
            });
    
            if (signInError) {
              if (signInError.message.includes('Invalid login credentials')) throw new Error('Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©.');
              throw signInError;
            }
            router.push('/dashboard');
        }
      }
    } catch (err: any) { setError(err.message); } finally { setLoading(false); }
  };

  return (
    <div className="min-h-screen bg-[#0A0A0C] text-white flex items-center justify-center p-6 text-right font-sans relative overflow-hidden transition-all duration-700" dir="rtl">
      
      <Link href="/" className="absolute top-8 right-8 z-50 group flex items-center gap-3 transition-all">
        <div className="w-10 h-10 rounded-full bg-white/5 border border-white/10 flex items-center justify-center group-hover:bg-white/10 group-hover:border-[var(--theme-color)] transition-all duration-300 backdrop-blur-md"
             style={{ '--theme-color': themeColor } as React.CSSProperties}>
          <ChevronRight size={18} className="text-white/40 group-hover:text-white transition-colors" />
        </div>
      </Link>

      <div className="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[500px] h-[500px] rounded-full blur-[100px] opacity-20 transition-all duration-1000" style={{ background: `radial-gradient(circle, ${themeColor} 0%, transparent 70%)` }} />

      <div className="w-full max-w-xl bg-[#0F0F12]/90 border border-white/10 rounded-[3.5rem] p-10 backdrop-blur-3xl shadow-2xl relative z-10">
        
        <div className="text-center mb-8">
          <div className="w-16 h-16 rounded-2xl flex items-center justify-center mx-auto mb-4 border transition-all duration-500" style={{ backgroundColor: themeBg, borderColor: `${themeColor}40` }}>
            {/* ØªØºÙŠÙŠØ± Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø­Ø³Ø¨ Ø­Ø§Ù„Ø© Ø§Ù„Ù€ OTP */}
            {loginMethod === 'otp' && !isSignUp ? <KeyRound size={32} style={{ color: themeColor }} /> : <Sparkles size={32} style={{ color: themeColor }} className="animate-pulse" />}
          </div>
          <h1 className="text-3xl font-black italic tracking-tighter mb-2">Ù…ÙÙ€Ø±Ø§Ø³</h1>
          <p style={{ color: themeColor }} className="text-[11px] font-bold tracking-widest transition-colors duration-500 italic">
             {otpSent ? `ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ù…Ø² Ø¥Ù„Ù‰ ${formData.email}` : 'Ø§Ø¨Ø¯Ø£ Ø¨ØªÙ†Ø¸ÙŠÙ… ÙØ¹Ø§Ù„ÙŠØªÙƒ Ø§Ù„Ø£ÙˆÙ„Ù‰ ÙÙŠ Ø£Ù‚Ù„ Ù…Ù† Ø¯Ù‚ÙŠÙ‚ØªÙŠÙ†'}
          </p>
        </div>

        {/* --- Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø§Ù‡ØªÙ…Ø§Ù… (ÙÙ‚Ø· ÙÙŠ Ø§Ù„ØªØ³Ø¬ÙŠÙ„) --- */}
        {isSignUp && (
          <div className="mb-6 space-y-3">
            <div className="grid grid-cols-2 gap-4">
              <button type="button" onClick={() => setInterest('social')} className={`p-4 rounded-2xl border-2 transition-all duration-500 flex flex-col items-center gap-2 ${interest === 'social' ? 'border-[#C19D65] bg-[#C19D65]/10' : 'border-white/5 bg-white/[0.02] hover:border-white/10'}`}>
                <PartyPopper className={interest === 'social' ? 'text-[#C19D65]' : 'text-white/20'} size={24} />
                <span className="text-[10px] font-black uppercase">Ø£ÙØ±Ø§Ø­ ÙˆÙ…Ù†Ø§Ø³Ø¨Ø§Øª âœ¨</span>
              </button>
              <button type="button" onClick={() => setInterest('business')} className={`p-4 rounded-2xl border-2 transition-all duration-500 flex flex-col items-center gap-2 ${interest === 'business' ? 'border-[#3B82F6] bg-[#3B82F6]/10' : 'border-white/5 bg-white/[0.02] hover:border-white/10'}`}>
                <Briefcase className={interest === 'business' ? 'text-[#3B82F6]' : 'text-white/20'} size={24} />
                <span className="text-[10px] font-black uppercase">Ø£Ø¹Ù…Ø§Ù„ ÙˆÙ…Ø¤ØªÙ…Ø±Ø§Øª ğŸ’¼</span>
              </button>
            </div>
          </div>
        )}

        {/* --- Ø²Ø± Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ Ø¨ÙŠÙ† Ø§Ù„Ø¨Ø§Ø³ÙˆØ±Ø¯ Ùˆ OTP (ÙÙ‚Ø· ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„) --- */}
        {!isSignUp && (
            <div className="flex bg-white/5 p-1 rounded-2xl mb-6">
                <button 
                    type="button"
                    onClick={() => { setLoginMethod('password'); setOtpSent(false); setError(null); }}
                    className={`flex-1 py-3 rounded-xl text-xs font-bold transition-all ${loginMethod === 'password' ? 'bg-white/10 text-white' : 'text-white/40 hover:text-white'}`}
                >
                    ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
                </button>
                <button 
                    type="button"
                    onClick={() => { setLoginMethod('otp'); setError(null); }}
                    className={`flex-1 py-3 rounded-xl text-xs font-bold transition-all ${loginMethod === 'otp' ? 'bg-[var(--theme-color)] text-black' : 'text-white/40 hover:text-white'}`}
                    style={loginMethod === 'otp' ? { backgroundColor: themeColor } : {}}
                >
                    Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ (OTP)
                </button>
            </div>
        )}

        <form onSubmit={handleAuth} className="space-y-4" noValidate>
           {/* Ø§Ù„Ø§Ø³Ù… (ÙÙ‚Ø· ØªØ³Ø¬ÙŠÙ„) */}
           {isSignUp && (
             <InputField 
               name="fullName" type="text" label="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø«Ù„Ø§Ø«ÙŠ" autoComplete="name"
               value={formData.fullName} onChange={handleChange} onBlur={handleBlur}
               error={validate('fullName', formData.fullName)} isTouched={touched.fullName} themeColor={themeColor}
             />
           )}
           
           {/* Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ (Ø¯Ø§Ø¦Ù…Ø§Ù‹ Ù…ÙˆØ¬ÙˆØ¯ Ø¥Ù„Ø§ Ø¥Ø°Ø§ ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ù…Ø² ÙÙŠ ÙˆØ¶Ø¹ OTP) */}
           {(!otpSent || isSignUp || loginMethod === 'password') && (
               <InputField 
                 name="email" type="email" label="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ" placeholder="name@company.com" autoComplete="email"
                 value={formData.email} onChange={handleChange} onBlur={handleBlur}
                 error={validate('email', formData.email)} isTouched={touched.email} themeColor={themeColor}
               />
           )}

           {/* Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„ (ÙÙ‚Ø· ØªØ³Ø¬ÙŠÙ„) */}
           {isSignUp && (
             <div className="relative group">
                {/* ... (Ù†ÙØ³ ÙƒÙˆØ¯ Ø§Ù„Ø¬ÙˆØ§Ù„ Ø§Ù„Ø³Ø§Ø¨Ù‚ Ù„Ù… ÙŠØªØºÙŠØ±) ... */}
                 <label className="text-[10px] text-white/30 absolute -top-2.5 right-4 bg-[#0F0F12] px-2 z-10 font-bold uppercase italic">Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„</label>
                 <div className="flex flex-row-reverse gap-3">
                    <div className="relative w-32 shrink-0">
                      <select onChange={(e) => setSelectedCountry(GULF_COUNTRIES[e.target.selectedIndex])} className="w-full bg-white/[0.02] border border-white/10 rounded-2xl p-5 text-sm appearance-none text-center font-bold outline-none cursor-pointer h-[66px]">
                        {GULF_COUNTRIES.map(c => <option key={c.iso} className="bg-[#0F0F12]">{c.iso} {c.code}</option>)}
                      </select>
                    </div>
                    <div className="flex-1 relative">
                      <input name="phone" type="tel" value={formData.phone} onChange={handleChange} onBlur={handleBlur} 
                        placeholder={selectedCountry.placeholder} maxLength={selectedCountry.digits} autoComplete="tel"
                        className={`w-full bg-white/[0.02] border rounded-2xl p-5 outline-none font-sans h-[66px] text-left dir-ltr ${touched.phone && validate('phone', formData.phone) ? 'border-red-500/50 focus:border-red-500' : 'border-white/10'} ${(!touched.phone || !validate('phone', formData.phone)) && 'focus:border-[var(--theme-color)]'}`}
                        style={{ '--theme-color': themeColor } as React.CSSProperties} />
                    </div>
                 </div>
             </div>
           )}

           {/* ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± (ÙÙŠ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø£Ùˆ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ø§Ù„Ø¨Ø§Ø³ÙˆØ±Ø¯) */}
           {(isSignUp || (!isSignUp && loginMethod === 'password')) && (
             <div className="space-y-4">
               <div className="relative">
                 <InputField 
                   name="password" type={showPassword ? "text" : "password"} label="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" autoComplete="new-password"
                   value={formData.password} onChange={handleChange} onBlur={handleBlur}
                   error={isSignUp ? validate('password', formData.password) : ""} isTouched={touched.password} themeColor={themeColor}
                 />
                 <button type="button" onClick={() => setShowPassword(!showPassword)} className="absolute left-4 top-5 text-white/20 hover:text-white transition-colors z-20">
                   {showPassword ? <EyeOff size={18} /> : <Eye size={18} />}
                 </button>
               </div>
               
               {isSignUp && (
                 <InputField 
                   name="confirmPassword" type={showPassword ? "text" : "password"} label="ØªØ£ÙƒÙŠØ¯ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" autoComplete="new-password"
                   value={formData.confirmPassword} onChange={handleChange} onBlur={handleBlur}
                   error={validate('confirmPassword', formData.confirmPassword)} isTouched={touched.confirmPassword} themeColor={themeColor}
                 />
               )}
             </div>
           )}

           {/* ğŸ”‘ Ø­Ù‚Ù„ Ø¥Ø¯Ø®Ø§Ù„ OTP (ÙŠØ¸Ù‡Ø± ÙÙ‚Ø· Ø¹Ù†Ø¯ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù€ OTP ÙˆØ¨Ø¹Ø¯ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„) */}
           {!isSignUp && loginMethod === 'otp' && otpSent && (
              <div className="space-y-4 animate-in slide-in-from-bottom-4">
                  <InputField 
                    name="otp" 
                    type="text" 
                    label="Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ (6 Ø£Ø±Ù‚Ø§Ù…)" 
                    placeholder="------" 
                    maxLength={6}
                    value={otpCode} 
                    onChange={handleChange} 
                    onBlur={handleBlur}
                    error={validate('otp', otpCode)} 
                    isTouched={touched.otp} 
                    themeColor={themeColor}
                    className="text-center tracking-[0.5em] text-2xl font-mono" // ØªÙ†Ø³ÙŠÙ‚ Ø®Ø§Øµ Ù„Ù„Ø£Ø±Ù‚Ø§Ù…
                  />
                  <button type="button" onClick={() => setOtpSent(false)} className="text-xs text-white/40 hover:text-white w-full text-center">
                    ØªØºÙŠÙŠØ± Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØŸ
                  </button>
              </div>
           )}

          {error && <div className="p-4 bg-red-500/10 border border-red-500/20 rounded-xl text-red-500 text-[11px] text-center font-bold flex items-center justify-center gap-2 animate-in fade-in"><AlertCircle size={14} /> {error}</div>}

          <button 
            type="submit"
            disabled={loading} 
            style={{ backgroundColor: themeColor, boxShadow: `0 15px 30px ${themeColor}20` }} 
            className="w-full text-black py-5 rounded-2xl font-black text-lg hover:scale-[1.01] active:scale-[0.98] transition-all flex items-center justify-center gap-3 group disabled:opacity-70 mt-6 shadow-xl"
          >
            {loading ? <Loader2 className="animate-spin" /> : 
                (isSignUp ? 'Ø£Ù†Ø´Ø¦ Ø­Ø³Ø§Ø¨ÙŠ Ø§Ù„Ø¢Ù†' : 
                 loginMethod === 'otp' ? (otpSent ? 'ØªØ­Ù‚Ù‚ ÙˆØ¯Ø®ÙˆÙ„' : 'Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ù…Ø²') : 'ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„')
            }
          </button>
        </form>

        <div className="relative my-8 flex items-center justify-center">
          <div className="absolute inset-0 flex items-center"><div className="w-full border-t border-white/5"></div></div>
          <span className="relative bg-[#0F0F12] px-4 text-[10px] font-black text-white/20 uppercase tracking-[0.3em]">Ø£Ùˆ</span>
        </div>

        <button type="button" onClick={handleGoogleLogin} className="w-full bg-white/5 border border-white/10 text-white/70 py-4 rounded-2xl flex items-center justify-center gap-3 hover:bg-white/10 hover:text-white transition-all font-bold text-sm mb-6 shadow-md">
          <Chrome size={18} /> Ø³Ø¬Ù„ Ø¹Ø¨Ø± Ø¬ÙˆØ¬Ù„
        </button>

        <button onClick={() => { setIsSignUp(!isSignUp); setOtpSent(false); setLoginMethod('password'); }} className="group flex flex-col items-center gap-1 mx-auto w-full">
          <span className="text-white/30 text-[11px] font-bold uppercase italic">{isSignUp ? 'Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ Ù…Ø³Ø¨Ù‚ØŸ' : 'Ø§Ù†Ø¶Ù… Ù„Ø¹Ø§Ù„Ù… Ù…ÙØ±Ø§Ø³ Ø§Ù„Ø¬Ø¯ÙŠØ¯'}</span>
          <span style={{ color: themeColor }} className="text-sm font-black flex items-center gap-2 group-hover:underline">
            {isSignUp ? 'ØªÙØ¶Ù„ Ø¨ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„Ùƒ' : 'Ø§Ø¨Ø¯Ø£ Ø±Ø­Ù„ØªÙƒ ÙƒÙ…Ù†Ø¸Ù… Ø§Ù„Ø¢Ù†'}
            <ArrowLeft size={14} className="group-hover:-translate-x-1 transition-transform" />
          </span>
        </button>

      </div>
    </div>
  );
}
</file>

<file path="app/page.tsx">
'use client';

import { useState } from 'react';
import Navbar from '@/components/Navbar';
import HeroSection from '@/components/HeroSection';
import FeatureSlider from '@/components/FeatureSlider';
import StickyCTA from '@/components/StickyCTA';

export default function Home() {
  const [isWedding, setIsWedding] = useState(true);

  return (
    <main className="min-h-screen relative bg-[#0F0F12] overflow-hidden transition-colors duration-1000 selection:bg-primary-500/30 text-right" dir="rtl">
      
      {/* 1. Ø·Ø¨Ù‚Ø© Ø§Ù„Ø®ÙŠÙˆØ· Ø§Ù„Ø¶ÙˆØ¦ÙŠØ© (Ø§Ù„Ø®Ù„ÙÙŠØ© Ø§Ù„ØªÙ‚Ù†ÙŠØ©) */}
      <div className="absolute inset-0 z-0 pointer-events-none opacity-40">
        <svg className="w-full h-full" xmlns="http://www.w3.org/2000/svg">
          <pattern id="grid" width="80" height="80" patternUnits="userSpaceOnUse">
            <path d="M 80 0 L 0 0 0 80" fill="none" stroke={isWedding ? "#C19D65" : "#2563EB"} strokeWidth="0.2" strokeOpacity="0.2" className="transition-colors duration-1000" />
          </pattern>
          <g className="glow-line">
            {[...Array(6)].map((_, i) => (
              <line key={i} x1="-10%" y1={`${15 * i}%`} x2="110%" y2={`${15 * i + 10}%`} stroke={isWedding ? "#C19D65" : "#2563EB"} className="transition-colors duration-1000 animate-fiber" style={{ animationDelay: `${i * 1.2}s`, strokeDasharray: '150 400' }} />
            ))}
          </g>
          <rect width="100%" height="100%" fill="url(#grid)" />
        </svg>
      </div>

      <div className="relative z-10">
        <Navbar isWedding={isWedding} />
        
        {/* 2. Ù‚Ø³Ù… Ø§Ù„Ù‡ÙŠØ±Ùˆ (ØµÙŠØ§ØºØ© Ø¨ÙŠØ¹ÙŠØ© Benefit-driven) */}
        <HeroSection isWedding={isWedding} onToggle={setIsWedding} />
        
        {/* 3. Ø´Ø±ÙŠØ· Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª (Ø­Ù„ÙˆÙ„ Ù„Ù„Ù…Ø´ÙƒÙ„Ø§Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©) */}
        <FeatureSlider isWedding={isWedding} />

        {/* 4. Ù‚Ø³Ù… "ÙƒÙŠÙ ÙŠØ¹Ù…Ù„ Ù…ÙØ±Ø§Ø³ØŸ" (Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø®ÙˆÙ Ø§Ù„ØªÙ‚Ù†ÙŠ) */}
        <section className="py-24 px-6 relative">
          <div className="max-w-7xl mx-auto">
            <h2 className="text-3xl md:text-4xl font-bold text-center mb-16 text-white leading-tight">
              Ø±Ø­Ù„ØªÙƒ Ù…Ø¹ <span className={isWedding ? "text-[#C19D65]" : "text-blue-500"}>Ù…ÙØ±Ø§Ø³</span> ÙÙŠ 3 Ø®Ø·ÙˆØ§Øª
            </h2>
            <div className="grid grid-cols-1 md:grid-cols-3 gap-12">
              {[
                { id: '01', t: 'Ø£Ù†Ø´Ø¦ Ù…Ù†Ø§Ø³Ø¨ØªÙƒ', d: 'Ø£Ø¯Ø®Ù„ Ø§Ù„ØªÙØ§ØµÙŠÙ„ ÙˆØ§Ø±ÙØ¹ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¶ÙŠÙˆÙ ÙÙŠ Ø«ÙˆØ§Ù†Ù.' },
                { id: '02', t: 'Ø£Ø±Ø³Ù„ Ø§Ù„Ø¯Ø¹ÙˆØ§Øª', d: 'ØªØµÙ„ Ø±Ø³Ø§Ø¦Ù„ ÙˆØ§ØªØ³Ø§Ø¨ Ø¨Ø¨Ø§Ø±ÙƒÙˆØ¯ Ø®Ø§Øµ ÙˆØªØµÙ…ÙŠÙ… ÙØ®Ù….' },
                { id: '03', t: 'Ù†Ø¸Ù‘Ù… Ø§Ù„Ø¯Ø®ÙˆÙ„', d: 'Ø¨Ø¶ØºØ·Ø© Ø²Ø± Ø¹Ù†Ø¯ Ø§Ù„Ø¨ÙˆØ§Ø¨Ø©ØŒ ÙˆØ¯Ù‘Ø¹ Ø·ÙˆØ§Ø¨ÙŠØ± Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±.' }
              ].map((step) => (
                <div key={step.id} className="relative group text-center">
                  <div className={`text-7xl font-black mb-4 opacity-5 transition-colors duration-500 ${isWedding ? "group-hover:text-[#C19D65] opacity-10" : "group-hover:text-blue-500 opacity-10"}`}>{step.id}</div>
                  <h3 className="text-xl font-bold mb-2 text-white">{step.t}</h3>
                  <p className="text-white/60 text-sm leading-relaxed max-w-[200px] mx-auto">{step.d}</p>
                </div>
              ))}
            </div>
          </div>
        </section>

        {/* 5. Ù‚Ø³Ù… Ø§Ù„Ø£Ø³Ø¹Ø§Ø± (Pricing & Conversion) */}
        <section className="py-32 px-6 relative overflow-hidden bg-white/[0.01]">
          <div className="max-w-7xl mx-auto text-center mb-20">
            <h2 className="text-4xl font-bold mb-6 text-white">Ø¨Ø§Ù‚Ø§Øª Ø´ÙØ§ÙØ© ØªÙ†Ø§Ø³Ø¨ Ø§Ø­ØªÙŠØ§Ø¬Ùƒ</h2>
            <p className="text-white/40 max-w-xl mx-auto">Ø§Ø®ØªØ± Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„ØªÙŠ ØªÙ†Ø§Ø³Ø¨ Ø­Ø¬Ù… Ù…Ù†Ø§Ø³Ø¨ØªÙƒ ÙˆØ§Ø¨Ø¯Ø£ ÙÙˆØ±Ø§Ù‹.</p>
          </div>

          <div className="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl mx-auto items-end">
            
            {/* Ø¨Ø§Ù‚Ø© Ø´Ø®ØµÙŠØ© - Ø²Ø± Ù…ÙØ±Øº Ù„ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ù€ CTR Ø¹Ù„ÙŠÙ‡Ø§ */}
            <div className="bg-white/[0.03] backdrop-blur-xl border border-white/5 p-10 rounded-[2.5rem] flex flex-col transition-all">
              <h3 className="text-xl font-bold mb-2 text-white/80">Ø´Ø®ØµÙŠØ©</h3>
              <div className="text-4xl font-bold mb-8 text-white/40">Ù…Ø¬Ø§Ù†ÙŠØ©</div>
              <ul className="space-y-4 mb-12 flex-1 text-sm text-white/50">
                <li>âœ“ Ù…Ù†Ø§Ø³Ø¨Ø© ÙˆØ§Ø­Ø¯Ø©</li>
                <li>âœ“ Ù‚Ø§Ø±Ø¦ Ø¨Ø§Ø±ÙƒÙˆØ¯ ÙˆØ§Ø­Ø¯</li>
                <li>âœ“ Ø¥Ø±Ø³Ø§Ù„ Ø¹Ø¨Ø± Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„</li>
              </ul>
              <button className="w-full py-4 rounded-2xl border border-white/10 text-white/60 font-bold hover:bg-white/5 transition-all text-xs">Ø§Ø¨Ø¯Ø£ Ù…Ø¬Ø§Ù†Ø§Ù‹</button>
            </div>

            {/* Ø¨Ø§Ù‚Ø© Ù…ØªØ·ÙˆØ±Ø© - (The Money Maker) Ø²Ø± Ù…ØµÙ…Øª ÙˆØªØµÙ…ÙŠÙ… Ø¨Ø§Ø±Ø² */}
            <div className={`p-[2px] rounded-[3rem] transition-all duration-700 scale-105 transform shadow-2xl ${isWedding ? 'bg-gradient-to-b from-[#C19D65] to-transparent shadow-[#C19D65]/20' : 'bg-gradient-to-b from-blue-500 to-transparent shadow-blue-500/20'}`}>
              <div className="bg-[#121215] p-10 rounded-[2.9rem] h-full flex flex-col">
                <div className={`text-black text-[10px] font-bold px-4 py-1.5 rounded-full w-fit mb-4 ${isWedding ? 'bg-[#C19D65]' : 'bg-blue-500'}`}>Ø§Ù„Ø£ÙƒØ«Ø± Ø·Ù„Ø¨Ø§Ù‹</div>
                <h3 className="text-2xl font-bold mb-2 text-white">Ù…ØªØ·ÙˆØ±Ø©</h3>
                <div className={`text-5xl font-bold mb-8 ${isWedding ? 'text-[#C19D65]' : 'text-blue-500'}`}>59 <span className="text-lg opacity-40">Ø±ÙŠØ§Ù„</span></div>
                <ul className="space-y-4 mb-12 flex-1 text-sm text-white/80">
                  <li>âœ“ Ù…Ù†Ø§Ø³Ø¨Ø§Øª Ù…ØªØ¹Ø¯Ø¯Ø© Ù…ØªØ²Ø§Ù…Ù†Ø©</li>
                  <li>âœ“ Ø£ÙƒØ«Ø± Ù…Ù† Ù‚Ø§Ø±Ø¦ Ø¨Ø§Ø±ÙƒÙˆØ¯</li>
                  <li>âœ“ Ø¥ÙŠÙ…ÙŠÙ„Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ©</li>
                </ul>
                <button className={`w-full py-5 rounded-2xl font-black transition-all text-black text-lg ${isWedding ? 'bg-[#C19D65] hover:bg-[#A4824E]' : 'bg-blue-500 hover:bg-blue-600'}`}>Ø§Ø´ØªØ±Ùƒ Ø§Ù„Ø¢Ù†</button>
              </div>
            </div>

            {/* Ø¨Ø§Ù‚Ø© Ø§Ø­ØªØ±Ø§ÙÙŠØ© */}
            <div className="bg-white/[0.03] backdrop-blur-xl border border-white/5 p-10 rounded-[2.5rem] flex flex-col transition-all">
              <h3 className="text-xl font-bold mb-2 text-white/80">Ø§Ø­ØªØ±Ø§ÙÙŠØ©</h3>
              <div className={`text-4xl font-bold mb-8 ${isWedding ? 'text-[#C19D65]' : 'text-blue-500'}`}>149 <span className="text-sm opacity-40">Ø±ÙŠØ§Ù„</span></div>
              <ul className="space-y-4 mb-12 flex-1 text-sm text-white/50">
                <li>âœ“ Ø±Ø¨Ø· Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ Ø§Ù„Ø®Ø§Øµ</li>
                <li>âœ“ Ø¥Ø±Ø³Ø§Ù„ Ù…Ø¨Ø§Ø´Ø± Ù…Ù† Ù‡Ø§ØªÙÙƒ</li>
                <li>âœ“ Ø¥Ø²Ø§Ù„Ø© Ø´Ø¹Ø§Ø± Ù…ÙØ±Ø§Ø³</li>
              </ul>
              <button className="w-full py-4 rounded-2xl border border-white/10 text-white/60 font-bold hover:bg-white/5 transition-all">Ø§Ø®ØªØ± Ø§Ù„Ø¨Ø§Ù‚Ø©</button>
            </div>
          </div>
        </section>

        {/* 6. Ù‚Ø³Ù… Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø´Ø§Ø¦Ø¹Ø© (Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø«Ù‚Ø©) */}
        <section className="py-24 px-6 border-t border-white/5">
          <div className="max-w-3xl mx-auto">
            <h2 className="text-3xl font-bold text-center mb-16 text-white leading-tight">Ù„Ø¯ÙŠÙƒ Ø§Ø³ØªÙØ³Ø§Ø±ØŸ <br/> <span className="text-white/40 text-lg font-normal">Ø¥Ù„ÙŠÙƒ Ù…Ø§ ÙŠØ³Ø£Ù„ Ø¹Ù†Ù‡ Ø§Ù„Ù…Ù†Ø¸Ù…ÙˆÙ† Ø¹Ø§Ø¯Ø©Ù‹</span></h2>
            <div className="space-y-8">
              {[
                { q: "Ù‡Ù„ Ø£Ø­ØªØ§Ø¬ Ø·Ø§Ø¨Ø¹Ø© Ø¨Ø§Ø±ÙƒÙˆØ¯ØŸ", a: "Ø¥Ø·Ù„Ø§Ù‚Ø§Ù‹ØŒ Ø£ÙŠ Ù‡Ø§ØªÙ Ø°ÙƒÙŠ ÙŠØ¹Ù…Ù„ ÙƒÙ‚Ø§Ø±Ø¦ Ø¨Ø§Ø±ÙƒÙˆØ¯ Ø§Ø­ØªØ±Ø§ÙÙŠ Ø¹Ø¨Ø± ØªØ·Ø¨ÙŠÙ‚Ù†Ø§." },
                { q: "Ù‡Ù„ ÙŠØ¹Ù…Ù„ Ø§Ù„Ù†Ø¸Ø§Ù… Ø¨Ø¯ÙˆÙ† Ø¥Ù†ØªØ±Ù†ØªØŸ", a: "Ù†Ø¹Ù…ØŒ ÙŠØ¯Ø¹Ù… Ù…ÙØ±Ø§Ø³ Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø© Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ© ÙÙˆØ± ØªÙˆÙØ± Ø§Ù„Ø§ØªØµØ§Ù„ Ù„Ø¶Ù…Ø§Ù† Ø¹Ø¯Ù… ØªÙˆÙ‚Ù Ø§Ù„Ø¯Ø®ÙˆÙ„." },
                { q: "ÙƒÙŠÙ ØªØµÙ„ Ø§Ù„Ø¯Ø¹ÙˆØ§Øª Ù„Ù„Ø¶ÙŠÙˆÙØŸ", a: "Ø¹Ø¨Ø± Ø±Ø³Ø§Ø¦Ù„ ÙˆØ§ØªØ³Ø§Ø¨ Ù†ØµÙŠØ© ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø±Ø§Ø¨Ø· Ø§Ù„ÙƒØ±Øª ÙˆØ§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯ Ø§Ù„Ø®Ø§Øµ Ø¨ÙƒÙ„ Ø¶ÙŠÙ." }
              ].map((faq, i) => (
                <div key={i} className="group cursor-pointer">
                  <h4 className={`text-lg font-bold mb-3 transition-colors ${isWedding ? "group-hover:text-[#C19D65]" : "group-hover:text-blue-500"}`}>{faq.q}</h4>
                  <p className="text-white/50 text-sm leading-relaxed border-r-2 border-white/10 pr-4">{faq.a}</p>
                </div>
              ))}
            </div>
          </div>
        </section>

        {/* 7. Ø§Ù„ØªØ°ÙŠÙŠÙ„ (Footer) Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ */}
        <footer className="py-16 px-6 bg-black/40 border-t border-white/5 text-center">
          <div className="max-w-7xl mx-auto flex flex-col items-center">
             <div className="flex gap-8 mb-8 text-sm text-white/30 font-bold">
                <a href="#" className="hover:text-white transition-colors">Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª</a>
                <a href="#" className="hover:text-white transition-colors">Ø§Ù„Ø¨Ø§Ù‚Ø§Øª</a>
                <a href="#" className="hover:text-white transition-colors">Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©</a>
             </div>
             <p className="text-white/10 text-xs">Â© 2025 Ù…ÙÙ€Ø±Ø§Ø³. ØµÙÙ†Ø¹ Ø¨ÙƒÙ„ ÙØ®Ø± Ù„ØªÙ†Ø¸ÙŠÙ… ÙØ¹Ø§Ù„ÙŠØ§Øª ØªÙ„ÙŠÙ‚ Ø¨Ùƒ.</p>
          </div>
        </footer>
      </div>

      <StickyCTA isWedding={isWedding} />
    </main>
  );
}
</file>

<file path="app/pricing/page.tsx">
'use client'
import { useEffect, useState } from 'react'
import { supabase } from '@/app/utils/supabase/client'
import { Check } from 'lucide-react'

export default function Pricing() {
  const [packages, setPackages] = useState<any[]>([])

  useEffect(() => {
    const getPackages = async () => {
        const { data } = await supabase.from('packages').select('*').order('price')
        if(data) setPackages(data)
    }
    getPackages()
  }, [])

  return (
    <div className="min-h-screen bg-slate-50 p-10 flex flex-col items-center justify-center" dir="rtl">
        <h1 className="text-3xl font-bold mb-10">Ø§Ø®ØªØ± Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø© Ù„Ùƒ</h1>
        <div className="grid grid-cols-1 md:grid-cols-3 gap-6 max-w-5xl w-full">
            {packages.map(pkg => (
                <div key={pkg.id} className={`bg-white p-8 rounded-2xl border ${pkg.price > 0 ? 'border-indigo-200 shadow-xl' : 'border-slate-200 shadow-sm'}`}>
                    <h3 className="text-xl font-bold text-slate-800">{pkg.name}</h3>
                    <p className="text-4xl font-bold my-4 text-indigo-600">{pkg.price} <span className="text-sm text-slate-400 font-normal">Ø±ÙŠØ§Ù„</span></p>
                    <ul className="space-y-3 mb-8">
                        <li className="flex items-center gap-2"><Check size={18} className="text-green-500"/> {pkg.max_events} ÙØ¹Ø§Ù„ÙŠØ§Øª</li>
                        <li className="flex items-center gap-2"><Check size={18} className="text-green-500"/> {pkg.max_attendees_per_event} Ø²Ø§Ø¦Ø± Ù„ÙƒÙ„ ÙØ¹Ø§Ù„ÙŠØ©</li>
                        <li className="flex items-center gap-2"><Check size={18} className="text-green-500"/> Ø¯Ø¹Ù… ÙÙ†ÙŠ</li>
                    </ul>
                    <button className="w-full py-3 rounded-xl font-bold border-2 border-indigo-600 text-indigo-600 hover:bg-indigo-600 hover:text-white transition">
                        {pkg.price === 0 ? 'Ø¨Ø§Ù‚ØªÙƒ Ø§Ù„Ø­Ø§Ù„ÙŠØ©' : 'ØªØ±Ù‚ÙŠØ© Ø§Ù„Ø¨Ø§Ù‚Ø©'}
                    </button>
                </div>
            ))}
        </div>
    </div>
  )
}
</file>

<file path="app/register/[id]/page.tsx">
'use client';

import { useState, use } from 'react';
import { useRouter } from 'next/navigation';
import {
  Loader2, Calendar, MapPin, AlertCircle,
  Heart, Briefcase, User, Mail,
  CheckCircle2
} from 'lucide-react';
import { supabase } from '@/app/utils/supabase/client';
import * as Sentry from '@sentry/nextjs'; // âœ… ØªØªØ¨Ø¹ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡

// âœ… Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© (Ø§Ù„ÙƒØ§Ø´ ÙˆØ§Ù„ØªØ­Ù‚Ù‚)
import { useEventWithCache } from '@/app/hooks/useEventWithCache';
import { registrationSchema } from '@/app/utils/schemas';
import { validateData } from '@/app/utils/schemas';

// Ø¨ÙŠØ§Ù†Ø§Øª Ø¯ÙˆÙ„ Ø§Ù„Ø®Ù„ÙŠØ¬
const GULF_COUNTRIES = [
  { name: 'Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©', code: '966', flag: 'ğŸ‡¸ğŸ‡¦', digits: 9, placeholder: '5xxxxxxxx' },
  { name: 'Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª', code: '971', flag: 'ğŸ‡¦ğŸ‡ª', digits: 9, placeholder: '5xxxxxxxx' },
  { name: 'Ø§Ù„ÙƒÙˆÙŠØª', code: '965', flag: 'ğŸ‡°ğŸ‡¼', digits: 8, placeholder: 'xxxxxxxx' },
  { name: 'Ù‚Ø·Ø±', code: '974', flag: 'ğŸ‡¶ğŸ‡¦', digits: 8, placeholder: 'xxxxxxxx' },
  { name: 'Ø¹Ù…Ø§Ù†', code: '968', flag: 'ğŸ‡´ğŸ‡²', digits: 8, placeholder: 'xxxxxxxx' },
  { name: 'Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†', code: '973', flag: 'ğŸ‡§ğŸ‡­', digits: 8, placeholder: 'xxxxxxxx' },
];

interface PageProps { params: Promise<{ id: string }>; }

export default function RegistrationPage({ params }: PageProps) {
  const { id } = use(params);
  const router = useRouter();

  // âœ… 1. Ø§Ø³ØªØ®Ø¯Ø§Ù… SWR Ù„Ù„ÙƒØ§Ø´ (Ø³Ø±Ø¹Ø© ØªØ­Ù…ÙŠÙ„ ÙÙˆØ±ÙŠØ©)
  // Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† useEffect Ùˆ useState Ø§Ù„Ù…Ø¹Ù‚Ø¯Ø©
  const { event, loading, error } = useEventWithCache(id);

  const [submitting, setSubmitting] = useState(false);
  const [submitError, setSubmitError] = useState<string | null>(null);

  // Form Data
  const [formData, setFormData] = useState({ name: '', email: '', phone: '' });
  const [selectedCountry, setSelectedCountry] = useState(GULF_COUNTRIES[0]);
  
  // âœ… ØªØ®Ø²ÙŠÙ† Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ù‚Ø§Ø¯Ù…Ø© Ù…Ù† Zod
  const [validationErrors, setValidationErrors] = useState<Record<string, string>>({});

  // Theme Logic
  const isWedding = event?.type !== 'business';
  const themeColor = isWedding ? '#C19D65' : '#3B82F6';
  const themeBg = isWedding ? 'bg-[#C19D65]' : 'bg-blue-600';

  // âœ… 2. Ø¯Ø§Ù„Ø© Ø§Ù„ØªØ­Ù‚Ù‚ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Zod
  const validateForm = () => {
    // ØªØ¬Ù‡ÙŠØ² Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„ØªØ­Ù‚Ù‚ (Ø¯Ù…Ø¬ Ù…ÙØªØ§Ø­ Ø§Ù„Ø¯ÙˆÙ„Ø© Ù…Ø¹ Ø§Ù„Ø±Ù‚Ù…)
    const fullPhone = selectedCountry.code + formData.phone;
    
    // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¯Ø§Ù„Ø© validateData Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© Ø§Ù„ØªÙŠ Ø¨Ù†ÙŠÙ†Ø§Ù‡Ø§
    const result = validateData(registrationSchema, {
      name: formData.name,
      email: formData.email,
      phone: fullPhone
    });

    if (!result.success && result.error) {
      setValidationErrors({ form: result.error });
      return false;
    }

    setValidationErrors({});
    return true;
  };

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    
    // ØªÙ†ÙÙŠØ° Ø§Ù„ØªØ­Ù‚Ù‚ Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„
    if (!validateForm()) return;

    setSubmitting(true);
    setSubmitError(null);

    try {
      const fullPhone = selectedCountry.code + formData.phone;

      // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
      const { data: guest, error: insertError } = await supabase
        .from('attendees')
        .insert([{
          event_id: id,
          name: formData.name,
          email: formData.email,
          phone: fullPhone,
          status: 'confirmed'
        }])
        .select()
        .single();

      if (insertError) throw insertError;
      if (!guest) throw new Error('ÙØ´Ù„ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªØ°ÙƒØ±Ø©');

      // ØªÙˆØ¬ÙŠÙ‡ Ù„Ù„ØªØ°ÙƒØ±Ø©
      router.push(`/t/${guest.id}`);

    } catch (err) {
      console.error(err);
      
      // âœ… 3. ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø·Ø£ ÙÙŠ Sentry (Ù„Ù„Ù…Ø±Ø§Ù‚Ø¨Ø©)
      Sentry.captureException(err, {
        extra: { eventId: id, formData },
        tags: { section: 'registration' }
      });

      const errorMsg = err instanceof Error ? err.message : 'Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰';
      setSubmitError(errorMsg);
      setSubmitting(false);
    }
  };

  // Loading State
  if (loading) return <div className="min-h-screen bg-[#0A0A0C] flex items-center justify-center"><Loader2 className="animate-spin text-[#C19D65]" /></div>;
  
  // Error State (SWR Error)
  if (error || !event) return <div className="min-h-screen bg-[#0A0A0C] flex items-center justify-center text-white">Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ© ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø© Ø£Ùˆ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„</div>;

  return (
    <div className="min-h-screen bg-[#0A0A0C] font-sans relative flex flex-col items-center justify-center p-6" dir="rtl">
      <div className="absolute top-0 left-0 w-full h-1/2 bg-gradient-to-b from-[var(--theme)]/20 to-transparent pointer-events-none" style={{ '--theme': themeColor } as any}></div>

      <div className="w-full max-w-md relative z-10">
        {/* Header */}
        <div className="text-center mb-10">
          <div className={`w-20 h-20 rounded-3xl mx-auto mb-6 flex items-center justify-center text-white shadow-2xl ${themeBg}`}>
            {isWedding ? <Heart size={36} fill="white" /> : <Briefcase size={36} />}
          </div>
          <h1 className="text-3xl font-black text-white mb-2">{event.name}</h1>
          <div className="flex justify-center gap-4 text-xs text-white/60 font-bold">
            <span className="flex items-center gap-1"><Calendar size={14} /> {new Date(event.date).toLocaleDateString('ar-SA')}</span>
            <span className="flex items-center gap-1"><MapPin size={14} /> {event.location_name || 'Ø§Ù„Ù…ÙˆÙ‚Ø¹'}</span>
          </div>
        </div>

        {/* Global Error Alert */}
        {submitError && (
          <div className="mb-6 bg-red-500/10 border border-red-500/30 rounded-2xl p-4 flex items-start gap-3 animate-in fade-in">
            <AlertCircle className="text-red-500 flex-shrink-0 mt-0.5" size={18} />
            <p className="text-sm text-red-400">{submitError}</p>
          </div>
        )}

        {/* Form */}
        <form onSubmit={handleSubmit} className="bg-[#18181B]/80 backdrop-blur-xl border border-white/10 p-8 rounded-[3rem] space-y-6 shadow-2xl">

          {/* Ø§Ù„Ø§Ø³Ù… */}
          <div className="space-y-2">
            <label className="text-xs text-white/40 mr-4 font-bold">Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø«Ù„Ø§Ø«ÙŠ</label>
            <div className="relative group">
              <User className="absolute right-5 top-1/2 -translate-y-1/2 text-white/20 group-focus-within:text-white transition-colors" size={18} />
              <input
                type="text"
                value={formData.name}
                onChange={(e) => setFormData({ ...formData, name: e.target.value })}
                // âœ… Ø¹Ø±Ø¶ Ø§Ù„Ø®Ø·Ø£ Ø¥Ù† ÙˆØ¬Ø¯ ÙÙŠ validationErrors
                className={`w-full bg-black/40 border rounded-2xl py-4 pr-12 pl-12 text-white outline-none transition-all ${validationErrors.name ? 'border-red-500/50 focus:border-red-500' : 'border-white/10 focus:border-[var(--theme)]'}`}
                placeholder="Ø§Ù„Ø§Ø³Ù… ÙƒÙ…Ø§ Ù‡Ùˆ ÙÙŠ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©"
                style={{ '--theme': themeColor } as any}
              />
            </div>
            {validationErrors.name && <p className="text-[10px] text-red-400 mr-4 mt-1 animate-in slide-in-from-top-1">{validationErrors.name}</p>}
          </div>

          {/* Ø§Ù„Ø¬ÙˆØ§Ù„ */}
          <div className="space-y-2">
            <label className="text-xs text-white/40 mr-4 font-bold">Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„</label>
            <div className={`flex flex-row-reverse bg-black/40 border rounded-2xl overflow-hidden transition-all ${validationErrors.phone ? 'border-red-500/50 focus-within:border-red-500' : 'border-white/10 focus-within:border-[var(--theme)]'}`} style={{ '--theme': themeColor } as any}>
              
              {/* Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†Ø³Ø¯Ù„Ø© */}
              <div className="relative w-28 border-r border-white/10 shrink-0">
                <select
                  className="absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10"
                  onChange={(e) => setSelectedCountry(GULF_COUNTRIES[e.target.selectedIndex])}
                >
                  {GULF_COUNTRIES.map((c, i) => <option key={i} value={i} className="text-black">{c.name}</option>)}
                </select>
                <div className="w-full h-full flex items-center justify-center text-xs gap-2 pointer-events-none">
                  <span>{selectedCountry.flag}</span>
                  <span className="dir-ltr font-mono font-bold">+{selectedCountry.code}</span>
                </div>
              </div>

              {/* Ø­Ù‚Ù„ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ */}
              <input
                type="tel"
                value={formData.phone}
                onChange={(e) => setFormData({ ...formData, phone: e.target.value })}
                placeholder={selectedCountry.placeholder}
                className="flex-1 bg-transparent py-4 px-4 text-white text-right outline-none font-mono tracking-widest placeholder:font-sans placeholder:tracking-normal placeholder:text-right dir-ltr"
              />
            </div>
            {validationErrors.phone && <p className="text-[10px] text-red-400 mr-4 mt-1 animate-in slide-in-from-top-1">{validationErrors.phone}</p>}
          </div>

          {/* Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ */}
          <div className="space-y-2">
            <label className="text-xs text-white/40 mr-4 font-bold">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ <span className="text-[10px] opacity-50">(Ù„Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„ØªØ°ÙƒØ±Ø©)</span></label>
            <div className="relative group">
              <Mail className="absolute right-5 top-1/2 -translate-y-1/2 text-white/20 group-focus-within:text-white transition-colors" size={18} />
              <input
                type="email"
                value={formData.email}
                onChange={(e) => setFormData({ ...formData, email: e.target.value })}
                className={`w-full bg-black/40 border rounded-2xl py-4 pr-12 pl-12 text-white outline-none transition-all text-left ${validationErrors.email ? 'border-red-500/50 focus:border-red-500' : 'border-white/10 focus:border-[var(--theme)]'}`}
                placeholder="name@example.com"
                style={{ '--theme': themeColor } as any}
              />
            </div>
            {validationErrors.email && <p className="text-[10px] text-red-400 mr-4 mt-1 animate-in slide-in-from-top-1">{validationErrors.email}</p>}
          </div>

          {/* Ø²Ø± Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ */}
          <button type="submit" disabled={submitting} className="w-full py-5 rounded-2xl font-black text-lg text-white shadow-xl hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed" style={{ backgroundColor: themeColor }}>
            {submitting ? <Loader2 className="animate-spin" /> : 'ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø¶ÙˆØ± ÙˆØ§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ØªØ°ÙƒØ±Ø©'}
          </button>
        </form>
        
        <p className="text-center text-[10px] text-white/20 mt-8 tracking-widest uppercase">Powered by Meras Platform Â© 2025</p>
      </div>
    </div>
  );
}
</file>

<file path="app/s/[id]/page.tsx">
'use client'

import { useState, use, useEffect } from 'react'
import { Scanner } from '@yudiel/react-qr-scanner'
import { supabase } from '@/app/utils/supabase/client'
import { CheckCircle, XCircle, Loader2, Camera, AlertTriangle, Repeat } from 'lucide-react'

interface PageProps {
  params: Promise<{ id: string }>
}

export default function PublicScanner({ params }: PageProps) {
  const resolvedParams = use(params)
  const eventId = resolvedParams.id
  
  const [status, setStatus] = useState<'idle' | 'success' | 'error' | 'warning' | 'loading'>('idle')
  const [message, setMessage] = useState('')
  const [guestName, setGuestName] = useState('')
  const [pauseScan, setPauseScan] = useState(false)
  const [allowMultiple, setAllowMultiple] = useState(false)
  const [eventTitle, setEventTitle] = useState('')

  useEffect(() => {
    const fetchEventSettings = async () => {
        const { data } = await supabase.from('events').select('title, allow_multiple_entry').eq('id', eventId).single()
        if (data) {
            setAllowMultiple(data.allow_multiple_entry || false)
            setEventTitle(data.title)
        }
    }
    fetchEventSettings()
  }, [eventId])

  const handleScan = async (rawText: string) => {
    if (pauseScan || status === 'loading' || status === 'success' || status === 'warning') return

    try {
      if (!rawText) return
      setPauseScan(true)
      setStatus('loading')
      
      const parsedData = JSON.parse(rawText)
      if (parsedData.eventId !== eventId) {
          setStatus('error'); setMessage('â›” ØªØ°ÙƒØ±Ø© Ù„Ø­ÙÙ„Ø© Ø£Ø®Ø±Ù‰!'); return
      }

      const { data: attendee, error: fetchError } = await supabase
          .from('attendees').select('*').eq('event_id', eventId).eq('phone', parsedData.phone).single()

      if (fetchError || !attendee) {
          setStatus('error'); setMessage('âŒ Ø§Ù„Ø¶ÙŠÙ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯'); return
      }

      if (attendee.status === 'attended' && !allowMultiple) {
            setStatus('warning')
            setMessage('âš ï¸ Ø§Ù„ØªØ°ÙƒØ±Ø© Ù…Ø³ØªØ®Ø¯Ù…Ø© Ù…Ø³Ø¨Ù‚Ø§Ù‹!')
            setGuestName(attendee.name)
            setTimeout(() => { setStatus('idle'); setGuestName(''); setMessage(''); setPauseScan(false) }, 3000)
            return
      }

      // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¶ÙˆØ± Ù…Ø¹ Ø§Ù„ÙˆÙ‚Øª
      const { error: updateError } = await supabase
          .from('attendees')
          .update({ 
              status: 'attended', 
              attended_at: new Date().toISOString() 
          })
          .eq('id', attendee.id)

      if (updateError) {
          setStatus('error'); setMessage('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ³Ø¬ÙŠÙ„')
      } else {
          setStatus('success')
          setGuestName(attendee.name)
          setMessage(attendee.status === 'attended' ? 'âœ… Ø¯Ø®ÙˆÙ„ Ù…ØªÙƒØ±Ø±' : 'âœ… Ù…Ø³Ù…ÙˆØ­ Ø¨Ø§Ù„Ø¯Ø®ÙˆÙ„')
          setTimeout(() => { setStatus('idle'); setMessage(''); setGuestName(''); setPauseScan(false) }, 3000)
      }

    } catch (err) {
      setStatus('error'); setMessage('âš ï¸ Ø¨Ø§Ø±ÙƒÙˆØ¯ ØºÙŠØ± ØµØ§Ù„Ø­')
      setTimeout(() => { setStatus('idle'); setPauseScan(false) }, 2000)
    }
  }

  return (
    <div className="min-h-screen bg-black flex flex-col items-center justify-center p-4 relative" dir="rtl">
      <div className="absolute top-6 w-full text-center z-10">
        <h1 className="text-white font-bold text-lg drop-shadow-md">{eventTitle}</h1>
        <div className="flex justify-center items-center gap-2 mt-2">
            <span className={`px-3 py-1 rounded-full text-xs flex items-center gap-1 backdrop-blur-md border ${allowMultiple ? 'bg-green-500/20 border-green-500/30 text-green-100' : 'bg-indigo-500/20 border-indigo-500/30 text-indigo-100'}`}>
                {allowMultiple ? <><Repeat size={12}/> Ø¯Ø®ÙˆÙ„ Ù…ØªØ¹Ø¯Ø¯</> : <><AlertTriangle size={12}/> Ø¯Ø®ÙˆÙ„ Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©</>}
            </span>
        </div>
      </div>

      <div className="w-full max-w-md bg-zinc-900 rounded-3xl overflow-hidden shadow-2xl relative border border-zinc-800">
        <div className="relative h-96 bg-black overflow-hidden">
            {status === 'success' && (
                <div className="absolute inset-0 flex flex-col items-center justify-center bg-green-600 text-white z-20 animate-in fade-in zoom-in duration-300">
                    <CheckCircle size={80} className="mb-4" />
                    <h2 className="text-3xl font-bold mb-2">Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ!</h2>
                    <p className="text-xl font-medium">{guestName}</p>
                </div>
            )}
            {status === 'warning' && (
                <div className="absolute inset-0 flex flex-col items-center justify-center bg-yellow-500 text-white z-20 animate-in fade-in zoom-in duration-300">
                    <AlertTriangle size={80} className="mb-4" />
                    <h2 className="text-2xl font-bold mb-2 text-center">Ø³Ø¨Ù‚ Ù„Ù‡ Ø§Ù„Ø¯Ø®ÙˆÙ„!</h2>
                    <p className="text-xl font-medium">{guestName}</p>
                </div>
            )}
            {status === 'error' && (
                <div className="absolute inset-0 flex flex-col items-center justify-center bg-red-600 text-white z-20 animate-in fade-in duration-300">
                    <XCircle size={80} className="mb-4" />
                    <h2 className="text-2xl font-bold text-center px-4">{message}</h2>
                    <button onClick={() => { setStatus('idle'); setPauseScan(false); }} className="mt-6 bg-white text-red-600 px-6 py-2 rounded-full font-bold shadow-lg">Ø§Ø³ØªÙ…Ø±Ø§Ø±</button>
                </div>
            )}
            {status === 'loading' && <div className="absolute inset-0 bg-black/80 flex items-center justify-center z-20 backdrop-blur-sm"><Loader2 className="animate-spin text-indigo-500 w-16 h-16"/></div>}

            <div className="h-full w-full relative">
                 <Scanner onScan={(result) => { if (result && result.length > 0) handleScan(result[0].rawValue) }} allowMultiple={true} scanDelay={2000} styles={{ container: { height: '100%' }, video: { objectFit: 'cover' } }} />
            </div>
            
            {status === 'idle' && (
                <div className="absolute inset-0 pointer-events-none flex flex-col items-center justify-center z-10">
                    <div className={`w-64 h-64 border-2 ${allowMultiple ? 'border-green-500/50' : 'border-indigo-500/50'} rounded-3xl relative animate-pulse`}>
                         <div className="absolute top-0 left-0 w-8 h-8 border-t-4 border-l-4 border-current rounded-tl-2xl opacity-50"></div>
                        <div className="absolute top-0 right-0 w-8 h-8 border-t-4 border-r-4 border-current rounded-tr-2xl opacity-50"></div>
                        <div className="absolute bottom-0 left-0 w-8 h-8 border-b-4 border-l-4 border-current rounded-bl-2xl opacity-50"></div>
                        <div className="absolute bottom-0 right-0 w-8 h-8 border-b-4 border-r-4 border-current rounded-br-2xl opacity-50"></div>
                    </div>
                </div>
            )}
        </div>
        
        {/* ØªÙ… Ø¥ØµÙ„Ø§Ø­ Ø§Ù„Ø®Ø·Ø£ ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ø¬Ø²Ø¡ */}
        <div className="bg-zinc-900 border-t border-zinc-800 text-white p-6 text-center">
            <div className="flex items-center justify-center gap-2 text-zinc-400 mb-1">
                <Camera size={16} />
                <span className="text-xs uppercase tracking-wider font-semibold">Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„</span>
            </div>
            <p className="font-bold text-lg text-indigo-400">
                {status === 'idle' ? 'Ø¬Ø§Ù‡Ø² Ù„Ù„Ù…Ø³Ø­...' : 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©'}
            </p>
        </div>
      </div>
    </div>
  )
}
</file>

<file path="app/staff/[id]/page.tsx">
'use client'

import { useEffect, useState, use } from 'react'
import { supabase } from '@/app/utils/supabase/client'
import { Search, CheckCircle, Clock, Plus, Loader2, X, Shield, Trash2, Edit, Save, UserPlus } from 'lucide-react'
import { Attendee } from '@/types'

interface PageProps { params: Promise<{ id: string }> }

export default function StaffPage({ params }: PageProps) {
    const resolvedParams = use(params)
    const eventId = resolvedParams.id

    const [attendees, setAttendees] = useState<Attendee[]>([])
    const [event, setEvent] = useState<any>(null)
    const [search, setSearch] = useState('')
    const [loading, setLoading] = useState(true)

    const [showAddModal, setShowAddModal] = useState(false)
    const [showEditModal, setShowEditModal] = useState(false)

    const [formData, setFormData] = useState({ name: '', phone: '' })
    const [selectedAttendee, setSelectedAttendee] = useState<Attendee | null>(null)
    const [processing, setProcessing] = useState(false)

    // const supabase = createClient() // Removed in favor of imported instance

    const fetchData = async () => {
        const { data: eventData } = await supabase.from('events').select('title').eq('id', eventId).single()
        setEvent(eventData)

        const { data: attendeesData } = await supabase
            .from('attendees')
            .select('*')
            .eq('event_id', eventId)
            .order('created_at', { ascending: false })

        if (attendeesData) setAttendees(attendeesData)
        setLoading(false)
    }

    useEffect(() => { fetchData() }, [eventId])

    const toggleCheckIn = async (attendee: Attendee) => {
        const newStatus = attendee.status === 'confirmed' ? 'pending' : 'confirmed'
        const checkInTime = newStatus === 'confirmed' ? new Date().toISOString() : null

        setAttendees(prev => prev.map(a => a.id === attendee.id ? { ...a, status: newStatus, check_in_time: checkInTime } : a))
        await supabase.from('attendees').update({ status: newStatus, check_in_time: checkInTime }).eq('id', attendee.id)
    }

    const handleDelete = async (id: string) => {
        if (!confirm('âš ï¸ Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø§Ø³Ù… Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹ Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©ØŸ')) return
        const { error } = await supabase.from('attendees').delete().eq('id', id)
        if (!error) setAttendees(prev => prev.filter(a => a.id !== id))
        else alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø­Ø°Ù')
    }

    const handleAdd = async (e: React.FormEvent) => {
        e.preventDefault()
        setProcessing(true)
        const phone = formData.phone.startsWith('+') ? formData.phone : `+966${formData.phone.replace(/^0+/, '')}`

        const { data, error } = await supabase.from('attendees').insert([{
            event_id: eventId,
            name: formData.name,
            phone: phone,
            email: `${phone}@manual.com`,
            status: 'confirmed',
            check_in_time: new Date().toISOString()
        }]).select().single()

        if (!error && data) {
            setAttendees([data, ...attendees])
            setShowAddModal(false)
            setFormData({ name: '', phone: '' })
            alert('âœ… ØªÙ… Ø§Ù„ØªØ­Ø¶ÙŠØ± Ø¨Ù†Ø¬Ø§Ø­')
        } else {
            alert('âŒ Ø®Ø·Ø£: Ù‚Ø¯ ÙŠÙƒÙˆÙ† Ø§Ù„Ø±Ù‚Ù… Ù…Ø³Ø¬Ù„Ø§Ù‹ Ù…Ø³Ø¨Ù‚Ø§Ù‹')
        }
        setProcessing(false)
    }

    const openEditModal = (attendee: Attendee) => {
        setSelectedAttendee(attendee)
        setFormData({ name: attendee.name, phone: attendee.phone })
        setShowEditModal(true)
    }

    const handleEdit = async (e: React.FormEvent) => {
        e.preventDefault()
        if (!selectedAttendee) return
        setProcessing(true)

        const { error } = await supabase
            .from('attendees')
            .update({ name: formData.name })
            .eq('id', selectedAttendee.id)

        if (!error) {
            setAttendees(prev => prev.map(a => a.id === selectedAttendee.id ? { ...a, name: formData.name } : a))
            setShowEditModal(false)
            setSelectedAttendee(null)
        } else {
            alert('ÙØ´Ù„ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„')
        }
        setProcessing(false)
    }

    const filtered = attendees.filter(a => a.name.toLowerCase().includes(search.toLowerCase()) || a.phone.includes(search))

    if (loading) return <div className="min-h-screen flex justify-center items-center bg-slate-50"><Loader2 className="animate-spin text-indigo-600" /></div>

    return (
        <div className="min-h-screen bg-slate-50 p-4 pb-24" dir="rtl">

            {/* Ø§Ù„Ù‡ÙŠØ¯Ø± */}
            <div className="bg-white p-4 rounded-2xl shadow-sm border border-slate-200 mb-4 sticky top-4 z-10 flex justify-between items-center">
                <div>
                    <h1 className="font-bold text-slate-800 text-lg truncate max-w-[180px]">{event?.title}</h1>
                    <p className="text-xs text-orange-500 flex items-center gap-1 font-bold"><Shield size={12} /> Ù…Ø´Ø±Ù Ù…ÙŠØ¯Ø§Ù†ÙŠ</p>
                </div>
                <div className="bg-indigo-50 text-indigo-600 px-4 py-2 rounded-xl text-sm font-bold shadow-sm">
                    {attendees.filter(a => a.status === 'confirmed').length} <span className="text-slate-400 font-normal">/ {attendees.length}</span>
                </div>
            </div>

            {/* Ø§Ù„Ø¨Ø­Ø« */}
            <div className="relative mb-4">
                <Search className="absolute right-3 top-3.5 text-slate-400" size={20} />
                <input
                    className="w-full bg-white pl-4 pr-10 py-3.5 rounded-xl border border-slate-200 outline-none focus:border-indigo-500 transition shadow-sm"
                    placeholder="Ø¨Ø­Ø« Ø¨Ø§Ù„Ø§Ø³Ù… Ø£Ùˆ Ø§Ù„Ø±Ù‚Ù…..."
                    value={search}
                    onChange={e => setSearch(e.target.value)}
                />
            </div>

            {/* Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© */}
            <div className="space-y-3">
                {filtered.length === 0 ? (
                    <div className="text-center py-10 text-slate-400">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬</div>
                ) : (
                    filtered.map(att => (
                        <div key={att.id} className={`p-4 rounded-xl border flex justify-between items-center transition shadow-sm ${att.status === 'confirmed' ? 'bg-green-50/50 border-green-200' : 'bg-white border-slate-200'}`}>

                            <div className="flex-1">
                                <h3 className="font-bold text-slate-800 mb-0.5">{att.name}</h3>
                                <p className="text-xs text-slate-500 font-mono mb-2" dir="ltr">{att.phone}</p>

                                <div className="flex gap-3">
                                    <button onClick={() => openEditModal(att)} className="text-slate-400 hover:text-indigo-600 flex items-center gap-1 text-[10px] bg-slate-100 px-2 py-1 rounded hover:bg-indigo-50 transition">
                                        <Edit size={12} /> ØªØ¹Ø¯ÙŠÙ„
                                    </button>
                                    <button onClick={() => handleDelete(att.id)} className="text-slate-400 hover:text-red-600 flex items-center gap-1 text-[10px] bg-slate-100 px-2 py-1 rounded hover:bg-red-50 transition">
                                        <Trash2 size={12} /> Ø­Ø°Ù
                                    </button>
                                </div>

                                {att.check_in_time && att.status === 'confirmed' && (
                                    <p className="text-[10px] text-green-600 flex items-center gap-1 mt-2 font-medium">
                                        <Clock size={10} /> Ø¯Ø®Ù„: {new Date(att.check_in_time).toLocaleTimeString('ar-SA', { hour: '2-digit', minute: '2-digit' })}
                                    </p>
                                )}
                            </div>

                            <button
                                onClick={() => toggleCheckIn(att)}
                                className={`w-12 h-12 rounded-full flex items-center justify-center transition shadow-sm ml-2 shrink-0 ${att.status === 'confirmed' ? 'bg-green-500 text-white hover:bg-green-600' : 'bg-slate-100 text-slate-300 hover:bg-indigo-100 hover:text-indigo-600'}`}
                            >
                                <CheckCircle size={24} />
                            </button>
                        </div>
                    ))
                )}
            </div>

            {/* Ø²Ø± Ø§Ù„ØªØ­Ø¶ÙŠØ± Ø§Ù„ÙŠØ¯ÙˆÙŠ (ØªÙ… ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù†Øµ Ù‡Ù†Ø§) */}
            <button
                onClick={() => { setFormData({ name: '', phone: '' }); setShowAddModal(true) }}
                className="fixed bottom-6 left-6 bg-indigo-600 text-white px-6 py-4 rounded-full shadow-2xl flex items-center gap-2 hover:scale-105 transition font-bold z-20"
            >
                <UserPlus size={24} /> <span>ØªØ­Ø¶ÙŠØ± ÙŠØ¯ÙˆÙŠ</span>
            </button>

            {/* Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¥Ø¶Ø§ÙØ© */}
            {showAddModal && (
                <div className="fixed inset-0 bg-black/60 z-50 flex items-end md:items-center justify-center p-4 backdrop-blur-sm animate-in fade-in">
                    <div className="bg-white w-full max-w-sm rounded-2xl p-6 shadow-2xl animate-in slide-in-from-bottom-10">
                        <div className="flex justify-between items-center mb-6">
                            <h3 className="font-bold text-lg flex items-center gap-2"><UserPlus className="text-indigo-600" size={20} /> ØªØ­Ø¶ÙŠØ± Ø²Ø§Ø¦Ø± Ø¬Ø¯ÙŠØ¯</h3>
                            <button onClick={() => setShowAddModal(false)} className="bg-slate-100 p-1 rounded-full text-slate-500 hover:bg-red-50 hover:text-red-500"><X size={20} /></button>
                        </div>
                        <form onSubmit={handleAdd} className="space-y-4">
                            <div>
                                <label className="text-sm font-medium text-slate-700 block mb-1">Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø«Ù„Ø§Ø«ÙŠ</label>
                                <input required className="w-full p-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none" placeholder="Ø§Ù„Ø§Ø³Ù…" value={formData.name} onChange={e => setFormData({ ...formData, name: e.target.value })} />
                            </div>
                            <div>
                                <label className="text-sm font-medium text-slate-700 block mb-1">Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„</label>
                                <input required type="tel" className="w-full p-3 border border-slate-300 rounded-xl text-right focus:ring-2 focus:ring-indigo-500 outline-none" placeholder="5xxxxxxxx" value={formData.phone} onChange={e => setFormData({ ...formData, phone: e.target.value })} />
                            </div>
                            <button disabled={processing} className="w-full bg-indigo-600 text-white py-3.5 rounded-xl font-bold mt-2 shadow-lg hover:bg-indigo-700 transition flex justify-center items-center gap-2">
                                {processing ? <Loader2 className="animate-spin" /> : <CheckCircle size={20} />}
                                <span>ØªØ³Ø¬ÙŠÙ„ ÙˆØ¯Ø®ÙˆÙ„ ÙÙˆØ±ÙŠ</span>
                            </button>
                        </form>
                    </div>
                </div>
            )}

            {/* Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ */}
            {showEditModal && (
                <div className="fixed inset-0 bg-black/60 z-50 flex items-end md:items-center justify-center p-4 backdrop-blur-sm animate-in fade-in">
                    <div className="bg-white w-full max-w-sm rounded-2xl p-6 shadow-2xl animate-in slide-in-from-bottom-10">
                        <div className="flex justify-between items-center mb-6">
                            <h3 className="font-bold text-lg flex items-center gap-2"><Edit className="text-orange-500" size={20} /> ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</h3>
                            <button onClick={() => setShowEditModal(false)} className="bg-slate-100 p-1 rounded-full text-slate-500 hover:bg-slate-200"><X size={20} /></button>
                        </div>
                        <form onSubmit={handleEdit} className="space-y-4">
                            <div>
                                <label className="text-sm font-medium text-slate-700 block mb-1">Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯</label>
                                <input required className="w-full p-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-orange-500 outline-none" value={formData.name} onChange={e => setFormData({ ...formData, name: e.target.value })} />
                            </div>
                            <div className="opacity-50 pointer-events-none">
                                <label className="text-sm font-medium text-slate-700 block mb-1">Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„ (Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ¹Ø¯ÙŠÙ„Ù‡)</label>
                                <input readOnly className="w-full p-3 border border-slate-200 bg-slate-50 rounded-xl text-right" value={formData.phone} />
                            </div>
                            <button disabled={processing} className="w-full bg-slate-900 text-white py-3.5 rounded-xl font-bold mt-2 shadow-lg hover:bg-slate-800 transition flex justify-center items-center gap-2">
                                {processing ? <Loader2 className="animate-spin" /> : <Save size={20} />}
                                <span>Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª</span>
                            </button>
                        </form>
                    </div>
                </div>
            )}

        </div>
    )
}
</file>

<file path="app/t/[id]/page.tsx">
'use client';

import { useRef, use, useState } from 'react';
import { useTicket } from '@/app/hooks/useTicket';
import { QRCodeCanvas } from 'qrcode.react';
import { toPng } from 'html-to-image';
import { 
  Loader2, Download, Calendar, MapPin, 
  Share2, Map, CalendarPlus, Armchair,
  CheckCircle2, XCircle, Send, Heart, PenTool, AlertCircle
} from 'lucide-react';
import { Attendee } from '@/types';
import { supabase } from '@/app/utils/supabase/client';
import { APP_URL } from '@/app/config/constants';
import { validateRequired } from '@/app/utils/validation';

interface PageProps {
  params: Promise<{ id: string }>;
}

export default function TicketPage({ params }: PageProps) {
  const { id } = use(params);
  const { ticket, loading, error, updateTicketStatus } = useTicket(id);

  // Modal States
  const [isRegretModalOpen, setIsRegretModalOpen] = useState(false);
  const [regretReason, setRegretReason] = useState('');
  const [isMemoryModalOpen, setIsMemoryModalOpen] = useState(false);
  const [memoryText, setMemoryText] = useState('');
  
  // Error states
  const [actionError, setActionError] = useState<string | null>(null);
  const [successMessage, setSuccessMessage] = useState<string | null>(null);

  const [submitting, setSubmitting] = useState(false);
  const ticketRef = useRef<HTMLDivElement>(null);

  // --- Handlers: RSVP ---
  const handleConfirm = async () => {
    setActionError(null);
    setSubmitting(true);
    try {
      await updateTicketStatus('confirmed');
      setSuccessMessage('ØªÙ… ØªØ£ÙƒÙŠØ¯ Ø­Ø¶ÙˆØ±ÙƒØŒ Ø´ÙƒØ±Ø§Ù‹ Ù„Ùƒ! âœ¨');
      setTimeout(() => setSuccessMessage(null), 3000);
    } catch (err) {
      const errorMsg = err instanceof Error ? err.message : 'ÙØ´Ù„ ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø¶ÙˆØ±';
      setActionError(errorMsg);
    } finally {
      setSubmitting(false);
    }
  };

  const handleDecline = async () => {
    setActionError(null);
    if (!regretReason.trim()) {
      setActionError('ÙŠØ±Ø¬Ù‰ ÙƒØªØ§Ø¨Ø© Ø³Ø¨Ø¨ Ø§Ù„Ø§Ø¹ØªØ°Ø§Ø±');
      return;
    }

    setSubmitting(true);
    try {
      await updateTicketStatus('declined', regretReason);
      setSuccessMessage('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ø¹ØªØ°Ø§Ø±ÙƒØŒ Ø´ÙƒØ±Ø§Ù‹ Ù„Ø¥Ø´Ø¹Ø§Ø±Ùƒ Ø¨Ø°Ù„Ùƒ');
      setIsRegretModalOpen(false);
      setRegretReason('');
      setTimeout(() => setSuccessMessage(null), 3000);
    } catch (err) {
      const errorMsg = err instanceof Error ? err.message : 'ÙØ´Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø§Ø¹ØªØ°Ø§Ø±';
      setActionError(errorMsg);
    } finally {
      setSubmitting(false);
    }
  };

  // --- Handler: Memory Wall ---
  const handleSendMemory = async () => {
    setActionError(null);
    
    // Ø§Ø³ØªØ®Ø¯Ø§Ù… validateRequired Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø°ÙƒØ±Ù‰
    const validationError = validateRequired(memoryText, 'Ø§Ù„Ø°ÙƒØ±Ù‰');
    if (validationError) {
      setActionError(validationError);
      return;
    }

    if (memoryText.length > 500) {
      setActionError('Ø§Ù„Ø°ÙƒØ±Ù‰ Ø·ÙˆÙŠÙ„Ø© Ø¬Ø¯Ø§Ù‹ (Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ 500 Ø­Ø±Ù)');
      return;
    }

    setSubmitting(true);
    try {
      const { error: insertError } = await supabase.from('memories').insert({
        event_id: ticket?.event_id,
        attendee_id: ticket?.id,
        message: memoryText,
      });

      if (insertError) throw new Error(insertError.message);

      setSuccessMessage('ÙˆØµÙ„Øª Ø±Ø³Ø§Ù„ØªÙƒ Ø§Ù„Ø¬Ù…ÙŠÙ„Ø©! Ø´ÙƒØ±Ø§Ù‹ Ù„Ùƒ â¤ï¸');
      setIsMemoryModalOpen(false);
      setMemoryText('');
      setTimeout(() => setSuccessMessage(null), 3000);
    } catch (err) {
      const errorMsg = err instanceof Error ? err.message : 'ÙØ´Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø°ÙƒØ±Ù‰';
      setActionError(errorMsg);
    } finally {
      setSubmitting(false);
    }
  };

  // --- Handlers: Utilities ---
  const handleDownload = async () => {
    if (!ticketRef.current) {
      setActionError('Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„ØªØ°ÙƒØ±Ø©');
      return;
    }

    try {
      setActionError(null);
      await new Promise((resolve) => setTimeout(resolve, 100));
      
      const dataUrl = await toPng(ticketRef.current, {
        cacheBust: true,
        backgroundColor: '#18181B',
        pixelRatio: 3,
        skipAutoScale: true,
      });

      const link = document.createElement('a');
      link.download = `ticket-${ticket?.name || 'meras'}.png`;
      link.href = dataUrl;
      link.click();
      
      setSuccessMessage('ØªÙ… Ø­ÙØ¸ Ø§Ù„ØªØ°ÙƒØ±Ø© Ø¨Ù†Ø¬Ø§Ø­');
      setTimeout(() => setSuccessMessage(null), 2000);
    } catch (err) {
      const errorMsg = err instanceof Error ? err.message : 'ÙØ´Ù„ Ø­ÙØ¸ Ø§Ù„ØµÙˆØ±Ø©';
      setActionError(errorMsg);
      console.error('Download error:', err);
    }
  };

  const openMap = () => {
    if (!ticket?.events?.location_name) {
      setActionError('Ø§Ù„Ù…ÙˆÙ‚Ø¹ ØºÙŠØ± Ù…ØªÙˆÙØ±');
      return;
    }
    
    const mapsUrl = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(
      ticket.events.location_name
    )}`;
    window.open(mapsUrl, '_blank');
  };

  const addToCalendar = () => {
    if (!ticket?.events) return;

    const event = ticket.events;
    const startDate = new Date(event.date);
    const endDate = new Date(startDate.getTime() + 2 * 60 * 60 * 1000);

    const startTime = startDate.toISOString().replace(/-|:|\.\d\d\d/g, '');
    const endTime = endDate.toISOString().replace(/-|:|\.\d\d\d/g, '');

    const calendarUrl = `https://www.google.com/calendar/render?action=TEMPLATE&text=${encodeURIComponent(
      event.name
    )}&dates=${startTime}/${endTime}&details=${encodeURIComponent(
      'ØªØ°ÙƒØ±Ø© Ø¯Ø®ÙˆÙ„ Ù…ÙØ±Ø§Ø³'
    )}&location=${encodeURIComponent(event.location_name || '')}&sf=true&output=xml`;

    window.open(calendarUrl, '_blank');
  };

  const shareTicket = async () => {
    try {
      if (navigator.share) {
        await navigator.share({
          title: ticket?.events?.name,
          text: `ØªØ°ÙƒØ±ØªÙŠ Ù„Ù„Ø­Ø¶ÙˆØ± ÙÙŠ ${ticket?.events?.name}`,
          url: window.location.href,
        });
      } else {
        // Fallback: copy to clipboard
        await navigator.clipboard.writeText(window.location.href);
        setSuccessMessage('ØªÙ… Ù†Ø³Ø® Ø±Ø§Ø¨Ø· Ø§Ù„ØªØ°ÙƒØ±Ø©');
        setTimeout(() => setSuccessMessage(null), 2000);
      }
    } catch (err) {
      console.error('Share error:', err);
    }
  };

  // --- Render Conditions ---
  if (loading) {
    return (
      <div className="min-h-screen bg-[#0A0A0C] flex items-center justify-center">
        <Loader2 className="animate-spin text-[#C19D65]" size={40} />
      </div>
    );
  }

  if (error || !ticket) {
    return (
      <div className="min-h-screen bg-[#0A0A0C] flex items-center justify-center p-4">
        <div className="bg-[#18181B] rounded-2xl border border-red-500/30 p-6 max-w-md w-full">
          <div className="flex items-center gap-3 mb-4">
            <AlertCircle className="text-red-500" size={24} />
            <h2 className="text-xl font-bold text-white">Ø®Ø·Ø£</h2>
          </div>
          <p className="text-white/60 text-sm">
            {error || 'Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„ØªØ°ÙƒØ±Ø©'}
          </p>
        </div>
      </div>
    );
  }

  // Theme Setup
  const isBusiness = ticket.events?.type === 'business';
  const theme = {
    color: isBusiness ? '#3B82F6' : '#C19D65',
    bgStyle: isBusiness
      ? 'bg-gradient-to-br from-blue-900 to-black'
      : 'bg-gradient-to-br from-[#2a2a2a] to-black',
    badge: isBusiness ? 'VIP Business' : 'Ø¶ÙŠÙ Ø¹Ø²ÙŠØ²',
    primaryBtnText: isBusiness ? 'Ø¥Ø¶Ø§ÙØ© Ù„Ù„ØªÙ‚ÙˆÙŠÙ…' : 'Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø­ÙÙ„',
    primaryBtnIcon: isBusiness ? CalendarPlus : Map,
    primaryBtnAction: isBusiness ? addToCalendar : openMap,
  };

  const seatInfo = ticket.seats?.[0];
  const showSeatInfo = ticket.events && seatInfo;

  return (
    <div
      className="min-h-screen bg-[#0A0A0C] text-white flex flex-col items-center justify-center p-4 font-sans overflow-hidden"
      dir="rtl"
    >
      {/* Alert Messages */}
      {actionError && (
        <div className="w-full max-w-[380px] mb-4 bg-red-500/10 border border-red-500/30 rounded-xl p-3 flex items-start gap-3">
          <AlertCircle className="text-red-500 flex-shrink-0 mt-0.5" size={18} />
          <p className="text-sm text-red-400">{actionError}</p>
        </div>
      )}

      {successMessage && (
        <div className="w-full max-w-[380px] mb-4 bg-green-500/10 border border-green-500/30 rounded-xl p-3 flex items-start gap-3">
          <CheckCircle2 className="text-green-500 flex-shrink-0 mt-0.5" size={18} />
          <p className="text-sm text-green-400">{successMessage}</p>
        </div>
      )}
      <div 
        ref={ticketRef} 
        className="w-full max-w-[380px] bg-[#18181B] rounded-[2.5rem] overflow-hidden border border-white/10 shadow-2xl relative flex flex-col mb-6"
      >
        {/* Header */}
        <div className={`h-40 relative flex items-center justify-center overflow-hidden ${theme.bgStyle}`}>
           <div className="absolute top-0 left-0 w-full h-full opacity-10 bg-white" style={{ backgroundImage: 'radial-gradient(circle, transparent 20%, #000 120%)' }}></div>
           <div className="absolute -top-10 -right-10 w-32 h-32 rounded-full blur-[60px]" style={{ backgroundColor: theme.color }}></div>
           <div className="relative z-10 text-center px-4">
              <h1 className="text-2xl font-black mb-1 drop-shadow-md">{ticket.events?.name}</h1>
              <p className="text-[10px] opacity-70 tracking-widest uppercase">ØªØ°ÙƒØ±Ø© Ø¯Ø®ÙˆÙ„ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©</p>
           </div>
        </div>

        {/* Body */}
        <div className="flex-1 bg-[#18181B] p-6 text-center relative">
           <div className="absolute -left-4 top-0 w-8 h-8 bg-[#0A0A0C] rounded-full"></div>
           <div className="absolute -right-4 top-0 w-8 h-8 bg-[#0A0A0C] rounded-full"></div>
           <div className="absolute left-4 right-4 top-4 border-t-2 border-dashed border-white/10 opacity-50"></div>

           <div className="mt-6 space-y-2">
              <h2 className="text-2xl font-bold text-white">{ticket.name}</h2>
              <span className="inline-block px-3 py-1 rounded-full text-[10px] font-bold border" style={{ borderColor: `${theme.color}40`, color: theme.color, backgroundColor: `${theme.color}10` }}>
                {theme.badge}
              </span>
           </div>

           {/* Seat Info */}
           {showSeatInfo && (
             <div className="mt-6 mx-auto bg-white/5 border border-white/10 rounded-xl p-3 flex items-center justify-between max-w-[200px]">
                <div className="text-right">
                   <p className="text-[9px] text-white/40">Ø§Ù„Ù‚Ø§Ø¹Ø© / Ø§Ù„Ù‚Ø³Ù…</p>
                   <p className="text-sm font-bold text-white">{seatInfo.table?.name}</p>
                </div>
                <div className="h-6 w-px bg-white/10"></div>
                <div className="text-left flex items-center gap-2">
                   <div className="text-right">
                      <p className="text-[9px] text-white/40">Ø§Ù„Ù…Ù‚Ø¹Ø¯</p>
                      <p className="text-lg font-black" style={{ color: theme.color }}>{seatInfo.seat_number}</p>
                   </div>
                   <Armchair size={16} className="text-white/20"/>
                </div>
             </div>
           )}

           {/* QR Code */}
           <div className="my-6 flex justify-center">
              <div className="bg-white p-4 rounded-3xl shadow-[0_0_30px_rgba(255,255,255,0.1)]">
                 <QRCodeCanvas value={`https://meras.app/admin/scan/${id}`} size={150} bgColor={"#ffffff"} fgColor={"#000000"} level={"Q"} />
              </div>
           </div>

           {/* Footer Info */}
           <div className="grid grid-cols-2 gap-4 text-xs text-white/60 mb-4">
              <div className="bg-white/5 rounded-xl p-3 flex flex-col items-center gap-2">
                 <Calendar size={16} style={{ color: theme.color }} />
                 <span>{new Date(ticket.events?.date || '').toLocaleDateString('ar-SA')}</span>
              </div>
              <div className="bg-white/5 rounded-xl p-3 flex flex-col items-center gap-2">
                 <MapPin size={16} style={{ color: theme.color }} />
                 <span className="truncate w-full text-center">{ticket.events?.location_name || 'Ø§Ù„Ù…ÙˆÙ‚Ø¹'}</span>
              </div>
           </div>
           <p className="text-[10px] text-white/20 font-mono tracking-widest">SN: {ticket.id.slice(0, 8).toUpperCase()}</p>
        </div>
        <div className="h-2 w-full" style={{ backgroundColor: theme.color }}></div>
      </div>

      {/* âœ… --- RSVP Section (ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø¶ÙˆØ±) --- */}
      <div className="w-full max-w-[380px] mb-4">
        {ticket.status === 'pending' && (
          <div className="bg-[#18181B] border border-[#C19D65] p-5 rounded-2xl text-center shadow-[0_0_30px_rgba(193,157,101,0.15)] animate-in slide-in-from-bottom-4">
             <h3 className="text-lg font-bold text-white mb-1">Ù‡Ù„ Ø³ØªØ´Ø±ÙÙ†Ø§ Ø¨Ø§Ù„Ø­Ø¶ÙˆØ±ØŸ âœ¨</h3>
             <p className="text-xs text-white/50 mb-4">ØªØ£ÙƒÙŠØ¯Ùƒ ÙŠØ³Ø§Ø¹Ø¯Ù†Ø§ ÙÙŠ Ø§Ù„ØªØ±ØªÙŠØ¨</p>
             <div className="flex gap-3">
                <button onClick={handleConfirm} disabled={submitting} className="flex-1 bg-[#C19D65] text-black py-3 rounded-xl font-bold hover:brightness-110 flex items-center justify-center gap-2">
                   {submitting ? <Loader2 className="animate-spin"/> : <CheckCircle2 size={18}/>} ÙŠØ´Ø±ÙÙ†ÙŠ Ø§Ù„Ø­Ø¶ÙˆØ±
                </button>
                <button onClick={() => setIsRegretModalOpen(true)} disabled={submitting} className="flex-1 bg-white/5 text-white/60 py-3 rounded-xl font-bold hover:bg-white/10 border border-white/10 flex items-center justify-center gap-2">
                   <XCircle size={18}/> Ø£Ø¹ØªØ°Ø±
                </button>
             </div>
          </div>
        )}

        {ticket.status === 'confirmed' && (
           <div className="bg-green-500/10 border border-green-500/30 p-4 rounded-2xl text-center flex items-center justify-center gap-3">
              <div className="bg-green-500 text-black p-1 rounded-full"><CheckCircle2 size={20}/></div>
              <div>
                 <p className="font-bold text-green-500">ØªÙ… ØªØ£ÙƒÙŠØ¯ Ø­Ø¶ÙˆØ±Ùƒ</p>
                 <p className="text-xs text-green-500/60">Ù†Ù†ØªØ¸Ø± Ø¨Ø´ÙˆÙ‚ Ù…Ø´Ø§Ø±ÙƒØªÙƒ Ù„Ù†Ø§</p>
              </div>
           </div>
        )}

        {ticket.status === 'declined' && (
           <div className="bg-white/5 border border-white/10 p-4 rounded-2xl text-center">
              <p className="text-white/60">Ø´ÙƒØ±Ø§Ù‹ Ù„ÙƒØŒ Ø³Ù†ÙØªÙ‚Ø¯Ùƒ ÙÙŠ Ø§Ù„Ø­ÙÙ„ ğŸ¤</p>
              <button onClick={() => handleConfirm()} className="text-xs text-[#C19D65] underline mt-2">ØªØ±Ø§Ø¬Ø¹ØªØŸ Ø§Ø¶ØºØ· Ù‡Ù†Ø§ Ù„Ù„ØªØ£ÙƒÙŠØ¯</button>
           </div>
        )}
      </div>

      {/* âœï¸ --- Memory Wall Button (Ø²Ø± Ø§Ù„Ø°ÙƒØ±ÙŠØ§Øª) --- */}
      <div className="w-full max-w-[380px] mb-8">
         <button 
           onClick={() => setIsMemoryModalOpen(true)}
           className="w-full py-4 bg-[#18181B] border border-dashed border-[#C19D65]/40 text-[#C19D65] rounded-2xl flex items-center justify-center gap-2 hover:bg-[#C19D65]/5 transition-all shadow-sm"
         >
           <PenTool size={18} /> Ø§ÙƒØªØ¨ Ø°ÙƒØ±Ù‰ Ø£Ùˆ ØªÙ‡Ù†Ø¦Ø© Ù„Ù„Ø¹Ø±ÙˆØ³ÙŠÙ†
         </button>
      </div>

      {/* ğŸ› ï¸ --- Action Buttons --- */}
      <div className="flex flex-col gap-3 w-full max-w-[380px]">
        <button onClick={handleDownload} style={{ backgroundColor: theme.color }} className="w-full py-4 rounded-2xl text-black font-black flex items-center justify-center gap-2 shadow-lg hover:brightness-110 active:scale-[0.98] transition-all">
          <Download size={20} /> Ø­ÙØ¸ Ø§Ù„ØªØ°ÙƒØ±Ø© ÙÙŠ Ø§Ù„ØµÙˆØ±
        </button>

        <div className="flex gap-3">
          <button onClick={theme.primaryBtnAction} className="flex-1 py-4 rounded-2xl bg-[#18181B] border border-white/10 text-white font-bold text-sm hover:bg-white/5 active:scale-[0.98] transition-all flex items-center justify-center gap-2">
            <theme.primaryBtnIcon size={18} /> {theme.primaryBtnText}
          </button>
          <button onClick={shareTicket} className="px-6 py-4 rounded-2xl bg-[#18181B] border border-white/10 text-white hover:bg-white/5 transition-all">
              <Share2 size={18} />
          </button>
        </div>
      </div>

      {/* ğŸŒ‘ --- Modals --- */}
      
      {/* 1. Regret Modal (Ù†Ø§ÙØ°Ø© Ø§Ù„Ø§Ø¹ØªØ°Ø§Ø±) */}
      {isRegretModalOpen && (
        <div className="fixed inset-0 bg-black/90 backdrop-blur-sm z-50 flex items-center justify-center p-4">
           <div className="bg-[#18181B] w-full max-w-sm rounded-3xl border border-white/10 p-6 animate-in zoom-in">
              <h3 className="text-xl font-bold mb-2">Ù†Ø£Ø³Ù Ù„Ø¹Ø¯Ù… Ø­Ø¶ÙˆØ±Ùƒ ğŸ˜”</h3>
              <p className="text-xs text-white/50 mb-4">Ø§Ø®ØªÙŠØ§Ø±ÙŠ: Ù‡Ù„ ØªÙˆØ¯ Ø¥Ø®Ø¨Ø§Ø±Ù†Ø§ Ø¨Ø§Ù„Ø³Ø¨Ø¨ØŸ</p>
              <textarea rows={3} placeholder="Ø³Ø¨Ø¨ Ø§Ù„Ø§Ø¹ØªØ°Ø§Ø±..." value={regretReason} onChange={(e) => setRegretReason(e.target.value)} className="w-full bg-black/40 border border-white/10 rounded-xl p-3 text-sm text-white mb-4 focus:border-[#C19D65] outline-none" />
              <div className="flex gap-2">
                 <button onClick={handleDecline} disabled={submitting} className="flex-1 bg-white text-black font-bold py-3 rounded-xl hover:bg-gray-200">
                    {submitting ? 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„...' : 'ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø§Ø¹ØªØ°Ø§Ø±'}
                 </button>
                 <button onClick={() => setIsRegretModalOpen(false)} className="px-5 bg-white/5 rounded-xl font-bold text-white">Ø¥Ù„ØºØ§Ø¡</button>
              </div>
           </div>
        </div>
      )}

      {/* 2. Memory Modal (Ù†Ø§ÙØ°Ø© Ø§Ù„Ø°ÙƒØ±ÙŠØ§Øª) */}
      {isMemoryModalOpen && (
        <div className="fixed inset-0 bg-black/90 backdrop-blur-sm z-50 flex items-center justify-center p-4">
           <div className="bg-[#18181B] w-full max-w-sm rounded-3xl border border-white/10 p-6 animate-in zoom-in relative overflow-hidden">
              <div className="absolute top-0 right-0 w-32 h-32 bg-[#C19D65]/10 rounded-full blur-[50px] pointer-events-none"></div>
              <h3 className="text-xl font-bold mb-2 flex items-center gap-2 text-white">
                <Heart className="text-red-500 fill-red-500" size={20}/> Ø¬Ø¯Ø§Ø± Ø§Ù„Ø°ÙƒØ±ÙŠØ§Øª
              </h3>
              <p className="text-xs text-white/50 mb-4">Ø§ÙƒØªØ¨ ØªÙ‡Ù†Ø¦Ø© Ø£Ùˆ Ø°ÙƒØ±Ù‰ Ù„Ø·ÙŠÙØ© Ø³ØªØ¨Ù‚Ù‰ Ù…Ø®Ù„Ø¯Ø© âœ¨</p>
              <textarea rows={4} placeholder="Ø£ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ù‡Ù†Ø§..." value={memoryText} onChange={(e) => setMemoryText(e.target.value)} className="w-full bg-black/40 border border-white/10 rounded-xl p-3 text-sm text-white mb-4 focus:border-[#C19D65] outline-none resize-none" />
              <div className="flex gap-2">
                 <button onClick={handleSendMemory} disabled={submitting} className="flex-1 bg-[#C19D65] text-black font-bold py-3 rounded-xl hover:brightness-110">
                    {submitting ? 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„...' : 'Ù†Ø´Ø± Ø§Ù„Ø°ÙƒØ±Ù‰'}
                 </button>
                 <button onClick={() => setIsMemoryModalOpen(false)} className="px-5 bg-white/5 rounded-xl font-bold text-white">Ø¥Ù„ØºØ§Ø¡</button>
              </div>
           </div>
        </div>
      )}

      <p className="mt-8 text-[10px] text-white/20">Powered by Meras Platform</p>
    </div>
  );
}
</file>

<file path="app/utils/check-limits.ts">
import { supabase } from '@/app/utils/supabase/client'

export async function checkEventLimit() {
  
  // 1. Ù…ÙŠÙ† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ØŸ
  const { data: { user } } = await supabase.auth.getUser()
  if (!user) return { allowed: false, message: 'ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„' }

  // 2. ÙˆØ´ Ø¨Ø§Ù‚ØªÙ‡ØŸ
  const { data: profile } = await supabase
    .from('profiles')
    .select('*, packages(*)') // Ù†Ø¬ÙŠØ¨ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ù…Ø±Ø¨ÙˆØ·Ø©
    .eq('id', user.id)
    .single()

  // Ø­Ø§Ù„Ø© Ù†Ø§Ø¯Ø±Ø©: Ù„Ùˆ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù‚Ø¯ÙŠÙ… ÙˆÙ…Ø§ Ø¹Ù†Ø¯Ù‡ Ø¨Ø±ÙˆÙØ§ÙŠÙ„ØŒ Ù†Ù…Ø´ÙŠÙ‡ Ù…Ø¤Ù‚ØªØ§Ù‹ Ø£Ùˆ Ù†Ø±Ø¬Ø¹Ù‡ Ø®Ø·Ø£
  if (!profile) return { allowed: true } 

  // 3. ÙƒÙ… Ø­ÙÙ„Ø© Ø³Ø§ÙˆÙ‰ Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†ØŸ
  const { count } = await supabase
    .from('events')
    .select('*', { count: 'exact', head: true }) // head: true ÙŠØ¹Ù†ÙŠ Ø¹Ø¯ ÙÙ‚Ø· Ø¨Ø¯ÙˆÙ† ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    .eq('user_id', user.id)

  const limit = profile.packages.max_events

  // 4. Ù„Ø­Ø¸Ø© Ø§Ù„Ø­Ù‚ÙŠÙ‚Ø©: Ù‡Ù„ ØªØ¬Ø§ÙˆØ² Ø§Ù„Ø­Ø¯ØŸ
  if (count !== null && count >= limit) {
    return { 
        allowed: false, 
        message: `Ø¹Ø°Ø±Ø§Ù‹ ğŸ›‘ØŒ Ø¨Ø§Ù‚ØªÙƒ Ø§Ù„Ø­Ø§Ù„ÙŠØ© (${profile.packages.name}) ØªØ³Ù…Ø­ Ø¨Ù€ ${limit} Ù…Ù†Ø§Ø³Ø¨Ø§Øª ÙÙ‚Ø·.` 
    }
  }

  return { allowed: true }
}
</file>

<file path="app/utils/schemas.ts">
/**
 * Zod Schemas for Data Validation
 * Ø¯ÙˆØ§Ù„ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Zod
 */

import { z } from 'zod';

// Phone number schema with flexible validation
export const phoneSchema = z
  .string()
  .min(1, 'Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ù…Ø·Ù„ÙˆØ¨')
  .regex(/^\d+$/, 'Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø£Ø±Ù‚Ø§Ù… ÙÙ‚Ø·')
  .refine((phone) => phone.length >= 8, {
    message: 'Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ 8 Ø£Ø±Ù‚Ø§Ù…',
  });

// Email schema
export const emailSchema = z
  .string()
  .email('ØµÙŠØºØ© Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØºÙŠØ± ØµØ­ÙŠØ­Ø©')
  .min(1, 'Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù…Ø·Ù„ÙˆØ¨');

// Name schema
export const nameSchema = z
  .string()
  .min(3, 'Ø§Ù„Ø§Ø³Ù… ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ 3 Ø£Ø­Ø±Ù')
  .max(100, 'Ø§Ù„Ø§Ø³Ù… ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø£Ù‚Ù„ Ù…Ù† 100 Ø­Ø±Ù');

// Registration form schema
export const registrationSchema = z.object({
  name: nameSchema,
  email: emailSchema,
  phone: phoneSchema,
  eventId: z.string().uuid('Ù…Ø¹Ø±Ù Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ© ØºÙŠØ± ØµØ­ÙŠØ­'),
});

export type RegistrationFormData = z.infer<typeof registrationSchema>;

// Memory message schema
export const memorySchema = z.object({
  message: z
    .string()
    .min(1, 'Ø§Ù„Ø°ÙƒØ±Ù‰ Ù…Ø·Ù„ÙˆØ¨Ø©')
    .max(500, 'Ø§Ù„Ø°ÙƒØ±Ù‰ Ø·ÙˆÙŠÙ„Ø© Ø¬Ø¯Ø§Ù‹ (Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ 500 Ø­Ø±Ù)'),
  eventId: z.string().uuid('Ù…Ø¹Ø±Ù Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ© ØºÙŠØ± ØµØ­ÙŠØ­'),
  attendeeId: z.string().uuid('Ù…Ø¹Ø±Ù Ø§Ù„Ø¶ÙŠÙ ØºÙŠØ± ØµØ­ÙŠØ­'),
});

export type MemoryData = z.infer<typeof memorySchema>;

// Regret reason schema
export const regretSchema = z.object({
  reason: z
    .string()
    .max(500, 'Ø§Ù„Ø³Ø¨Ø¨ Ø·ÙˆÙŠÙ„ Ø¬Ø¯Ø§Ù‹ (Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ 500 Ø­Ø±Ù)')
    .optional(),
  attendeeId: z.string().uuid('Ù…Ø¹Ø±Ù Ø§Ù„Ø¶ÙŠÙ ØºÙŠØ± ØµØ­ÙŠØ­'),
});

export type RegretData = z.infer<typeof regretSchema>;

// Event schema
export const eventSchema = z.object({
  id: z.string().uuid(),
  name: z.string().min(1, 'Ø§Ø³Ù… Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ© Ù…Ø·Ù„ÙˆØ¨'),
  date: z.string().datetime('Ø§Ù„ØªØ§Ø±ÙŠØ® ØºÙŠØ± ØµØ­ÙŠØ­'),
  location_name: z.string().min(1, 'Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ù…Ø·Ù„ÙˆØ¨'),
  type: z.enum(['business', 'wedding', 'other']),
  user_id: z.string().optional(),
  status: z.enum(['active', 'draft']).optional(),
  guests_count: z.number().optional(),
  is_registration_open: z.boolean().optional(),
});

export type EventData = z.infer<typeof eventSchema>;

// Attendee schema
export const attendeeSchema = z.object({
  id: z.string().uuid(),
  event_id: z.string().uuid(),
  name: z.string(),
  email: z.string().email(),
  phone: z.string(),
  status: z.enum(['pending', 'confirmed', 'declined']),
  created_at: z.string().datetime(),
  check_in_time: z.string().datetime().nullable().optional(),
  attended: z.boolean().optional(),
  regret_reason: z.string().optional(),
});

export type AttendeeData = z.infer<typeof attendeeSchema>;

// Validation helper function
export const validateData = <T>(schema: z.ZodSchema<T>, data: unknown): { success: boolean; data?: T; error?: string } => {
  try {
    const validatedData = schema.parse(data);
    return { success: true, data: validatedData };
  } catch (error) {
    if (error instanceof z.ZodError && error.issues) {
      const errorMessage = (error.issues || [])
        .map((err: any) => {
          const path = err.path && err.path.length > 0 ? err.path.join('.') + ': ' : '';
          return `${path}${err.message}`;
        })
        .join(', ');
      return { success: false, error: errorMessage };
    }
    return { success: false, error: 'ÙØ´Ù„ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª' };
  }
};
</file>

<file path="app/utils/sentry.ts">
/**
 * Sentry Configuration for Error Tracking
 * ØªÙƒÙˆÙŠÙ† Sentry Ù„ØªØªØ¨Ø¹ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡
 */

import * as Sentry from '@sentry/nextjs';

const SENTRY_DSN = process.env.NEXT_PUBLIC_SENTRY_DSN;

export const initializeSentry = () => {
  if (!SENTRY_DSN) {
    console.warn('Sentry DSN not configured. Error tracking is disabled.');
    return;
  }
  Sentry.init({
    dsn: SENTRY_DSN,
    environment: process.env.NODE_ENV,
    tracesSampleRate: process.env.NODE_ENV === 'production' ? 0.1 : 1.0,
    replaysSessionSampleRate: process.env.NODE_ENV === 'production' ? 0.1 : 1.0,
    replaysOnErrorSampleRate: 1.0,
  });
};

/**
 * Capture an error and send it to Sentry
 */
export const captureError = (
  error: Error | string,
  context?: Record<string, any>
) => {
  if (!SENTRY_DSN) {
    console.error(error);
    return;
  }

  if (typeof error === 'string') {
    Sentry.captureException(new Error(error), { extra: context });
  } else {
    Sentry.captureException(error, { extra: context });
  }
};

/**
 * Capture a message
 */
export const captureMessage = (
  message: string,
  level: Sentry.SeverityLevel = 'info',
  context?: Record<string, any>
) => {
  if (!SENTRY_DSN) {
    console.log(message);
    return;
  }

  Sentry.captureMessage(message, {
    level,
    extra: context,
  });
};

/**
 * Set user context for error tracking
 */
export const setSentryUser = (userId: string, email?: string) => {
  if (!SENTRY_DSN) return;

  Sentry.setUser({
    id: userId,
    email: email,
  });
};

/**
 * Clear user context
 */
export const clearSentryUser = () => {
  if (!SENTRY_DSN) return;
  Sentry.setUser(null);
};

export default {
  initializeSentry,
  captureError,
  captureMessage,
  setSentryUser,
  clearSentryUser,
};
</file>

<file path="eslint.config.mjs">
import { defineConfig, globalIgnores } from "eslint/config";
import nextVitals from "eslint-config-next/core-web-vitals";
import nextTs from "eslint-config-next/typescript";

const eslintConfig = defineConfig([
  ...nextVitals,
  ...nextTs,
  // Override default ignores of eslint-config-next.
  globalIgnores([
    // Default ignores of eslint-config-next:
    ".next/**",
    "out/**",
    "build/**",
  ]),
  {
    rules: {
      "@typescript-eslint/no-explicit-any": "off",
      "@typescript-eslint/no-unused-vars": "off",
    },
  },
]);

export default eslintConfig;
</file>

<file path="next.config.ts">
import type { NextConfig } from "next";

const withPWA = require("@ducanh2912/next-pwa").default({
  dest: "public", // Ù…Ø¬Ù„Ø¯ Ø§Ù„ØªØ®Ø²ÙŠÙ†
  cacheOnFrontEndNav: true, // ØªØ®Ø²ÙŠÙ† Ø§Ù„ØµÙØ­Ø§Øª Ø¹Ù†Ø¯ Ø§Ù„ØªÙ†Ù‚Ù„
  aggressiveFrontEndNavCaching: true,
  reloadOnOnline: true, // ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙØ­Ø© Ø¹Ù†Ø¯ Ø¹ÙˆØ¯Ø© Ø§Ù„Ù†Øª
  swcMinify: true,
  disable: process.env.NODE_ENV === "development", // ØªØ¹Ø·ÙŠÙ„Ù‡ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØ·ÙˆÙŠØ±
  workboxOptions: {
    disableDevLogs: true,
  },
});

const nextConfig: NextConfig = {
  // Ø¥Ø¹Ø¯Ø§Ø¯Ø§ØªÙƒ Ø§Ù„Ø­Ø§Ù„ÙŠØ© Ù‡Ù†Ø§ (Ø¥Ù† ÙˆØ¬Ø¯Øª)
};

export default withPWA(nextConfig);
</file>

<file path="public/sw.js">
if(!self.define){let e,s={};const a=(a,n)=>(a=new URL(a+".js",n).href,s[a]||new Promise(s=>{if("document"in self){const e=document.createElement("script");e.src=a,e.onload=s,document.head.appendChild(e)}else e=a,importScripts(a),s()}).then(()=>{let e=s[a];if(!e)throw new Error(`Module ${a} didnâ€™t register its module`);return e}));self.define=(n,c)=>{const i=e||("document"in self?document.currentScript.src:"")||location.href;if(s[i])return;let t={};const d=e=>a(e,i),r={module:{uri:i},exports:t,require:d};s[i]=Promise.all(n.map(e=>r[e]||d(e))).then(e=>(c(...e),t))}}define(["./workbox-f1770938"],function(e){"use strict";importScripts(),self.skipWaiting(),e.clientsClaim(),e.precacheAndRoute([{url:"/_next/static/chunks/253-f664fa71fbbe3138.js",revision:"f664fa71fbbe3138"},{url:"/_next/static/chunks/325-da2085a2e8db78a6.js",revision:"da2085a2e8db78a6"},{url:"/_next/static/chunks/393-c3ad781d1a57a376.js",revision:"c3ad781d1a57a376"},{url:"/_next/static/chunks/4bd1b696-67e30520d621c4dd.js",revision:"67e30520d621c4dd"},{url:"/_next/static/chunks/500-b84d19d842172eba.js",revision:"b84d19d842172eba"},{url:"/_next/static/chunks/59-06cad1cf79d6d6fc.js",revision:"06cad1cf79d6d6fc"},{url:"/_next/static/chunks/639-8be7cf01b7d09ef1.js",revision:"8be7cf01b7d09ef1"},{url:"/_next/static/chunks/892-2bab6efd4a79765a.js",revision:"2bab6efd4a79765a"},{url:"/_next/static/chunks/899.1813981119fa1f8a.js",revision:"1813981119fa1f8a"},{url:"/_next/static/chunks/928-0dd86d0c0a3812fa.js",revision:"0dd86d0c0a3812fa"},{url:"/_next/static/chunks/952-9f6c0da0957ac4b7.js",revision:"9f6c0da0957ac4b7"},{url:"/_next/static/chunks/966.1775eb621d8d3e09.js",revision:"1775eb621d8d3e09"},{url:"/_next/static/chunks/app/_global-error/page-3d4f62991ec176c1.js",revision:"3d4f62991ec176c1"},{url:"/_next/static/chunks/app/_not-found/page-5b472c84fb29a912.js",revision:"5b472c84fb29a912"},{url:"/_next/static/chunks/app/api/send-email/route-3d4f62991ec176c1.js",revision:"3d4f62991ec176c1"},{url:"/_next/static/chunks/app/auth/verify/page-16b980d4fc80328e.js",revision:"16b980d4fc80328e"},{url:"/_next/static/chunks/app/dashboard/events/%5Bid%5D/edit/page-83af10192cbd5b24.js",revision:"83af10192cbd5b24"},{url:"/_next/static/chunks/app/dashboard/events/%5Bid%5D/page-d4e77a8a40808f49.js",revision:"d4e77a8a40808f49"},{url:"/_next/static/chunks/app/dashboard/events/%5Bid%5D/seating/page-0ecc0b6669ee7f16.js",revision:"0ecc0b6669ee7f16"},{url:"/_next/static/chunks/app/dashboard/events/new/page-dd4362ec16be5f7d.js",revision:"dd4362ec16be5f7d"},{url:"/_next/static/chunks/app/dashboard/layout-3d4f62991ec176c1.js",revision:"3d4f62991ec176c1"},{url:"/_next/static/chunks/app/dashboard/page-440cdb4ea81b2757.js",revision:"440cdb4ea81b2757"},{url:"/_next/static/chunks/app/dashboard/settings/page-698495566cdc97f9.js",revision:"698495566cdc97f9"},{url:"/_next/static/chunks/app/e/%5Bid%5D/page-bd0911bbc8f37b3e.js",revision:"bd0911bbc8f37b3e"},{url:"/_next/static/chunks/app/layout-9aab513edd398eb7.js",revision:"9aab513edd398eb7"},{url:"/_next/static/chunks/app/live/%5Bid%5D/page-bc6d33afc72a3dfd.js",revision:"bc6d33afc72a3dfd"},{url:"/_next/static/chunks/app/login/page-670d3f902af55e65.js",revision:"670d3f902af55e65"},{url:"/_next/static/chunks/app/page-7ca4655a76de39db.js",revision:"7ca4655a76de39db"},{url:"/_next/static/chunks/app/pricing/page-8ebc905b9e3fe32e.js",revision:"8ebc905b9e3fe32e"},{url:"/_next/static/chunks/app/register/%5Bid%5D/page-631c76cd1485e9cd.js",revision:"631c76cd1485e9cd"},{url:"/_next/static/chunks/app/s/%5Bid%5D/page-028ae6775c25fe36.js",revision:"028ae6775c25fe36"},{url:"/_next/static/chunks/app/scan/%5Bid%5D/page-d850c6ac767d1ccd.js",revision:"d850c6ac767d1ccd"},{url:"/_next/static/chunks/app/scan/page-261f67f00e369f1f.js",revision:"261f67f00e369f1f"},{url:"/_next/static/chunks/app/staff/%5Bid%5D/page-085a87d1794c5ba6.js",revision:"085a87d1794c5ba6"},{url:"/_next/static/chunks/app/t/%5Bid%5D/page-6cd64edb00af0e8d.js",revision:"6cd64edb00af0e8d"},{url:"/_next/static/chunks/app/wall/%5Bid%5D/page-0d81f4e8b8c4aca0.js",revision:"0d81f4e8b8c4aca0"},{url:"/_next/static/chunks/framework-d7de93249215fb06.js",revision:"d7de93249215fb06"},{url:"/_next/static/chunks/main-app-2761d5f24667605f.js",revision:"2761d5f24667605f"},{url:"/_next/static/chunks/main-f6125e75430b0734.js",revision:"f6125e75430b0734"},{url:"/_next/static/chunks/next/dist/client/components/builtin/app-error-3d4f62991ec176c1.js",revision:"3d4f62991ec176c1"},{url:"/_next/static/chunks/next/dist/client/components/builtin/forbidden-3d4f62991ec176c1.js",revision:"3d4f62991ec176c1"},{url:"/_next/static/chunks/next/dist/client/components/builtin/global-error-cf16205b1bf3ca34.js",revision:"cf16205b1bf3ca34"},{url:"/_next/static/chunks/next/dist/client/components/builtin/not-found-3d4f62991ec176c1.js",revision:"3d4f62991ec176c1"},{url:"/_next/static/chunks/next/dist/client/components/builtin/unauthorized-3d4f62991ec176c1.js",revision:"3d4f62991ec176c1"},{url:"/_next/static/chunks/polyfills-42372ed130431b0a.js",revision:"846118c33b2c0e922d7b3a7676f81f6f"},{url:"/_next/static/chunks/webpack-0aa273b46f48918b.js",revision:"0aa273b46f48918b"},{url:"/_next/static/css/1a720d2f3a2727fa.css",revision:"1a720d2f3a2727fa"},{url:"/_next/static/mHD1Yxq-nCsO0EJIZ_GiQ/_buildManifest.js",revision:"8f2d74b1b3af6fa823cd4e8230d001aa"},{url:"/_next/static/mHD1Yxq-nCsO0EJIZ_GiQ/_ssgManifest.js",revision:"b6652df95db52feb4daf4eca35380933"},{url:"/_next/static/media/088339d3916a15b5-s.woff2",revision:"160e264d26e41c37a56d0c4d3e860e87"},{url:"/_next/static/media/56a56a7c8799f891-s.woff2",revision:"31ed6e6b4d1fcea5b75c91f6bbd3fc6f"},{url:"/_next/static/media/afb88378e209fc3f-s.p.woff2",revision:"9c577e6b2cd38855b71391e943e091e2"},{url:"/_next/static/media/f25f4c1746ba4e6c-s.woff2",revision:"de95b834d8700b5eb3dda3fc3e4e8baf"},{url:"/file.svg",revision:"d09f95206c3fa0bb9bd9fefabfd0ea71"},{url:"/globe.svg",revision:"2aaafa6a49b6563925fe440891e32717"},{url:"/icons/icon-192x192.png",revision:"17ea9476e67b6f5208b012e305e2dc9f"},{url:"/icons/icon-512x512.png",revision:"f2b85085123300e84fff19c579465342"},{url:"/manifest.json",revision:"f3c444bafec3ba0019ab0522fad6f73a"},{url:"/next.svg",revision:"8e061864f388b47f33a1c3780831193e"},{url:"/sounds/Beep/error.mp3",revision:"b33fc6a84e453a9e8cc7091633ae00be"},{url:"/sounds/Beep/success.mp3",revision:"d91f3f470e5bbb456e5a2c82905e226c"},{url:"/swe-worker-5c72df51bb1f6ee0.js",revision:"76fdd3369f623a3edcf74ce2200bfdd0"},{url:"/vercel.svg",revision:"c0af2f507b369b085b35ef4bbe3bcf1e"},{url:"/window.svg",revision:"a2760511c65806022ad20adf74370ff3"}],{ignoreURLParametersMatching:[/^utm_/,/^fbclid$/]}),e.cleanupOutdatedCaches(),e.registerRoute("/",new e.NetworkFirst({cacheName:"start-url",plugins:[{cacheWillUpdate:async({response:e})=>e&&"opaqueredirect"===e.type?new Response(e.body,{status:200,statusText:"OK",headers:e.headers}):e}]}),"GET"),e.registerRoute(/^https:\/\/fonts\.(?:gstatic)\.com\/.*/i,new e.CacheFirst({cacheName:"google-fonts-webfonts",plugins:[new e.ExpirationPlugin({maxEntries:4,maxAgeSeconds:31536e3})]}),"GET"),e.registerRoute(/^https:\/\/fonts\.(?:googleapis)\.com\/.*/i,new e.StaleWhileRevalidate({cacheName:"google-fonts-stylesheets",plugins:[new e.ExpirationPlugin({maxEntries:4,maxAgeSeconds:604800})]}),"GET"),e.registerRoute(/\.(?:eot|otf|ttc|ttf|woff|woff2|font.css)$/i,new e.StaleWhileRevalidate({cacheName:"static-font-assets",plugins:[new e.ExpirationPlugin({maxEntries:4,maxAgeSeconds:604800})]}),"GET"),e.registerRoute(/\.(?:jpg|jpeg|gif|png|svg|ico|webp)$/i,new e.StaleWhileRevalidate({cacheName:"static-image-assets",plugins:[new e.ExpirationPlugin({maxEntries:64,maxAgeSeconds:2592e3})]}),"GET"),e.registerRoute(/\/_next\/static.+\.js$/i,new e.CacheFirst({cacheName:"next-static-js-assets",plugins:[new e.ExpirationPlugin({maxEntries:64,maxAgeSeconds:86400})]}),"GET"),e.registerRoute(/\/_next\/image\?url=.+$/i,new e.StaleWhileRevalidate({cacheName:"next-image",plugins:[new e.ExpirationPlugin({maxEntries:64,maxAgeSeconds:86400})]}),"GET"),e.registerRoute(/\.(?:mp3|wav|ogg)$/i,new e.CacheFirst({cacheName:"static-audio-assets",plugins:[new e.RangeRequestsPlugin,new e.ExpirationPlugin({maxEntries:32,maxAgeSeconds:86400})]}),"GET"),e.registerRoute(/\.(?:mp4|webm)$/i,new e.CacheFirst({cacheName:"static-video-assets",plugins:[new e.RangeRequestsPlugin,new e.ExpirationPlugin({maxEntries:32,maxAgeSeconds:86400})]}),"GET"),e.registerRoute(/\.(?:js)$/i,new e.StaleWhileRevalidate({cacheName:"static-js-assets",plugins:[new e.ExpirationPlugin({maxEntries:48,maxAgeSeconds:86400})]}),"GET"),e.registerRoute(/\.(?:css|less)$/i,new e.StaleWhileRevalidate({cacheName:"static-style-assets",plugins:[new e.ExpirationPlugin({maxEntries:32,maxAgeSeconds:86400})]}),"GET"),e.registerRoute(/\/_next\/data\/.+\/.+\.json$/i,new e.StaleWhileRevalidate({cacheName:"next-data",plugins:[new e.ExpirationPlugin({maxEntries:32,maxAgeSeconds:86400})]}),"GET"),e.registerRoute(/\.(?:json|xml|csv)$/i,new e.NetworkFirst({cacheName:"static-data-assets",plugins:[new e.ExpirationPlugin({maxEntries:32,maxAgeSeconds:86400})]}),"GET"),e.registerRoute(({sameOrigin:e,url:{pathname:s}})=>!(!e||s.startsWith("/api/auth/callback")||!s.startsWith("/api/")),new e.NetworkFirst({cacheName:"apis",networkTimeoutSeconds:10,plugins:[new e.ExpirationPlugin({maxEntries:16,maxAgeSeconds:86400})]}),"GET"),e.registerRoute(({request:e,url:{pathname:s},sameOrigin:a})=>"1"===e.headers.get("RSC")&&"1"===e.headers.get("Next-Router-Prefetch")&&a&&!s.startsWith("/api/"),new e.NetworkFirst({cacheName:"pages-rsc-prefetch",plugins:[new e.ExpirationPlugin({maxEntries:32,maxAgeSeconds:86400})]}),"GET"),e.registerRoute(({request:e,url:{pathname:s},sameOrigin:a})=>"1"===e.headers.get("RSC")&&a&&!s.startsWith("/api/"),new e.NetworkFirst({cacheName:"pages-rsc",plugins:[new e.ExpirationPlugin({maxEntries:32,maxAgeSeconds:86400})]}),"GET"),e.registerRoute(({url:{pathname:e},sameOrigin:s})=>s&&!e.startsWith("/api/"),new e.NetworkFirst({cacheName:"pages",plugins:[new e.ExpirationPlugin({maxEntries:32,maxAgeSeconds:86400})]}),"GET"),e.registerRoute(({sameOrigin:e})=>!e,new e.NetworkFirst({cacheName:"cross-origin",networkTimeoutSeconds:10,plugins:[new e.ExpirationPlugin({maxEntries:32,maxAgeSeconds:3600})]}),"GET"),self.__WB_DISABLE_DEV_LOGS=!0});
</file>

<file path="app/actions/verifyPin.ts">
'use server';

import { createClient } from '@supabase/supabase-js';

// ØªÙ‡ÙŠØ¦Ø© Ø¹Ù…ÙŠÙ„ Supabase
const supabase = createClient(
  process.env.NEXT_PUBLIC_SUPABASE_URL!,
  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!
);

export async function verifyEventPin(eventId: string, inputPin: string) {
  try {
    // 1. Ø¬Ù„Ø¨ Ø§Ù„Ù€ PIN Ù…Ù† Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    const { data, error } = await supabase
      .from('events')
      .select('pin')
      .eq('id', eventId)
      .single();

    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    if (error || !data) {
      return { success: false, error: 'Event not found' };
    }

    // 2. Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù†ØµÙˆØµ Ù„Ù„Ù…Ù‚Ø§Ø±Ù†Ø© (Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù…Ø³Ø§ÙØ§Øª ÙˆØ§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„ÙØ§Ø±ØºØ©)
    const dbPin = String(data.pin || '').trim();
    const enteredPin = String(inputPin || '').trim();

    // 3. Ø§Ù„Ù…Ù‚Ø§Ø±Ù†Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©
    if (dbPin === enteredPin) {
      return { success: true };
    } else {
      return { success: false, error: 'Incorrect PIN' };
    }

  } catch (err) {
    console.error("System Error verifying PIN:", err);
    return { success: false, error: 'Server Error' };
  }
}
</file>

<file path="app/scan/page.tsx">
'use client';

import { useState, useRef, useEffect } from 'react';
import { Scanner } from '@yudiel/react-qr-scanner';
import { supabase } from '@/app/utils/supabase/client';
import { Attendee } from '@/types';
import { Loader2, CheckCircle2, XCircle, AlertTriangle, ScanLine } from 'lucide-react';

type ScanStatus = 'idle' | 'processing' | 'success' | 'error' | 'warning';

interface ScanResult {
    status: ScanStatus;
    message: string;
    attendee?: Attendee;
}

export default function ScannerPage() {
    const [result, setResult] = useState<ScanResult>({ status: 'idle', message: 'Ø¬Ø§Ù‡Ø² Ù„Ù„Ù…Ø³Ø­' });
    const [lastScannedId, setLastScannedId] = useState<string | null>(null);
    const audioRef = useRef<HTMLAudioElement | null>(null);

    // Sound effects (optional, can be added later, just placeholder for now)
    const playSound = (type: 'success' | 'error') => {
        // Implement sound feedback if assets exist
    };

    const handleScan = async (detectedCodes: any[]) => {
        if (detectedCodes.length === 0) return;

        const rawValue = detectedCodes[0].rawValue;
        if (!rawValue || rawValue === lastScannedId || result.status === 'processing') return;

        setLastScannedId(rawValue);
        setResult({ status: 'processing', message: 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚...' });

        try {
            // 1. Fetch Attendee
            const { data: attendee, error } = await supabase
                .from('attendees')
                .select('*, events(*)')
                .eq('id', rawValue)
                .single();

            if (error || !attendee) {
                setResult({ status: 'error', message: 'Ø§Ù„ØªØ°ÙƒØ±Ø© ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø© Ø£Ùˆ ØºÙŠØ± ØµØ§Ù„Ø­Ø©' });
                playSound('error');
                return;
            }

            // 2. Check if already attended
            if (attendee.status === 'attended') {
                setResult({
                    status: 'warning',
                    message: 'ØªÙ… ØªØ­Ø¶ÙŠØ± Ø§Ù„Ø¶ÙŠÙ Ù…Ø³Ø¨Ù‚Ø§Ù‹!',
                    attendee: attendee as Attendee
                });
                playSound('error');
                return;
            }

            // 3. Mark as attended
            const { error: updateError } = await supabase
                .from('attendees')
                .update({ status: 'attended' })
                .eq('id', rawValue);

            if (updateError) throw updateError;

            setResult({
                status: 'success',
                message: 'ØªÙ… Ø§Ù„ØªØ­Ø¶ÙŠØ± Ø¨Ù†Ø¬Ø§Ø­',
                attendee: attendee as Attendee
            });
            playSound('success');

        } catch (err) {
            console.error(err);
            setResult({ status: 'error', message: 'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…' });
        }
    };

    // Auto-reset idle state after error/warning to allow new scans quickly
    useEffect(() => {
        if (result.status !== 'idle' && result.status !== 'processing') {
            const timer = setTimeout(() => {
                // We don't verify 'success' automatically to let the guard see the name
                if (result.status === 'error' || result.status === 'warning') {
                    // Optional: Auto reset or keep it until manual reset? 
                    // Let's keep it for 3 seconds then allow rescan, but scan logic handles "lastScannedId"
                }
            }, 3000);
            return () => clearTimeout(timer);
        }
    }, [result.status]);

    const resetScanner = () => {
        setResult({ status: 'idle', message: 'Ø¬Ø§Ù‡Ø² Ù„Ù„Ù…Ø³Ø­' });
        setLastScannedId(null);
    };

    // Determine UI colors based on status
    const getStatusColor = () => {
        switch (result.status) {
            case 'success': return 'bg-green-500';
            case 'error': return 'bg-red-500';
            case 'warning': return 'bg-yellow-500';
            case 'processing': return 'bg-blue-500';
            default: return 'bg-white/10';
        }
    };

    return (
        <div className="min-h-screen bg-black text-white flex flex-col font-sans" dir="rtl">

            {/* Scanner Area */}
            <div className="flex-1 relative overflow-hidden bg-black">
                <Scanner
                    onScan={handleScan}
                    styles={{
                        container: { height: '100%', width: '100%' },
                        video: { height: '100%', objectFit: 'cover' }
                    }}
                />

                {/* Overlay Guide */}
                <div className="absolute inset-0 border-[30px] border-black/50 flex items-center justify-center pointer-events-none">
                    <div className="w-64 h-64 border-2 border-white/20 rounded-3xl relative animate-pulse">
                        <div className="absolute top-0 left-0 w-6 h-6 border-t-4 border-l-4 border-white rounded-tl-xl"></div>
                        <div className="absolute top-0 right-0 w-6 h-6 border-t-4 border-r-4 border-white rounded-tr-xl"></div>
                        <div className="absolute bottom-0 left-0 w-6 h-6 border-b-4 border-l-4 border-white rounded-bl-xl"></div>
                        <div className="absolute bottom-0 right-0 w-6 h-6 border-b-4 border-r-4 border-white rounded-br-xl"></div>
                    </div>
                </div>

                {/* Top Header */}
                <div className="absolute top-0 left-0 w-full p-6 bg-gradient-to-b from-black/80 to-transparent z-10 flex justify-between items-start">
                    <div>
                        <h1 className="text-xl font-bold flex items-center gap-2"><ScanLine className="text-blue-500" /> Ø§Ù„Ù…Ø§Ø³Ø­ Ø§Ù„Ø¶ÙˆØ¦ÙŠ</h1>
                        <p className="text-xs text-white/50">Ù‚Ù… Ø¨ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ù†Ø­Ùˆ Ø±Ù…Ø² QR Ù„Ù„ØªØ°ÙƒØ±Ø©</p>
                    </div>
                </div>
            </div>

            {/* Results Area - Slide Up Panel */}
            <div className={`
        relative z-20 transition-all duration-500 ease-spring
        ${result.status === 'idle' ? 'h-32 bg-black/90' : 'h-[45vh] bg-[#18181B] rounded-t-[2.5rem]'}
      `}>
                <div className="h-full flex flex-col items-center justify-center p-6 text-center relative overflow-hidden">

                    {/* Status Indicator Bar */}
                    <div className={`absolute top-0 left-0 w-full h-2 transition-colors duration-300 ${getStatusColor()}`}></div>

                    {result.status === 'idle' && (
                        <div className="text-white/40 flex flex-col items-center gap-2 animate-pulse">
                            <ScanLine size={32} />
                            <p>Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù…Ø³Ø­...</p>
                        </div>
                    )}

                    {result.status === 'processing' && (
                        <div className="flex flex-col items-center gap-4">
                            <Loader2 className="animate-spin text-blue-500" size={48} />
                            <h2 className="text-xl font-bold">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚...</h2>
                        </div>
                    )}

                    {result.status === 'success' && result.attendee && (
                        <div className="w-full h-full flex flex-col items-center justify-center animate-in slide-in-from-bottom duration-500">
                            <div className="w-20 h-20 bg-green-500/20 rounded-full flex items-center justify-center mb-4">
                                <CheckCircle2 className="text-green-500" size={40} />
                            </div>
                            <h2 className="text-3xl font-black mb-2 text-green-500">Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ!</h2>
                            <h3 className="text-2xl text-white font-bold mb-1">{result.attendee.name}</h3>
                            <p className="text-white/50 text-sm mb-6">{result.attendee.events?.name}</p>
                            <div className="flex gap-2 text-xs font-mono text-white/30 bg-white/5 px-4 py-2 rounded-full">
                                <span>ID: {result.attendee.id.slice(0, 8)}</span>
                            </div>
                            <button onClick={resetScanner} className="mt-8 bg-white/10 hover:bg-white/20 px-8 py-3 rounded-xl font-bold transition-all">
                                Ù…Ø³Ø­ ØªØ°ÙƒØ±Ø© Ø£Ø®Ø±Ù‰
                            </button>
                        </div>
                    )}

                    {result.status === 'warning' && result.attendee && (
                        <div className="w-full h-full flex flex-col items-center justify-center animate-in slide-in-from-bottom duration-500">
                            <div className="w-20 h-20 bg-yellow-500/20 rounded-full flex items-center justify-center mb-4">
                                <AlertTriangle className="text-yellow-500" size={40} />
                            </div>
                            <h2 className="text-2xl font-black mb-2 text-yellow-500">Ù†ØªØ¨Ù‡! ØªÙ… Ø§Ù„ØªØ­Ø¶ÙŠØ± Ù…Ø³Ø¨Ù‚Ø§Ù‹</h2>
                            <h3 className="text-xl text-white font-bold mb-6">{result.attendee.name}</h3>
                            <div className="bg-yellow-500/10 border border-yellow-500/20 rounded-xl p-4 text-xs text-yellow-200 w-full max-w-xs">
                                Ù‡Ø°Ù‡ Ø§Ù„ØªØ°ÙƒØ±Ø© ØªÙ… Ù…Ø³Ø­Ù‡Ø§ Ø³Ø§Ø¨Ù‚Ø§Ù‹ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ù‡ÙˆÙŠØ© Ø§Ù„Ø­Ø§Ù…Ù„.
                            </div>
                            <button onClick={resetScanner} className="mt-8 bg-white/10 hover:bg-white/20 px-8 py-3 rounded-xl font-bold transition-all">
                                Ù…ØªØ§Ø¨Ø¹Ø©
                            </button>
                        </div>
                    )}

                    {result.status === 'error' && (
                        <div className="w-full h-full flex flex-col items-center justify-center animate-in slide-in-from-bottom duration-500">
                            <div className="w-20 h-20 bg-red-500/20 rounded-full flex items-center justify-center mb-4">
                                <XCircle className="text-red-500" size={40} />
                            </div>
                            <h2 className="text-2xl font-black mb-2 text-red-500">Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ°ÙƒØ±Ø©</h2>
                            <p className="text-white/60 mb-8">{result.message}</p>
                            <button onClick={resetScanner} className="mt-auto bg-white/10 hover:bg-white/20 px-8 py-3 rounded-xl font-bold transition-all">
                                Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰
                            </button>
                        </div>
                    )}

                </div>
            </div>
        </div>
    );
}
</file>

<file path="package.json">
{
  "name": "my-event-app",
  "version": "0.1.0",
  "private": true,
  "scripts": {
    "dev": "next dev --webpack",
    "build": "next build --webpack",
    "start": "next start",
    "lint": "next lint",
    "test": "jest",
    "test:watch": "jest --watch"
  },
  "dependencies": {
    "@dnd-kit/core": "^6.3.1",
    "@dnd-kit/modifiers": "^9.0.0",
    "@dnd-kit/sortable": "^10.0.0",
    "@dnd-kit/utilities": "^3.2.2",
    "@ducanh2912/next-pwa": "^10.2.9",
    "@sentry/nextjs": "^10.32.1",
    "@supabase/ssr": "^0.8.0",
    "@supabase/supabase-js": "^2.89.0",
    "@yudiel/react-qr-scanner": "^2.5.0",
    "framer-motion": "^12.23.26",
    "html-to-image": "^1.11.13",
    "html2canvas": "^1.4.1",
    "html5-qrcode": "^2.3.8",
    "lucide-react": "^0.562.0",
    "next": "16.1.0",
    "nodemailer": "^7.0.12",
    "qrcode": "^1.5.4",
    "qrcode.react": "^4.2.0",
    "react": "19.2.3",
    "react-dom": "19.2.3",
    "read-excel-file": "^6.0.1",
    "resend": "^6.6.0",
    "swr": "^2.3.8",
    "zod": "^4.2.1",
    "zustand": "^5.0.9"
  },
  "devDependencies": {
    "@tailwindcss/postcss": "^4",
    "@testing-library/dom": "^10.4.1",
    "@testing-library/jest-dom": "^6.9.1",
    "@testing-library/react": "^16.3.1",
    "@types/jest": "^30.0.0",
    "@types/node": "^20",
    "@types/nodemailer": "^7.0.4",
    "@types/qrcode": "^1.5.6",
    "@types/react": "^19",
    "@types/react-dom": "^19",
    "@types/react-qr-reader": "^2.1.7",
    "eslint": "^9",
    "eslint-config-next": "16.1.0",
    "jest": "^30.2.0",
    "jest-environment-jsdom": "^30.2.0",
    "tailwindcss": "^4",
    "ts-node": "^10.9.2",
    "typescript": "^5"
  }
}
</file>

<file path="app/scan/[id]/page.tsx">
'use client';

import { useState, useEffect, use } from 'react';
import { supabase } from '@/app/utils/supabase/client';
import { Scanner } from '@yudiel/react-qr-scanner';
import { Loader2, ScanLine, Lock, CheckCircle2, XCircle, Download, LogOut, RefreshCw } from 'lucide-react';
import { verifyEventPin } from '@/app/actions/verifyPin';
import * as Sentry from '@sentry/nextjs';

interface PageProps { params: Promise<{ id: string }>; }

export default function ScannerPage({ params }: PageProps) {
  const { id } = use(params);

  // States
  const [loading, setLoading] = useState(false);
  const [isAuthenticated, setIsAuthenticated] = useState(false);
  const [pin, setPin] = useState('');
  
  // PWA Install State
  const [deferredPrompt, setDeferredPrompt] = useState<any>(null);
  
  // Scanner States
  const [scanResult, setScanResult] = useState<{status: 'idle' | 'success' | 'error', message: string}>({ status: 'idle', message: '' });
  const [lastScannedId, setLastScannedId] = useState<string | null>(null);

  // --- 1. Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„ØªØ«Ø¨ÙŠØª (PWA) ---
  useEffect(() => {
    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault();
      setDeferredPrompt(e);
    });
  }, []);

  const handleInstallClick = async () => {
    if (!deferredPrompt) return;
    deferredPrompt.prompt();
    const { outcome } = await deferredPrompt.userChoice;
    if (outcome === 'accepted') setDeferredPrompt(null);
  };

  // --- 2. Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„ØµÙˆØª ---
  const playSound = (type: 'success' | 'error') => {
    const audio = new Audio(type === 'success' ? '/sounds/success.mp3' : '/sounds/error.mp3');
    audio.play().catch(e => console.log('Audio blocked:', e));
  };

  // --- 3. ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙˆØ§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù€ PIN ---
  const handleLogin = async (e: React.FormEvent) => {
    e.preventDefault();
    setLoading(true);
    try {
      const result = await verifyEventPin(id, pin);
      if (result.success) {
        setIsAuthenticated(true);
      } else {
        alert('Ø±Ù…Ø² Ø§Ù„Ø¯Ø®ÙˆÙ„ ØºÙŠØ± ØµØ­ÙŠØ­ âŒ');
        setPin('');
        if (navigator.vibrate) navigator.vibrate(500);
      }
    } catch (err) {
      Sentry.captureException(err);
      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØ­Ù‚Ù‚');
    } finally {
      setLoading(false);
    }
  };

  // --- 4. Ø¯Ø§Ù„Ø© Ø§Ù„Ù…Ø³Ø­ Ø§Ù„Ù…Ø­Ø¯Ø«Ø© Ù…Ø¹ Sentry ---
  const onScan = async (detectedCodes: any[]) => {
    if (detectedCodes.length === 0 || loading) return;
    const guestId = detectedCodes[0].rawValue;

    if (guestId === lastScannedId) return;
    setLastScannedId(guestId);

    setLoading(true);

    try {
      const { data: success, error } = await supabase
        .rpc('mark_attended', { attendee_id: guestId, input_pin: pin });

      if (error) throw error;

      if (success) {
        playSound('success');
        if (navigator.vibrate) navigator.vibrate(200);
        setScanResult({ status: 'success', message: 'âœ… ØªÙ… Ø§Ù„ØªØ­Ø¶ÙŠØ± Ø¨Ù†Ø¬Ø§Ø­' });
      } else {
        playSound('error');
        if (navigator.vibrate) navigator.vibrate([100, 50, 100]);
        setScanResult({ status: 'error', message: 'âŒ ØªØ°ÙƒØ±Ø© ØºÙŠØ± ØµØ§Ù„Ø­Ø©' });
      }

    } catch (err) {
      Sentry.captureException(err, { extra: { guestId, eventId: id } });
      playSound('error');
      setScanResult({ status: 'error', message: 'Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…' });
    } finally {
      setLoading(false);
      setTimeout(() => {
        setScanResult({ status: 'idle', message: '' });
        setLastScannedId(null);
      }, 2500);
    }
  };

  // --- Ø´Ø§Ø´Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ ---
  if (!isAuthenticated) {
    return (
      <div className="min-h-screen bg-[#0A0A0C] flex flex-col items-center justify-center p-6 text-white" dir="rtl">
        <div className="w-full max-w-sm space-y-8 animate-in fade-in zoom-in duration-500">
           <div className="text-center">
              <div className="w-24 h-24 bg-[#C19D65]/10 rounded-[2.5rem] flex items-center justify-center mx-auto mb-6 text-[#C19D65] border border-[#C19D65]/20 shadow-2xl shadow-[#C19D65]/5">
                 <Lock size={48} />
              </div>
              <h1 className="text-3xl font-black mb-2">Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ù…Ø´Ø±ÙÙŠÙ†</h1>
              <p className="text-white/40 text-sm">Ø£Ø¯Ø®Ù„ Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ù…ÙƒÙˆÙ† Ù…Ù† 4 Ø£Ø±Ù‚Ø§Ù… Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©</p>
           </div>
           
           <form onSubmit={handleLogin} className="space-y-6">
              <input 
                type="password" 
                inputMode="numeric" 
                maxLength={4} 
                value={pin} 
                onChange={(e) => setPin(e.target.value.replace(/\D/g, ''))}
                placeholder="â€¢â€¢â€¢â€¢" 
                className="w-full bg-[#18181B] border border-white/10 rounded-3xl py-6 text-center text-4xl font-mono tracking-[0.5em] outline-none focus:border-[#C19D65] focus:ring-4 focus:ring-[#C19D65]/10 transition-all" 
              />
              <button 
                disabled={loading || pin.length < 4} 
                className="w-full bg-[#C19D65] text-black font-black py-5 rounded-2xl text-lg hover:brightness-110 disabled:opacity-50 shadow-xl shadow-[#C19D65]/10 flex items-center justify-center gap-3 transition-all"
              >
                {loading ? <Loader2 className="animate-spin" /> : 'ÙØªØ­ Ø§Ù„Ù…Ø§Ø³Ø­ Ø§Ù„Ø¶ÙˆØ¦ÙŠ'}
              </button>
           </form>

           {deferredPrompt && (
             <button onClick={handleInstallClick} className="w-full py-4 bg-white/5 rounded-2xl text-xs font-bold flex items-center justify-center gap-2 border border-white/5 text-white/40 hover:bg-white/10 transition-colors">
               <Download size={14} /> ØªØ«Ø¨ÙŠØª Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø§Ø³Ø­ Ø¹Ù„Ù‰ Ø§Ù„Ø¬ÙˆØ§Ù„
             </button>
           )}
        </div>
      </div>
    );
  }

  // --- Ø´Ø§Ø´Ø© Ø§Ù„Ù…Ø§Ø³Ø­ Ø§Ù„Ù†Ø´Ø·Ø© ---
  return (
    <div className="min-h-screen bg-black text-white relative flex flex-col overflow-hidden">
      {/* Header Overlay */}
      <div className="absolute top-0 left-0 w-full z-20 p-6 flex justify-between items-start bg-gradient-to-b from-black/90 via-black/40 to-transparent">
         <div>
            <h2 className="font-black text-lg flex items-center gap-2 tracking-tight">
               <ScanLine size={22} className="text-[#C19D65]"/> Ø§Ù„Ù…Ø§Ø³Ø­ Ø§Ù„Ù†Ø´Ø·
            </h2>
            <p className="text-[10px] text-white/40 mr-8 font-bold uppercase tracking-widest">Live Attendance Tracking</p>
         </div>
         <div className="flex flex-col items-end gap-2">
            <div className="bg-green-500/10 border border-green-500/20 px-3 py-1 rounded-full text-[10px] font-black text-green-500 flex items-center gap-1.5 shadow-lg">
               <div className="w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse"></div> Ù…ØªØµÙ„ Ø§Ù„Ø¢Ù†
            </div>
            <button 
              onClick={() => window.location.reload()} 
              className="p-2 bg-white/5 rounded-full text-white/40 hover:text-white transition-colors"
            >
              <RefreshCw size={14} />
            </button>
         </div>
      </div>

      {/* Scanner Viewport */}
      <div className="flex-1 relative bg-gray-900">
          <Scanner onScan={onScan} styles={{ container: { height: '100%' } }} />
          
          {/* Viewfinder Guide */}
          <div className="absolute inset-0 flex items-center justify-center pointer-events-none">
             <div className="w-72 h-72 border border-white/10 rounded-[3rem] relative bg-black/5">
                {/* Corners */}
                <div className="absolute -top-1 -left-1 w-12 h-12 border-l-[6px] border-t-[6px] border-[#C19D65] rounded-tl-[2rem]"></div>
                <div className="absolute -top-1 -right-1 w-12 h-12 border-r-[6px] border-t-[6px] border-[#C19D65] rounded-tr-[2rem]"></div>
                <div className="absolute -bottom-1 -left-1 w-12 h-12 border-l-[6px] border-b-[6px] border-[#C19D65] rounded-bl-[2rem]"></div>
                <div className="absolute -bottom-1 -right-1 w-12 h-12 border-r-[6px] border-b-[6px] border-[#C19D65] rounded-br-[2rem]"></div>
                
                {/* Scanning Line */}
                <div className="absolute left-4 right-4 h-[2px] bg-gradient-to-r from-transparent via-[#C19D65] to-transparent shadow-[0_0_25px_#C19D65] animate-[scan_2.5s_ease-in-out_infinite]"></div>
             </div>
          </div>

          {/* Status Feedback */}
          {scanResult.status !== 'idle' && (
             <div className="absolute inset-0 z-30 flex items-center justify-center bg-black/80 backdrop-blur-md animate-in fade-in duration-300">
                <div className={`p-10 rounded-[3rem] text-center transform scale-110 shadow-2xl ${scanResult.status === 'success' ? 'bg-green-500 text-black' : 'bg-red-500 text-white'}`}>
                   {scanResult.status === 'success' ? <CheckCircle2 size={80} className="mx-auto mb-4 animate-bounce" /> : <XCircle size={80} className="mx-auto mb-4 animate-shake" />}
                   <h2 className="text-3xl font-black tracking-tight">{scanResult.message}</h2>
                </div>
             </div>
          )}
      </div>

      {/* Bottom Controls */}
      <div className="bg-[#18181B] p-8 pb-12 rounded-t-[3rem] border-t border-white/10 z-20 shadow-[0_-20px_50px_rgba(0,0,0,0.5)]">
          <p className="text-sm text-white/40 mb-6 text-center font-medium italic">Ù‚Ù… Ø¨ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ù†Ø­Ùˆ Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ ØªØ°ÙƒØ±Ø© Ø§Ù„Ø¶ÙŠÙ</p>
          
          <div className="flex gap-4">
             <button 
                onClick={() => setIsAuthenticated(false)} 
                className="flex-1 py-4 bg-white/5 text-white/60 rounded-2xl font-bold flex items-center justify-center gap-2 hover:bg-red-500/10 hover:text-red-400 transition-all border border-white/5"
             >
                <LogOut size={18} /> ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
             </button>
             <div className="flex-1 py-4 bg-black/40 rounded-2xl flex items-center justify-center gap-3 border border-white/5">
                <div className="w-2 h-2 bg-[#C19D65] rounded-full animate-ping"></div>
                <span className="text-xs font-mono font-bold text-white/60 uppercase tracking-widest">Active Session</span>
             </div>
          </div>
      </div>

      <style jsx global>{`
        @keyframes scan {
          0%, 100% { top: 10%; }
          50% { top: 90%; }
        }
        @keyframes shake {
          0%, 100% { transform: translateX(0); }
          25% { transform: translateX(-10px); }
          75% { transform: translateX(10px); }
        }
        .animate-shake { animation: shake 0.4s ease-in-out; }
      `}</style>
    </div>
  );
}
</file>

</files>
